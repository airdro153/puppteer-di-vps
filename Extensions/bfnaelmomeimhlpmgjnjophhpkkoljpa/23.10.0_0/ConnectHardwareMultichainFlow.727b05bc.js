(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire1d24;n.register("3qeW6",(function(a,r){var o;o=a.exports,Object.defineProperty(o,"__esModule",{value:!0,configurable:!0}),t(a.exports,"default",(function(){return h}));var c=n("1fwzV"),i=n("lz5BI"),s=n("29o0l"),l=n("84vNm"),u=n("2CuFm"),d=n("bQfjx"),p=n("krk0C"),m=n("V2q0K");var h=()=>{var t;const{hardwareStepStack:n,pushStep:a,popStep:r,currentStep:o}=(0,m.useHardwareOnboardingStore)(),h=(0,l.default)(n,((e,t)=>(null==e?void 0:e.length)===t.length)),g=(0,s.useCallback)((()=>{var e,t,n,a,c;(null===(e=o())||void 0===e?void 0:e.props.preventBack)||((null===(t=o())||void 0===t?void 0:t.props.onBackCallback)&&(null===(c=null===(n=o())||void 0===n?void 0:(a=n.props).onBackCallback)||void 0===c||c.call(a)),r())}),[o,r]);(0,s.useEffect)((()=>{a(e(s).createElement(p.ConnectHardwareMultichain,null))}),[a]);const f=n.length>(null!=h?h:[]).length,y=0===(null==h?void 0:h.length),C={initial:{x:y?0:f?150:-150,opacity:y?1:0},animate:{x:0,opacity:1},exit:{opacity:0},transition:{duration:.2}};return e(s).createElement(u.ConnectHardwareContainer,null,e(s).createElement(d.StepHeader,{totalSteps:u.TOTAL_CONNECT_HARDWARE_STEPS,onBackClick:g,showBackButton:!(null===(t=o())||void 0===t?void 0:t.props.preventBack),currentStepIndex:n.length-1}),e(s).createElement(c.AnimatePresence,{exitBeforeEnter:!0},e(s).createElement(i.motion.div,Object.assign({style:{display:"flex",flexGrow:1},key:`${n.length}_${null==h?void 0:h.length}`},C),o())))}})),n.register("krk0C",(function(a,r){t(a.exports,"ConnectHardwareMultichain",(function(){return b}));var o=n("iOvk1"),c=n("43063"),i=n("29o0l"),s=n("9CoSy"),l=n("2CuFm"),u=n("gX5Te"),d=n("dWu3Y"),p=n("hFkH3"),m=n("cb8KS"),h=n("3mrWC"),g=n("j81qC"),f=n("bhnmm"),y=n("efSU2"),C=n("ivB1q"),S=n("V2q0K");const v={mainnetOnly:!0},w=()=>{(0,d.usePrefetchFeatureFlagsEffect)();const t=(0,S.useHardwareOnboardingStore)((e=>e.pushStep)),n=(0,S.useHardwareOnboardingStore)((e=>e.setSelectedChains)),{t:a}=(0,c.useTranslation)(),{data:r}=u.hooks.useEnabledChainTypes(),{data:g}=u.hooks.useEnabledChainIDs(v),{data:w,isFetching:b,refetch:T}=u.hooks.useRequestLedgerPermission(!0,!0),{buttonDisabled:E,defaultIcon:x,primaryText:H,secondaryText:I,buttonText:k,iconType:A,onClick:O}=(0,i.useMemo)((()=>{var c,l;let u=!1;const d=e(i).createElement(f.SpinnerIcon,null);let p,h,S,v=m.ConfirmationIconType.Default,E=s.NOOP;if(b)p=a("connectHardwareSearching"),h=a("connectHardwareMakeSureConnected"),S=a("commandContinue"),u=!0;else if("granted"===(null==w?void 0:w.type)){const s=null!==(l=null===(c=w.transport.deviceModel)||void 0===c?void 0:c.productName)&&void 0!==l?l:"Ledger";v=m.ConfirmationIconType.Success,p=a("connectHardwarePairSuccessPrimary",{productName:s}),h=a("connectHardwarePairSuccessSecondary",{productName:s}),S=a("commandContinue"),u=!1,E=()=>{if(1===r.length){const a=new Map;a.set(r[0],{});for(const e of g){const t=(0,o.getChainType)(e);a.set(t,{[e]:!0})}n(r,a),t(e(i).createElement(y.ConnectHardwareMultichainOpenApp,{preventBack:!0}))}else t(e(i).createElement(C.ConnectHardwareMultichainSelectChain,{onBackCallback:()=>{n([],new Map)}}))}}else"denied"===(null==w?void 0:w.type)?(v=m.ConfirmationIconType.Failure,p=a("connectHardwarePermissionDeniedPrimary"),h=a("connectHardwarePermissionDeniedSecondary"),S=a("commandTryAgain"),u=!1,E=T):w&&"unable-to-connect"!==w.type||(v=m.ConfirmationIconType.Failure,p=a("connectHardwarePermissionUnableToConnect"),h=a("connectHardwareWaitingForApplicationSecondaryText"),S=a("commandTryAgain"),u=!1,E=T);return{buttonDisabled:u,defaultIcon:d,primaryText:p,secondaryText:h,buttonText:S,iconType:v,onClick:E}}),[g,r,w,t,T,b,n,a]);return e(i).createElement(l.ConnectHardwareStepContainer,null,e(i).createElement(h.IconHeader,{icon:e(i).createElement(m.ConfirmationIcon,{defaultIcon:x,type:A}),primaryText:H,headerStyle:h.IconHeaderStyle.Large,secondaryText:I}),e(i).createElement(p.Button,{onClick:O,theme:"primary",disabled:E},k))},b=()=>{const{pushSubStep:t}=(0,S.useHardwareOnboardingStore)(),{t:n}=(0,c.useTranslation)();return e(i).createElement(l.ConnectHardwareStepContainer,null,e(i).createElement(h.IconHeader,{icon:e(i).createElement(g.IconLedgerLogo,null),primaryText:n("connectHardwareLedger"),headerStyle:h.IconHeaderStyle.Large,secondaryText:n("connectHardwareStartConnection"),animateText:!0}),e(i).createElement(p.Button,{onClick:()=>{t(e(i).createElement(w,null))},theme:"primary"},n("commandConnect")))}})),n.register("dWu3Y",(function(e,a){t(e.exports,"fetchFeatureFlags",(function(){return u}),(function(e){return u=e})),t(e.exports,"useFeatureFlags",(function(){return d}),(function(e){return d=e})),t(e.exports,"useRefreshFeatureFlags",(function(){return p}),(function(e){return p=e})),t(e.exports,"usePrefetchFeatureFlagsEffect",(function(){return m}),(function(e){return m=e}));var r=n("3ljHn"),o=n("5ekp2"),c=n("7dHjq"),i=n("29o0l"),s=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function c(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}s((a=a.apply(e,t||[])).next())}))};const l="feature-flags",u=()=>s(void 0,void 0,void 0,(function*(){const e=yield r.featureFlagClient.getFeatureFlags();return new Map(Object.entries(e))})),d=e=>{const{data:t,isLoading:n}=(0,o.useQuery)({queryKey:[l],queryFn:u});return{data:(0,i.useMemo)((()=>{const n=[];for(const a of e)n.push(!!(null==t?void 0:t.get(a)));return n}),[t,e]),isLoading:n}},p=()=>{const e=(0,c.useQueryClient)();return()=>e.invalidateQueries([l])},m=()=>{const e=(0,c.useQueryClient)();(0,i.useEffect)((()=>{e.prefetchQuery([l],u)}),[e])}})),n.register("efSU2",(function(a,r){t(a.exports,"ConnectHardwareMultichainOpenApp",(function(){return D}),(function(e){return D=e}));var o=n("4xbAj"),c=n("jZpRu"),i=n("iOvk1"),s=n("eJxop"),l=n("43063"),u=n("g9PKp"),d=n("29o0l"),p=n("gkfw3"),m=n("creZv"),h=n("2CuFm"),g=n("gX5Te"),f=n("dWu3Y"),y=n("gcdBN"),C=n("hFkH3"),S=n("cGJ3C"),v=n("cb8KS"),w=n("3mrWC"),b=n("bhnmm"),T=n("27SDj"),E=n("6NY04"),x=n("V2q0K"),H=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function c(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}s((a=a.apply(e,t||[])).next())}))};const I=p.default.div`
  align-self: center;
  background-color: rgba(255, 255, 255, 0.03);
  border-radius: 80px;
  padding: 8px 16px;
  max-width: 150px;
`,k=p.default.div`
  display: flex;

  svg {
    position: relative;

    :first-child {
      left: ${e=>e.logoCount>1?"12.5px":0};
    }

    :nth-child(2) {
      left: ${e=>e.logoCount>1?"-12.5px":0};
    }
  }
`,A={chainType:i.ChainType.Solana,pathType:c.DerivationPathType.Bip44RootSolana},O={chainType:i.ChainType.EVM,pathType:c.DerivationPathType.Bip44RootEthereum},D=()=>{const t=(0,x.useHardwareOnboardingStore)((e=>e.chainImportStep)),n=(0,x.useHardwareOnboardingStore)((e=>e.setIncrementChainImportStep)),a=(0,x.useHardwareOnboardingStore)((e=>e.selectedChains)),r=(0,x.useHardwareOnboardingStore)((e=>e.selectedChainsMap)),p=(0,x.useHardwareOnboardingStore)((e=>e.pushStep)),M=(0,x.useHardwareOnboardingStore)((e=>e.pushSubStep)),j=(0,x.useHardwareOnboardingStore)((e=>e.setDiscoveredAccounts)),P=(0,x.useHardwareOnboardingStore)((e=>e.setDerivedAccountGroups)),B=(0,d.useRef)(x.useHardwareOnboardingStore.getState().derivedAccountGroups),{t:F,i18n:L}=(0,l.useTranslation)(),N=a[t-1],{data:R=[],isFetched:W,isError:q}=g.hooks.useAllMultiChainAccounts(),[_,K]=(0,d.useState)(!1),V=(0,d.useMemo)((()=>{const e=[],t=r.get(N)||{};for(const[n,a]of Object.entries(t))a&&e.push(n);return e}),[N,r]),{chainNameTextOr:G,chainNameTextAnd:$}=(0,d.useMemo)((()=>{const e=V.map((e=>(0,i.getChainNameByID)(e))),t=new Intl.ListFormat(L.resolvedLanguage,{style:"long",type:"disjunction"}),n=new Intl.ListFormat(L.resolvedLanguage,{style:"long",type:"conjunction"});return{chainNameTextOr:t.format(e),chainNameTextAnd:n.format(e)}}),[V,L]),Q=(0,d.useMemo)((()=>V.map((t=>e(d).createElement(S.ChainLogo,{key:t,chainId:t,width:90,height:90,strokeWidth:1})))),[V]);(0,d.useEffect)((()=>{const e=x.useHardwareOnboardingStore.subscribe((e=>B.current=e.derivedAccountGroups));return()=>e()}),[]);const U=(0,d.useMemo)((()=>{const e=[];N===i.ChainType.Solana?e.push(A):N===i.ChainType.EVM&&e.push(O);for(let t=0;t<19;++t)switch(N){case i.ChainType.Solana:{const n={chainType:N,index:t};e.push(Object.assign(Object.assign({},n),{pathType:c.DerivationPathType.Bip44ChangeSolana})),e.push(Object.assign(Object.assign({},n),{pathType:c.DerivationPathType.Bip44Solana}));break}case i.ChainType.EVM:{const n={chainType:N,index:t};e.push(Object.assign(Object.assign({},n),{pathType:c.DerivationPathType.Bip44Ethereum})),e.push(Object.assign(Object.assign({},n),{pathType:c.DerivationPathType.Bip44EthereumSecondary}));break}}return e}),[N]),[z,Y]=(0,d.useState)(!0),{data:J=s.LEDGER_NOT_CONNECTED_STATE}=g.hooks.useLedgerWireTransportState(z,!0),{data:[X]}=(0,f.useFeatureFlags)(["kill-ledger-xpub-derivation"]),{data:Z,error:ee,fetchStatus:te,refetch:ne}=g.hooks.useLedgerAddresses(J,U,!0,!X),ae="fetching"===te,re=!J.isConnected&&"reconnecting"!==J.status,[oe,ce]=(0,d.useState)(!1),{data:ie,refetch:se}=g.hooks.useRequestLedgerPermission(oe,!0);(0,d.useEffect)((()=>{re&&Y(!1)}),[re]),(0,d.useEffect)((()=>{"granted"===(null==ie?void 0:ie.type)&&(Y(!0),ce(!1))}),[ie]);const le=(0,d.useCallback)((()=>H(void 0,void 0,void 0,(function*(){var n;if(Z&&Object.keys(Z).length){const r=[...B.current];let c=0;for(const e of Object.values(Z)){const t=null!==(n=r[c])&&void 0!==n?n:{accounts:{}},a={accounts:Object.assign({},t.accounts),derivationIndex:U[c].index};switch(N){case i.ChainType.EVM:V.includes(i.ChainID.PolygonMainnet)&&(a.accounts[`${i.ChainID.PolygonMainnet}-${e}`]={chainType:N,chainId:i.ChainID.PolygonMainnet,address:e,derivationPathType:U[c].pathType}),V.includes(i.ChainID.EthereumMainnet)&&(a.accounts[`${i.ChainID.EthereumMainnet}-${e}`]={chainType:N,chainId:i.ChainID.EthereumMainnet,address:e,derivationPathType:U[c].pathType});break;case i.ChainType.Solana:a.accounts[`${i.ChainID.SolanaMainnet}-${e}`]={chainType:N,address:e,chainId:i.ChainID.SolanaMainnet,derivationPathType:U[c].pathType}}r[c]=a,c++}if(P(r),W&&a.length===t){K(!0);const t=(e=>{const t=new Set;for(const n of e)for(const{address:e}of n.addresses)t.add(e);return t})(R),n=r.reduce(((e,n)=>{let a=!1;for(const{address:e}of Object.values(n.accounts))a=a||t.has(e);return a||e.push(n),e}),[]),a=[],c=[];for(let e=0;e<n.length;e+=u.BATCH_SIZE_BY_PLATFORM.extension){const t=n.slice(e,e+u.BATCH_SIZE_BY_PLATFORM.extension).map((e=>{const t=Object.entries(e.accounts).reduce(((t,[n,a])=>{var r;return t[n]={account:a,seedIndex:null!==(r=e.derivationIndex)&&void 0!==r?r:-1},t}),{});return t}));c.push(t)}for(const e of c)a.push((0,u.discoverAccounts)(e));const i=(yield Promise.all(a)).flat().map((e=>{switch(e.status){case"discovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity||(0,o.isRecommendedDerivationPathType)(e.derivationPathType)))});case"undiscovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>(0,o.isRecommendedDerivationPathType)(e.derivationPathType)))})}})).filter((e=>e.accounts.length>0)).map((e=>{const t=(0,m.default)();return Object.assign(Object.assign({},e),{discoveryIdentifier:t})})),s=i.filter((e=>"undiscovered"===e.status||e.isSelectedByDefault)),l=i.filter((e=>!("undiscovered"===e.status||e.isSelectedByDefault))).slice(0,2),h=s.length>0,g=R.filter((e=>e.type===o.AccountType.Ledger)).length,f=(h?[...s,...l]:i.filter((e=>!e.accounts.some((e=>!(0,o.isRecommendedDerivationPathType)(e.derivationPathType))))).slice(0,3)).map(((e,t)=>Object.assign(Object.assign({},e),{accountIndex:g+t})));j(f,h),p(e(d).createElement(E.ConnectHardwareMultichainImportAccount,{preventBack:!0}))}}}))),[Z,P,W,a.length,t,U,N,V,R,j,p]);let ue,de,pe,me;(0,d.useEffect)((()=>{Z&&Object.keys(Z).length===U.length&&(le(),a.length!==t&&(n(),M(e(d).createElement(D,{preventBack:!0}))))}),[Z,U,p,M,t,a,le,n]);let he=()=>{};return q?(ue=e(d).createElement(v.ConfirmationIcon,{type:v.ConfirmationIconType.Failure}),de=F("connectHardwareErrorLedgerGeneric"),pe=F("connectHardwareErrorLedgerPhantomLocked"),he=()=>H(void 0,void 0,void 0,(function*(){const e=yield(0,y.getCurrentTabAsync)();void 0!==e.id&&(0,y.closeTabAsync)(e.id)})),me=F("commandClose")):ie&&"granted"!==ie.type?(ue=e(d).createElement(v.ConfirmationIcon,{type:v.ConfirmationIconType.Warning}),de=F("connectHardwarePermissionDeniedPrimary"),pe=F("connectHardwarePermissionDeniedSecondary"),me=F("homeErrorButtonText"),he=se):re?(ue=e(d).createElement(v.ConfirmationIcon,{type:v.ConfirmationIconType.Warning}),de=F("connectHardwarePermissionUnableToConnect"),pe=F("connectHardwarePermissionUnableToConnectDescription"),me=F("commandConnect"),he=se):ee instanceof s.LedgerLockedError?(ue=e(d).createElement(v.ConfirmationIcon,{type:v.ConfirmationIconType.Failure}),de=F("connectHardwareErrorLedgerLocked"),pe=F("connectHardwareErrorLedgerLockedDescription"),me=F("homeErrorButtonText"),he=ne):ee?(ue=e(d).createElement(v.ConfirmationIcon,{type:v.ConfirmationIconType.Failure}),de=F("connectHardwareErrorLedgerGeneric"),pe=F("connectHardwareErrorLedgerGenericDescription"),me=F("homeErrorButtonText"),he=ne):"reconnecting"==J.status?(ue=e(d).createElement(v.ConfirmationIcon,{defaultIcon:e(d).createElement(b.SpinnerIcon,null),type:v.ConfirmationIconType.Default}),de=F("connectHardwareConnecting"),pe=F("connectHardwareConnectingDescription")):_?(ue=e(d).createElement(v.ConfirmationIcon,{defaultIcon:e(d).createElement(b.SpinnerIcon,null),type:v.ConfirmationIconType.Default}),de=F("connectHardwareDiscoveringAccounts"),pe=F("connectHardwareDiscoveringAccountsDescription")):ae?(ue=e(d).createElement(v.ConfirmationIcon,{defaultIcon:e(d).createElement(b.SpinnerIcon,null),type:v.ConfirmationIconType.Default}),de=F("connectHardwareConnectingAccounts"),pe=F("connectHardwareFindingAccountsWithActivity",{chainName:$})):(ue=e(d).createElement(k,{logoCount:Q.length},Q),de=F("connectHardwareOpenAppInterpolated",{app:G}),pe=F("connectHardwareOpenAppDescription")),e(d).createElement(h.ConnectHardwareStepContainer,null,e(d).createElement(w.IconHeader,{icon:ue,primaryText:de,headerStyle:w.IconHeaderStyle.Large,secondaryText:pe}),me?e(d).createElement(C.Button,{onClick:he,theme:"primary"},me):e(d).createElement(I,null,e(d).createElement(T.Text,{color:"#999999",size:14},F("connectHardwareAccountsStepOfSteps",{stepNum:t,totalSteps:a.length}))))}})),n.register("6NY04",(function(a,r){t(a.exports,"ConnectHardwareMultichainImportAccount",(function(){return y}));var o=n("43063"),c=n("29o0l"),i=n("gkfw3"),s=n("2CuFm"),l=n("hFkH3"),u=n("cb8KS"),d=n("3mrWC"),p=n("2QUtj"),m=n("eNcWQ"),h=n("V2q0K");const g=i.default.div`
  margin-bottom: 35px;
`,f=(0,i.default)(l.Button)`
  margin-bottom: 10px;
`,y=()=>{const t=(0,h.useHardwareOnboardingStore)((e=>e.discoveredAccounts)),n=(0,h.useHardwareOnboardingStore)((e=>e.activeAccountsFound)),a=(0,h.useHardwareOnboardingStore)((e=>e.setSelectedAccounts)),r=(0,h.useHardwareOnboardingStore)((e=>e.pushSubStep)),{t:i}=(0,o.useTranslation)(),y=(0,c.useMemo)((()=>{let e;if(n){const n=t.filter((e=>"undiscovered"===e.status||e.isSelectedByDefault));e=i(1===n.length?"connectHardwareFoundAccountsWithActivitySingular":"connectHardwareFoundAccountsWithActivity",{numOfAccounts:n.length})}else e=i("connectHardwareFoundSomeAccounts");return e}),[n,i,t]),C=(0,c.useCallback)((()=>{r(e(c).createElement(m.ConnectHardwareMultichainSelectAccounts,{activeAccounts:t}))}),[r,t]),S=(0,c.useCallback)((()=>{r(e(c).createElement(p.ConnectHardwareMultichainImportConfirmation,{preventBack:!0}))}),[r]);return(0,c.useEffect)((()=>{const e=t.reduce(((e,t,n)=>(("discovered"===t.status&&t.isSelectedByDefault||0===n)&&(e[t.discoveryIdentifier]=!0),e)),{});a(e)}),[t,a,n,i]),e(c).createElement(s.ConnectHardwareStepContainer,null,e(c).createElement(g,null,e(c).createElement(d.IconHeader,{icon:e(c).createElement(u.ConfirmationIcon,{type:u.ConfirmationIconType.Success}),primaryText:i("connectHardwareConnectAccounts"),headerStyle:d.IconHeaderStyle.Large,secondaryText:y})),e(c).createElement(f,{onClick:C,theme:"default"},i("connectHardwareSelectAccounts")),e(c).createElement(l.Button,{onClick:S,theme:"primary"},i("commandContinue")))}})),n.register("2QUtj",(function(a,r){t(a.exports,"ConnectHardwareMultichainImportConfirmation",(function(){return m}));var o=n("43063"),c=n("29o0l"),i=n("2CuFm"),s=n("gX5Te"),l=n("hFkH3"),u=n("cb8KS"),d=n("3mrWC"),p=n("V2q0K");const m=()=>{const t=(0,p.useHardwareOnboardingStore)((e=>e.discoveredAccounts)),n=(0,p.useHardwareOnboardingStore)((e=>e.selectedAccounts)),{t:a}=(0,o.useTranslation)(),{mutateAsync:r}=s.hooks.useConnectLedgerAccounts(),[m,h]=(0,c.useState)(!1),g=(0,c.useMemo)((()=>t.filter((e=>!!n[e.discoveryIdentifier]))),[t,n]);return(0,c.useEffect)((()=>{if(g.length){const e={accounts:g.map((e=>{const{accounts:t,seedIndex:n,accountIndex:a}=e;return{derivationIndex:n,publicKeys:t.map((e=>({pathType:e.derivationPathType,publicKey:e.address}))),accountIndex:a}}))};r(e).finally((()=>{h(!0)}))}else h(!0)}),[g,r]),e(c).createElement(i.ConnectHardwareStepContainer,null,e(c).createElement(d.IconHeader,{icon:e(c).createElement(u.ConfirmationIcon,{type:u.ConfirmationIconType.Success}),primaryText:a("connectHardwareAccountsAddedInterpolated",{numOfAccounts:g.length}),headerStyle:d.IconHeaderStyle.Large,secondaryText:a("connectHardwareFinishSecondaryText")}),e(c).createElement(l.Button,{onClick:()=>{window.close()},theme:"primary",disabled:!m},a("pastParticipleDone")))}})),n.register("V2q0K",(function(a,r){t(a.exports,"useHardwareOnboardingStore",(function(){return l}));var o=n("RVqnc"),c=n("1I4L6"),i=n("gTwcH");const s={hardwareStepStack:[],hardwareStepSubStack:{},selectedChains:[],selectedChainsMap:new Map,chainImportStep:1,derivedAccountGroups:[],discoveredAccounts:[],activeAccountsFound:!1,selectedAccounts:{}},l=e(i)(((e,t)=>Object.assign(Object.assign({},s),{pushStep:n=>{const a=t().hardwareStepStack;e({hardwareStepStack:a.concat(n)})},popStep:()=>{var n;const a=t().hardwareStepStack.length-1;if((null!==(n=t().hardwareStepSubStack[a])&&void 0!==n?n:[]).length)return e((0,c.default)((e=>{e.hardwareStepSubStack[a]=e.hardwareStepSubStack[a].slice(0,-1)})));e((0,c.default)((e=>{e.hardwareStepStack=e.hardwareStepStack.slice(0,-1)})))},pushSubStep:n=>{var a;const r=t().hardwareStepStack.length-1,o=null!==(a=t().hardwareStepSubStack[r])&&void 0!==a?a:[];e((0,c.default)((e=>{e.hardwareStepSubStack[r]=o.concat([n])})))},currentStep:()=>{var e;const n=t().hardwareStepStack,a=t().hardwareStepSubStack,r=n.length>0?n.length-1:n.length;return(null===(e=a[r])||void 0===e?void 0:e.length)?(0,o.getLast)(a[r]):(0,o.getLast)(n)},setSelectedChains:(t,n)=>{e({selectedChains:t,selectedChainsMap:n})},setDecrementChainImportStep:()=>{const n=t().chainImportStep;e({chainImportStep:n-1})},setIncrementChainImportStep:()=>{const n=t().chainImportStep;e({chainImportStep:n+1})},setDerivedAccountGroups:t=>{e({derivedAccountGroups:t})},setDiscoveredAccounts:(t,n)=>{e({discoveredAccounts:t,activeAccountsFound:n})},selectAccount:n=>{const a=t().selectedAccounts,r=Object.assign({},a);r[n]=!0,e({selectedAccounts:r})},deselectAccount:n=>{const a=t().selectedAccounts,r=Object.assign({},a);delete r[n],e({selectedAccounts:r})},setSelectedAccounts:t=>{e({selectedAccounts:t})}})))})),n.register("eNcWQ",(function(a,r){t(a.exports,"ConnectHardwareMultichainSelectAccounts",(function(){return g}));var o=n("43063"),c=n("29o0l"),i=n("gkfw3"),s=n("2CuFm"),l=n("hFkH3"),u=n("27SDj"),d=n("ghHB9"),p=n("2QUtj"),m=n("V2q0K");const h=(0,i.default)(u.Text)`
  margin-top: 15px;
`,g=({activeAccounts:t})=>{const n=(0,m.useHardwareOnboardingStore)((e=>e.selectedAccounts)),a=(0,m.useHardwareOnboardingStore)((e=>e.selectAccount)),r=(0,m.useHardwareOnboardingStore)((e=>e.deselectAccount)),i=(0,m.useHardwareOnboardingStore)((e=>e.pushSubStep)),{t:g}=(0,o.useTranslation)(),f=(0,c.useMemo)((()=>0===Object.values(n).filter((e=>!!e)).length),[n]),y=(0,c.useCallback)((()=>{i(e(c).createElement(p.ConnectHardwareMultichainImportConfirmation,{preventBack:!0}))}),[i]);return e(c).createElement(s.ConnectHardwareStepContainer,null,e(c).createElement("div",{style:{marginBottom:15}},e(c).createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:30}},e(c).createElement(u.Text,{weight:500,size:30,lineHeight:34,maxWidth:"320px"},g("connectHardwareSelectAccounts")),e(c).createElement(h,{wordBreak:"break-word",size:18,lineHeight:22,color:"#777777"},g("connectHardwareChooseAccountsToConnect"))),e(c).createElement("div",{style:{maxHeight:420,overflowY:"scroll"}},t.map((({accounts:t,discoveryIdentifier:o,accountIndex:i})=>{const s=!!n[o];return e(c).createElement(d.ImportAccountRow,{key:o,accountType:"ledger",accounts:t,accountIndex:i,checked:s,onPress:()=>{s?r(o):a(o)}})})))),e(c).createElement(l.Button,{onClick:y,theme:"primary",disabled:f},g("commandContinue")))}})),n.register("ghHB9",(function(a,r){t(a.exports,"ImportAccountRow",(function(){return m}));var o=n("43063"),c=n("29o0l"),i=n("Nt4tV"),s=n("gkfw3"),l=n("cGJ3C"),u=n("lLNMU"),d=n("27SDj");const p=({account:t})=>{const{t:n}=(0,o.useTranslation)();return e(c).createElement(v,null,e(c).createElement(g,null,e(c).createElement(l.ChainLogo,{chainId:t.chain.id,height:40,width:40,spacing:"large"})),e(c).createElement(f,null,e(c).createElement(C,null,e(c).createElement(w,null,t.chain.name),e(c).createElement(w,null,(0,i.formatHashMedium)(t.address,4))),e(c).createElement(y,null,"amount"in t&&"chain"in t?e(c).createElement(b,null,(0,i.formatTokenAmount)(t.amount)," ",t.chain.symbol):null,"amount"in t?e(c).createElement(b,null,t.lastActivityTimestamp?n("onboardingImportAccountsLastActive",{formattedTimestamp:(0,i.formatTimestampFromNow)(1e3*t.lastActivityTimestamp,!0)}):n("onboardingImportAccountsCreateNew")):null)))},m=e(c).memo((({accountType:t,accounts:n,checked:a,accountIndex:r,onPress:i})=>{const{t:s}=(0,o.useTranslation)(),l=r+1;return e(c).createElement(h,null,e(c).createElement(S,null,e(c).createElement(w,null,((e,t,n)=>{switch(t){case"seed":return e("onboardingImportAccountsAccountName",{walletIndex:n});case"ledger":return e("onboardingImportAccountsLedgerAccountName",{walletIndex:n})}})(s,t,l)),e(c).createElement(u.Checkbox,{checked:a,onChange:i})),n.map(((t,n)=>e(c).createElement(p,{key:`${t.address}-${n}`,account:t}))))})),h=s.default.div`
  margin-bottom: 24px;
  width: 100%;
`,g=s.default.div`
  flex-shrink: 0;
  margin-right: 10px;
`,f=s.default.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`,y=s.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  width: 100%;
`,C=(0,s.default)(y)`
  margin-bottom: 2px;
`,S=(0,s.default)(y)`
  background: #2a2a2a;
  margin-bottom: 1px;
  padding: 12px 16px 12px 14px;
  border-top-left-radius: 6px;
  border-top-right-radius: 6px;

  & > span {
    margin-right: 0;
  }
`,v=s.default.div`
  background: #2a2a2a;
  margin-top: 1px;
  padding: 17px 16px 17px 14px;
  width: 100%;
  display: flex;
  align-items: center;

  &:last-of-type {
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
  }
`,w=(0,s.default)(d.Text).attrs({size:16,lineHeight:19,weight:600})``,b=(0,s.default)(d.Text).attrs({size:14,lineHeight:17,weight:400,color:"#777777"})``})),n.register("ivB1q",(function(a,r){t(a.exports,"ConnectHardwareMultichainSelectChain",(function(){return E}));var o=n("iOvk1"),c=n("43063"),i=n("29o0l"),s=n("gkfw3"),l=n("2CuFm"),u=n("gX5Te"),d=n("cI6uH"),p=n("hFkH3"),m=n("cGJ3C"),h=n("lLNMU"),g=n("27SDj"),f=n("efSU2"),y=n("V2q0K");const C=s.default.div`
  align-items: center;
  background-color: #2a2a2a;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  margin-bottom: 12px;
  padding: 16px 24px 16px 12px;

  :last-child {
    margin-bottom: 28px;
  }

  > span {
    margin-right: 0px;
  }
`,S=s.default.div`
  margin-right: 12px;
`,v=s.default.div`
  margin-top: 30px;
`,w=s.default.div`
  display: flex;
  align-items: center;
`,b=({chainId:t,icon:n,onPressChain:a,isChecked:r})=>e(i).createElement(C,{onClick:()=>{a(t)}},e(i).createElement(w,null,e(i).createElement(S,null,n),e(i).createElement(g.Text,{size:16,weight:600},(0,o.getChainNameByID)(t))),e(i).createElement(h.Checkbox,{checked:r})),T={mainnetOnly:!0},E=()=>{const{pushSubStep:t,selectedChains:n,setSelectedChains:a,selectedChainsMap:r}=(0,y.useHardwareOnboardingStore)(),{data:s}=u.hooks.useEnabledChainIDs(T),{data:h}=u.hooks.useEnabledChainTypes(),{t:C}=(0,c.useTranslation)(),S=(0,i.useCallback)((e=>{const t=new Map(r),n=(0,o.getChainType)(e),c=r.get(n),i=null==c?void 0:c[e];t.set(n,Object.assign(Object.assign({},c),{[e]:!i}));const s=h.filter((e=>{const n=t.get(e)||{};return Object.values(n).reduce(((e,t)=>t?++e:e),0)>0}));a(s,t)}),[h,a,r]);(0,d.useEffectOnce)((()=>{const e=new Map;for(const t of h)e.set(t,{});for(const t of s){const n=(0,o.getChainType)(t),a=e.get(n);e.set(n,Object.assign(Object.assign({},a),{[t]:!1}))}a(n,e)}),h.length>0&&s.length>0);const w=(0,i.useMemo)((()=>s.map((t=>{const n=(0,o.getChainType)(t),a=r.get(n),c=(null==a?void 0:a[t])||!1;return e(i).createElement(b,{key:t,icon:e(i).createElement(m.ChainLogo,{chainId:t,width:40,height:40,stroke:""}),chainId:t,onPressChain:S,isChecked:c})}))),[s,r,S]),E=(0,i.useMemo)((()=>{let e=0;for(const t of r.values())e+=Object.values(t).reduce(((e,t)=>t?++e:e),0);return 0===e}),[r]);return e(i).createElement(l.ConnectHardwareStepContainer,null,e(i).createElement("div",null,e(i).createElement(g.Text,{weight:500,size:28,lineHeight:34},C("connectHardwareSelectChains")),e(i).createElement(v,null,w)),e(i).createElement(p.Button,{onClick:()=>{t(e(i).createElement(f.ConnectHardwareMultichainOpenApp,{preventBack:!0}))},theme:"primary",disabled:E},C("commandContinue")))}})),n.register("cI6uH",(function(e,a){t(e.exports,"useEffectOnce",(function(){return o}));var r=n("29o0l");const o=(e,t)=>{const n=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(!n.current&&t)return n.current=!0,e()}))}}))}();
//# sourceMappingURL=ConnectHardwareMultichainFlow.727b05bc.js.map
define=__define;})(window.define);