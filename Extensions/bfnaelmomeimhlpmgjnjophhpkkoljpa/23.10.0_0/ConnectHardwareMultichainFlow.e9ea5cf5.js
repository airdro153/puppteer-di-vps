(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}function n(e,t){return Object.keys(t).forEach((function(n){"default"===n||"__esModule"===n||e.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},i={},s=r.parcelRequire1d24;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},r.parcelRequire1d24=s),s.register("dNDmI",(function(e,t){s("eOkdY").register(JSON.parse('{"8OC5d":"ConnectHardwareMultichainFlow.e9ea5cf5.js","bnDSu":"Solana.39b78c22.js","7vHWN":"Solana.8ff8b01a.js","ia8XW":"Eth.2d040527.js","2tU2V":"Btc.15f3cf99.js","4nmlj":"semver.339a6680.js","8ZV50":"english.dc8cdfce.js","bSKtD":"crypto-browserify.e188246b.js","99t1D":"TransportWebHID.10460d8f.js","1JCWp":"notification.e371f99c.css"}'))})),s.register("eOkdY",(function(t,n){var r,o;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s.register("gX5Te",(function(t,n){e(t.exports,"hooks",(function(){return O}));var r=s("4xbAj"),o=s("iOvk1"),i=s("21aqi"),a=s("bBa7X"),u=s("5slFC");s("eJxop");var c=s("3r36j"),l=s("ibwoK");s("g9PKp");var d=s("89Vzt"),p=s("56oyT"),f=s("5uSEV");s("egHtJ");var g=s("j4jBF"),h=s("HlEsU");s("kram9");var y=s("2e392"),m=s("7gANb"),v=s("3FEtE"),S=s("16XMG"),w=s("9CoSy"),A=s("m2d5Y"),T=s("41yT6"),b=s("goVRJ"),E=s("JepPo"),k=s("twk6W"),x=s("93ApY"),P=s("gcdBN"),I=s("dbmto");const C=new(0,b.LegacyIndexedDBProxy),O=function(e){const{analytics:t,legacyStorage:n,storage:s,vaultProxy:T,queryClient:b,chainAvailability:E}=e,x=new(0,m.PriorityFeeService),C=(0,r.createAccountHooks)(T,s,n,b,E,(e=>e.invalidateQueries(["browser-ext/MultichainMockAccountsContext"])),t),O=(0,o.createChainHooks)(T,E,b,t,[r.invalidateAllAccounts,f.invalidateAddressBookEntries,l.invalidateActionBanners]),F=(0,A.createClusterHooks)(n),R=(0,p.createPriceHooks)({getApiEnvironment:S.getAPIEnvironment}),N=(0,f.createSettingsHooks)(T,s,n,b,E,t),D=(0,m.createTransactionHooks)(T,b,s,t,R),L=(0,i.createCollectibleHooks)(T,s,S.getAPIEnvironment,b,x,C,t,D),M=(0,g.createStakingHooks)(D,b,S.getAPIEnvironment,k.sequenceAnalytics.stake),B=(0,h.createStorageHooks)(n,s,b),U=(0,u.createFungibleHooks)({analytics:t,sdk:new(0,u.FungiblesSdk)({accountSigner:T,getApiEnvironment:S.getAPIEnvironment,storage:s,priorityFeeService:x}),storage:s,legacyStorage:n,getApiEnvironment:S.getAPIEnvironment,queryClient:b,transactionHooks:D,accountSigner:T,accountHooks:C,priorityFeeService:x}),_=(0,y.createSwapperHooks)(T,s,S.getAPIEnvironment,b,t,R,U,C,N,D),j=(0,a.createFiatRampHooks)(S.getAPIEnvironment),q=(0,I.getLedgerWebHIDDependencies)(),V=(0,c.createHardwareWireHooks)((0,I.getLedgerWebHIDDependencies)(),b),H=(0,d.createOnboardingHooks)(s,b,t,q),K=(0,l.createInterstitialHooks)(s,b,E,U,C,w.ENABLE_DEV_SETTINGS||(0,P.isDebugBuild)(),l.Platform.BrowserExt),Q=(0,v.createWalletScreenHooks)(S.getAPIEnvironment,t);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},C),O),F),L),U),H),R),N),M),B),_),D),V),j),K),Q)}({vaultProxy:(0,x.getVaultProxy)(),analytics:k.analytics,queryClient:T.queryClient,legacyStorage:new(0,E.LocalStorage),storage:C,chainAvailability:(0,o.createChainAvailability)({storage:C,isInternalBuild:w.ENABLE_DEV_SETTINGS})})})),s.register("eJxop",(function(t,n){e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return s("bwiqA").DEFAULT_LEDGER_TRANSPORT_STATE})),e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return s("bwiqA").LEDGER_NOT_CONNECTED_STATE})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return s("bwiqA").LEDGER_RECONNECTING_STATE})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return s("bwiqA").LEDGER_WAITING_FOR_APPROVAL_STATE})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return s("dZ3qP").DEFAULT_LEDGER_TRANSPORT_STATE})),e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return s("dZ3qP").LEDGER_NOT_CONNECTED_STATE})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return s("dZ3qP").LEDGER_RECONNECTING_STATE})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return s("dZ3qP").LEDGER_WAITING_FOR_APPROVAL_STATE})),e(t.exports,"LedgerLockedError",(function(){return s("dZ3qP").LedgerLockedError})),e(t.exports,"refetchLedgerAddresses",(function(){return s("dZ3qP").refetchLedgerAddresses})),e(t.exports,"resetLedgerAddresses",(function(){return s("dZ3qP").resetLedgerAddresses})),e(t.exports,"setLedgerTransportStateOverride",(function(){return s("dZ3qP").setLedgerTransportStateOverride})),e(t.exports,"LedgerLockedError",(function(){return s("a5LJM").LedgerLockedError})),e(t.exports,"createHardwareWireHooks",(function(){return s("3r36j").createHardwareWireHooks})),e(t.exports,"getLedgerTransportState",(function(){return s("5i9Ta").getLedgerTransportState})),e(t.exports,"deriveLedgerAddresses",(function(){return s("54Y8k").deriveLedgerAddresses})),e(t.exports,"createLedgerWireSigner",(function(){return s("cWagW").createLedgerWireSigner}));s("3r36j");s("bwiqA"),s("e59pI"),s("d1qVj"),s("a5LJM");s("5i9Ta"),s("54Y8k"),s("51YJE"),s("dfz3b"),s("cWagW")})),s.register("3r36j",(function(t,n){e(t.exports,"createHardwareWireHooks",(function(){return u}));s("jgqfR");var r=s("4GWtC"),o=s("4Oih6"),i=(s("led49"),s("6epSx")),a=s("1yw5t");s("6ZHK3");function u(e,t){const{defaultTransportTimeout:n}=e;return{useIsLedgerSupported:()=>(0,r.default)(e),useLedgerWireTransportState:(n,r,o)=>(0,i.useLedgerWireTransportState)(e,t,n,r,o),useRequestLedgerPermission:(n,r)=>(0,a.default)(e,t,n,r),useLedgerAddresses:(e,r,i,s)=>(0,o.default)(n,t,e,r,i,s)}}})),s.register("jgqfR",(function(t,n){e(t.exports,"useConnectedLedgerDeviceMetadata",(function(){return a}));var r=s("5ekp2"),o=s("9O68d"),i=s("dUHlc");const a=(e,t)=>{const n=!!t,s=i.hardwareQueryKeys.accountConnectedDevice(t);return(0,r.useQuery)({enabled:n,queryKey:s,queryFn:()=>(0,o.getConnectedLedgerDeviceMetadata)(e,null!=t?t:"")})}})),s.register("9O68d",(function(t,n){e(t.exports,"getConnectedLedgerDeviceMetadata",(function(){return u}),(function(e){return u=e}));var r=s("4xbAj"),o=s("csW2r"),i=s("a5LJM"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t)=>a(void 0,void 0,void 0,(function*(){var n;o.telemetry.addBreadcrumb(o.FeatureTag.Ledger,`Getting Connected Ledger Device metadata for account: ${t}`,o.Severity.Info);const s=yield(0,r.getMultiChainAccountMetadata)(e,t),a=null===(n=null==s?void 0:s.connectedDevices)||void 0===n?void 0:n.find((e=>e.deviceType===r.DeviceType.Ledger&&e.connectionType===r.ConnectionType.BLE));if(!a)throw new(0,i.AccountMetadataNoConnectedDevicesError);return a}))})),s.register("a5LJM",(function(t,n){e(t.exports,"LedgerNotConnectedError",(function(){return o})),e(t.exports,"LedgerMultipleChainTypesRequestedError",(function(){return i})),e(t.exports,"LedgerLockedError",(function(){return s})),e(t.exports,"LedgerDuplicateAddressReceivedError",(function(){return a})),e(t.exports,"AccountMetadataNoConnectedDevicesError",(function(){return u}));class r extends Error{constructor(e){super(e)}}class o extends r{constructor(e="Ledger not connected."){super(e)}}class i extends r{constructor(e="Multiple chain types requested from Ledger. Only request one at a time."){super(e)}}class s extends r{constructor(e="Ledger is locked, unlock to get addresses or sign."){super(e)}}class a extends r{constructor(e="Duplicate ledger address received"){super(e)}}class u extends r{constructor(e="No connected devices."){super(e)}}})),s.register("dUHlc",(function(t,n){e(t.exports,"HARDWARE_BASE_QUERY_KEY",(function(){return r})),e(t.exports,"hardwareQueryKeys",(function(){return o}));const r="@phantom-labs/hardware",o={isLedgerSupported:()=>[`${r}:is-ledger-supported`],ledgerTransportState:()=>[`${r}:ledger-transport-state`],ledgerAddress:(e,t)=>[`${r}:ledger-address`,{chainType:e,derivationPath:t}],ledgerAddresses:(e=[],t)=>[`${r}:ledger-addresses`,{derivationPathParams:e,enableLedgerXPubDerivation:t}],requestLedgerPermission:()=>[`${r}:request-ledger-permission`],accountConnectedDevice:e=>[`${r}:account-connected-device`,{accountIdentifier:e}]}})),s.register("4GWtC",(function(t,n){e(t.exports,"default",(function(){return a}),(function(e){return a=e}));var r=s("5ekp2"),o=s("dUHlc"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},a=e=>{const t=o.hardwareQueryKeys.isLedgerSupported();return(0,r.useQuery)({queryKey:t,queryFn:()=>i(void 0,void 0,void 0,(function*(){return e.isSupported()}))})}})),s.register("4Oih6",(function(t,n){e(t.exports,"default",(function(){return c}),(function(e){return c=e}));var r=s("5ekp2"),o=s("a5LJM"),i=s("54Y8k"),a=s("dUHlc"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},c=(e,t,n,s=[],c=!1,l=!1,d=(()=>{}))=>{var p;const f=n.isConnected&&s.length>0&&s[0].chainType===(null===(p=n.selectedApp)||void 0===p?void 0:p.chainType),g=a.hardwareQueryKeys.ledgerAddresses(s,l);return(0,r.useQuery)({enabled:f,queryKey:g,queryFn:()=>u(void 0,void 0,void 0,(function*(){const n=yield t.getQueryData(a.hardwareQueryKeys.ledgerTransportState());if(!n)throw new(0,o.LedgerNotConnectedError);return(0,i.deriveLedgerAddresses)({transportTimeout:e,state:n,derivationPathParams:s,enableDebugLogs:c,enableLedgerXPubDerivation:l,onSuccess:d})})),retry:!1})}})),s.register("54Y8k",(function(t,n){e(t.exports,"deriveLedgerAddresses",(function(){return h}),(function(e){return h=e}));var r=s("jZpRu"),o=s("iOvk1"),i=s("csW2r"),a=s("RVqnc"),u=s("a5LJM"),c=s("aLMPl"),l=s("bOnUg"),d=s("5E8aH"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const f=(e,t,n,r)=>{const o=new Set;return(i,s)=>p(void 0,void 0,void 0,(function*(){if(!t.isConnected)throw new(0,u.LedgerNotConnectedError);const l=e;try{const e=yield(0,a.withRetry)((()=>p(void 0,void 0,void 0,(function*(){const e=yield(0,a.withTimeout)((0,c.getLedgerAddress)(t.transport,i.chainType,s,r),3e3);if(o.has(e.address))throw new(0,u.LedgerDuplicateAddressReceivedError);return e}))),(e=>{const t=e instanceof u.LedgerDuplicateAddressReceivedError;t&&(0,d.debugLog)(n,`âŒ Duplicate address detected, retrying in ${l}ms...`);const r="InvalidChannel"===e.id;return r&&(0,d.debugLog)(n,`Invalid channel, trying again in ${l}ms...`),t||r}),3,l);return(0,d.debugLog)(n,`âœ… Received address for ${s}: ${e.address}`),o.add(e.address),e}catch(e){throw yield(0,a.delayAsync)(1e3),e}}))},g=(e,t)=>{switch(e){case"grandparent":switch(t){case r.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'";case r.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'";case r.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'"}break;case"parent":switch(t){case r.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'/0";case r.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'/0";case r.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'/0"}}},h=({transportTimeout:e,state:t,derivationPathParams:n,enableDebugLogs:s,enableLedgerXPubDerivation:a,onSuccess:c})=>p(void 0,void 0,void 0,(function*(){const h=Date.now();(e=>{let t,n=!0;for(const r of e)if(t?n=n&&t===r.chainType:t=r.chainType,!n)throw new(0,u.LedgerMultipleChainTypesRequestedError)})(n);const y=a?((e,t,n)=>{const s=f(e,t,n,!0),a={};return(e,t)=>p(void 0,void 0,void 0,(function*(){switch(e.chainType){case o.ChainType.Bitcoin:case o.ChainType.Solana:return s(e,t);case o.ChainType.EVM:switch(e.pathType){case r.DerivationPathType.Bip44RootEthereum:return yield s(e,t);case r.DerivationPathType.Bip44Ethereum:case r.DerivationPathType.Bip44EthereumSecondary:case r.DerivationPathType.Bip44EthereumTertiary:{let r=a[e.pathType];if(!r)try{const t=g("grandparent",e.pathType),n=yield s(e,t);if(n.chainType!==e.chainType||"chain-code"!==n.type)throw new Error(`invalid response from Ledger requesting grandparent path: ${t}`);const o=g("parent",e.pathType),i=yield s(e,o);if(i.chainType!==e.chainType||"chain-code"!==i.type)throw new Error(`invalid response from Ledger requesting parent path: ${t}`);r=(0,l.createEthereumChildAddressDeriver)(n,i),a[e.pathType]=r}catch(n){return i.telemetry.captureError(new Error(`error creating xpub from derivation path: ${t}. Reason: ${n.message}`),i.FeatureTag.Ledger),s(e,t)}const o=r(e.index);return(0,d.debugLog)(n,`â­ï¸ Derived address with xpub for ${t}: ${o}`),{type:"address",chainType:e.chainType,address:o}}}}}))})(e,t,s):f(e,t,s,!1),m={};for(const e of n){const t=(0,r.getDerivationPath)(e),{address:n}=yield y(e,t);m[t]=n}const v=(Date.now()-h)/1e3;return(0,d.debugLog)(s,`âœ… Finished requesting addresses for ${n.length} derivation paths. Time: ${v} s`),c(v),m}))})),s.register("aLMPl",(function(n,r){e(n.exports,"getLedgerAddress",(function(){return l}),(function(e){return l=e}));var o=s("iOvk1"),i=s("85iHy"),a=s("a5LJM"),u=s("2B5FA"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const l=(e,n,r,s)=>c(void 0,void 0,void 0,(function*(){const c=r.replace("m/","");try{switch(n){case o.ChainType.Bitcoin:{const t=yield(0,u.getBitcoinLedgerApp)(e),n=yield t.getWalletPublicKey(c,{format:"bech32"});return{type:"address",chainType:o.ChainType.Bitcoin,address:n.bitcoinAddress}}case o.ChainType.Solana:{const n=yield(0,u.getSolanaLedgerApp)(e),{address:r}=yield n.getAddress(c);return{type:"address",chainType:o.ChainType.Solana,address:t(i).encode(r)}}case o.ChainType.EVM:{const t=yield(0,u.getEthereumLedgerApp)(e),{publicKey:n,address:r,chainCode:i}=yield t.getAddress(c,!1,s);if(s){if(!i)throw new Error("Chain code is requested from Ledger device, but no chain code was received.");return{type:"chain-code",chainType:o.ChainType.EVM,address:r,publicKey:n,chainCode:i}}return{type:"address",chainType:o.ChainType.EVM,address:r}}}}catch(e){throw"TransportLocked"===e.id?new(0,a.LedgerLockedError):e}}))})),s.register("2B5FA",(function(t,n){e(t.exports,"getSolanaLedgerApp",(function(){return o}),(function(e){return o=e})),e(t.exports,"getEthereumLedgerApp",(function(){return i}),(function(e){return i=e})),e(t.exports,"getEthereumLedgerService",(function(){return a}),(function(e){return a=e})),e(t.exports,"getBitcoinLedgerApp",(function(){return u}),(function(e){return u=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function o(e){return r(this,void 0,void 0,(function*(){const{default:t}=yield s("9rRzu");return new t(e)}))}function i(e){return r(this,void 0,void 0,(function*(){const{default:t}=yield s("5Qf7m");return new t(e)}))}function a(){return r(this,void 0,void 0,(function*(){const{ledgerService:e}=yield s("5Qf7m");return e}))}function u(e){return r(this,void 0,void 0,(function*(){const{default:t}=yield s("fC8Rt");return new t({transport:e})}))}})),s.register("9rRzu",(function(e,t){e.exports=Promise.all([s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("7vHWN")),s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("bnDSu"))]).then((()=>s("903Vo")))})),s.register("j1yuj",(function(e,t){"use strict";var n=s("hE0rk");e.exports=n((function(e){return new Promise((function(t,n){var r=document.getElementsByTagName("script");if([].concat(r).some((function(t){return t.src===e})))t();else{var o=document.createElement("link");o.href=e,o.rel="preload",o.as="script",document.head.appendChild(o);var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=e,i.onerror=function(t){var r=new TypeError("Failed to fetch dynamically imported module: ".concat(e,". Error: ").concat(t.message));i.onerror=i.onload=null,i.remove(),n(r)},i.onload=function(){i.onerror=i.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(i)}}))}))})),s.register("hE0rk",(function(e,t){"use strict";var n={},r={},o={};e.exports=function(e,t){return function(i){var s=function(e){switch(e){case"preload":return r;case"prefetch":return o;default:return n}}(t);return s[i]?s[i]:s[i]=e.apply(null,arguments).catch((function(e){throw delete s[i],e}))}}})),s.register("2FqAO",(function(t,n){var r;e(t.exports,"getBundleURL",(function(){return r}),(function(e){return r=e}));var o={};function i(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),o[e]=t),t}})),s.register("5Qf7m",(function(e,t){e.exports=Promise.all([s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("7vHWN")),s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("ia8XW"))]).then((()=>s("lwgEg")))})),s.register("fC8Rt",(function(e,t){e.exports=Promise.all([s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("4nmlj")),s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("2tU2V"))]).then((()=>s("knRLL")))})),s.register("bOnUg",(function(n,r){e(n.exports,"createEthereumChildAddressDeriver",(function(){return p}));var o=s("8qXbd"),i=s("7cTdJ"),a=s("bU4Vn"),u=s("cFUcx"),c=s("85iHy"),l=s("8tcqI");const d=(e,n,r)=>(e=>{const n=(0,i.sha256)((0,i.sha256)(e)).replace("0x","").slice(0,8);return t(c).encode(l.Buffer.concat([l.Buffer.from(e),l.Buffer.from(n,"hex")]))})(l.Buffer.from(`0488b21e04${e.replace("0x","")}00000000${n}${r.replace("0x","").toLowerCase()}`,"hex")),p=(e,t)=>{const n=(r=e.publicKey,(0,i.ripemd160)((0,i.sha256)((0,a.computePublicKey)(`0x${r}`,!0))).replace("0x","").slice(0,8));var r;const s=(0,a.computePublicKey)(`0x${t.publicKey}`,!0),c=d(n,t.chainCode,s),l=o.HDNode.fromExtendedKey(c);return e=>{const t=l.derivePath(`${e}`).address;if(u.EthAddress.safeParse(t).success)return t;throw new Error(`Invalid Ethereum Child Address derived: ${t}`)}}})),s.register("5E8aH",(function(t,n){e(t.exports,"debugLog",(function(){return r}));const r=(e,t)=>{if(e){const e=new Date;console.log(`[${e.toISOString()}] ${t}`)}}})),s.register("led49",(function(t,n){e(t.exports,"useLedgerBLETransportState",(function(){return g}),(function(e){return g=e}));var r=s("RVqnc"),o=s("5ekp2"),i=s("bwiqA"),a=s("5E8aH"),u=s("5EX67"),c=s("dZ3qP"),l=s("20mzf"),d=s("dUHlc"),p=s("4GWtC"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const g=(e,t,n)=>{const{deviceID:s,enabled:g=!0,enableDebugLogs:h=!1,refetchInterval:y=1e3,pairingTimeout:m=e.defaultTransportTimeout,expectedLedgerApp:v}=n,{data:S=!1}=(0,p.default)(e),w=!!s&&g&&S,A=d.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:w,queryKey:A,queryFn:()=>f(void 0,void 0,void 0,(function*(){if(!w)return i.LEDGER_NOT_CONNECTED_STATE;let n,o=t.getQueryData(A),d=!1,p=0;do{try{n=(yield Promise.all([(0,r.withTimeout)((0,l.fetchLedgerBLETransportState)(e,h,s,v),m),(0,r.delayAsync)(200)]))[0]}catch(e){n=i.LEDGER_NOT_CONNECTED_STATE}d=!!(null==o?void 0:o.isConnected)&&"not-connected"===n.status&&++p<5,d&&((0,c.setLedgerTransportStateOverride)(t,i.LEDGER_RECONNECTING_STATE),(0,a.debugLog)(h,"Attempting to reconnect..."),1===p&&(0,u.debugLogStateChange)(h,o,i.LEDGER_RECONNECTING_STATE),yield(0,r.delayAsync)(1e3))}while(d);return(0,u.debugLogStateChange)(h,o,n),p>0&&(o=i.LEDGER_RECONNECTING_STATE),(0,u.debugLogStateChange)(h,o,n),(null==o?void 0:o.isConnected)&&!n.isConnected&&(0,c.resetLedgerAddresses)(t).then((()=>(0,c.refetchLedgerAddresses)(t))),n})),refetchOnMount:!0,refetchInterval:y,initialData:i.LEDGER_NOT_CONNECTED_STATE})}})),s.register("bwiqA",(function(t,n){e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return r})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return o})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return i})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return s}));const r={status:"not-connected",isConnected:!1},o={status:"reconnecting",isConnected:!1},i={status:"waiting-for-approval",isConnected:!1},s=r})),s.register("5EX67",(function(t,n){e(t.exports,"debugLogStateChange",(function(){return i}));var r=s("iOvk1"),o=s("5E8aH");const i=(e=!1,t,n)=>{if((null==t?void 0:t.status)===n.status)return;let i,s="";switch(n.status){case"connected":i="ðŸŸ¢ Connected",s=`, selected app: ${n.selectedApp?(0,r.getChainTypeGenericName)(n.selectedApp.chainType):"None"}`;break;case"needs-permission":i="ðŸŸ  Needs Permission";break;case"reconnecting":i="ðŸŸ  Reconnecting";break;case"waiting-for-approval":i="ðŸŸ  Waiting For Approval";break;case"not-connected":i="âšªï¸ Not Connected"}(0,o.debugLog)(e,`${i}${s}`)}})),s.register("dZ3qP",(function(t,n){e(t.exports,"resetLedgerAddresses",(function(){return i}),(function(e){return i=e})),e(t.exports,"refetchLedgerAddresses",(function(){return a}),(function(e){return a=e})),e(t.exports,"invalidateLedgerTransportState",(function(){return u}),(function(e){return u=e})),e(t.exports,"setLedgerTransportStateOverride",(function(){return c}),(function(e){return c=e}));var r=s("dUHlc"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const i=e=>o(void 0,void 0,void 0,(function*(){yield e.resetQueries([`${r.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),a=e=>o(void 0,void 0,void 0,(function*(){yield e.refetchQueries([`${r.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),u=e=>o(void 0,void 0,void 0,(function*(){yield e.invalidateQueries(r.hardwareQueryKeys.ledgerTransportState())})),c=(e,t)=>e.setQueryData(r.hardwareQueryKeys.ledgerTransportState(),t)})),s.register("20mzf",(function(t,n){e(t.exports,"fetchLedgerBLETransportState",(function(){return u}),(function(e){return u=e}));var r=s("bwiqA"),o=s("51YJE"),i=s("5E8aH"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n,s)=>a(void 0,void 0,void 0,(function*(){if(!n)return(0,i.debugLog)(t,"Attempting to connect to Ledger BLE device, no device ID specified."),r.LEDGER_NOT_CONNECTED_STATE;const a=yield e.open(n);if(!a)return(0,i.debugLog)(t,`Unable to connect to transport with deviceID: ${n}`),r.LEDGER_NOT_CONNECTED_STATE;return{status:"connected",isConnected:!0,transport:a,selectedApp:yield(0,o.getSelectedLedgerApp)(a,e.defaultTransportTimeout,s)}}))})),s.register("51YJE",(function(t,n){e(t.exports,"getSelectedLedgerApp",(function(){return c}),(function(e){return c=e}));var r=s("iOvk1"),o=s("RVqnc"),i=s("bP9qo"),a=s("2B5FA"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=(e,t=500,n)=>u(void 0,void 0,void 0,(function*(){const s=()=>u(void 0,void 0,void 0,(function*(){const t=n?[n]:r.ChainAvailability.supportedChainTypes();return((e,t)=>u(void 0,void 0,void 0,(function*(){for(const n of t)switch(n){case r.ChainType.Solana:try{const t=yield(0,a.getSolanaLedgerApp)(e),r=yield t.getAppConfiguration();return{chainType:n,version:r.version,blindSigningEnabled:r.blindSigningEnabled}}catch(e){}break;case r.ChainType.EVM:try{const t=yield(0,a.getEthereumLedgerApp)(e),r=yield t.getAppConfiguration();return{chainType:n,version:r.version,blindSigningEnabled:1===r.arbitraryDataEnabled}}catch(e){}break;case r.ChainType.Bitcoin:try{return{chainType:n,version:(yield(0,i.getBitcoinAppConfiguration)(e)).version,blindSigningEnabled:!1}}catch(e){}}return null})))(e,t)}));try{return yield(0,o.withTimeout)(s(),t)}catch(e){return null}}))})),s.register("bP9qo",(function(t,n){e(t.exports,"getBitcoinAppConfiguration",(function(){return o}),(function(e){return o=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const o=e=>r(void 0,void 0,void 0,(function*(){const t=yield e.send(176,1,0,0);let n=0;if(1!==t[n++])throw new Error("getBitcoinAppConfiguration: format not supported");const r=t[n++],o=t.subarray(n,n+=r).toString("ascii");if("Bitcoin"!==o)throw new Error("Ledger Bitcoin app not selected.");const i=t[n++];return{name:o,version:t.subarray(n,n+=i).toString("ascii")}}))})),s.register("6epSx",(function(t,n){e(t.exports,"useLedgerWireTransportState",(function(){return h}),(function(e){return h=e}));var r=s("RVqnc"),o=s("5ekp2"),i=s("29o0l"),a=s("bwiqA"),u=s("5E8aH"),c=s("5EX67"),l=s("dZ3qP"),d=s("4NgK7"),p=s("dUHlc"),f=s("4GWtC"),g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const h=(e,t,n=!0,s=!1,h=2e3)=>{(0,i.useEffect)((()=>{e.on("disconnect",(()=>{(0,u.debugLog)(s,"disconnect event received from Ledger transport."),(0,l.invalidateLedgerTransportState)(t)}))}),[e,t]);const{data:y=!1}=(0,f.default)(e),m=n&&y,v=p.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:m,queryKey:v,queryFn:()=>g(void 0,void 0,void 0,(function*(){if(!m)return a.LEDGER_NOT_CONNECTED_STATE;let n,o=t.getQueryData(v),i=!1,p=0;do{try{n=(yield Promise.all([(0,r.withTimeout)((0,d.fetchLedgerWireTransportState)(e,s,p>0?a.LEDGER_RECONNECTING_STATE:o),e.defaultTransportTimeout),(0,r.delayAsync)(200)]))[0]}catch(e){n=a.LEDGER_NOT_CONNECTED_STATE}i=!!(null==o?void 0:o.isConnected)&&"not-connected"===n.status&&++p<5,i&&((0,l.setLedgerTransportStateOverride)(t,a.LEDGER_RECONNECTING_STATE),(0,u.debugLog)(s,"Attempting to reconnect..."),1===p&&(0,c.debugLogStateChange)(s,o,a.LEDGER_RECONNECTING_STATE),yield(0,r.delayAsync)(500))}while(i);return p>0&&(o=a.LEDGER_RECONNECTING_STATE),(0,c.debugLogStateChange)(s,o,n),(null==o?void 0:o.isConnected)&&!n.isConnected&&(0,l.resetLedgerAddresses)(t).then((()=>(0,l.refetchLedgerAddresses)(t))),n})),refetchOnMount:!0,refetchInterval:h,initialData:a.LEDGER_NOT_CONNECTED_STATE})}})),s.register("4NgK7",(function(t,n){e(t.exports,"fetchLedgerWireTransportState",(function(){return u}),(function(e){return u=e}));var r=s("bwiqA"),o=s("51YJE"),i=s("5E8aH"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t,n)=>a(void 0,void 0,void 0,(function*(){let s;if(0===(yield e.getNumDevices()))return n!==r.LEDGER_NOT_CONNECTED_STATE&&(0,i.debugLog)(t,"Unable to detect Ledger devices."),r.LEDGER_NOT_CONNECTED_STATE;if(null==n?void 0:n.isConnected)return n;if(s||(s=yield e.getFirstOpenedTransport(),s&&(0,i.debugLog)(t,"Found previously-opened transport.")),s||(s=yield e.openConnected(),s&&(0,i.debugLog)(t,"Opened a new connection to a previously-opened transport.")),!s)return(0,i.debugLog)(t,"Need permission to use the connected Ledger device."),{status:"needs-permission",isConnected:!1};return{status:"connected",isConnected:!0,transport:s,selectedApp:yield(0,o.getSelectedLedgerApp)(s,e.defaultTransportTimeout)}}))})),s.register("1yw5t",(function(t,n){e(t.exports,"default",(function(){return p}),(function(e){return p=e}));var r=s("5ekp2"),o=s("51YJE"),i=s("5E8aH"),a=s("5EX67"),u=s("dZ3qP"),c=s("dUHlc"),l=s("4NgK7"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},p=(e,t,n=!0,s=!1)=>{const p=c.hardwareQueryKeys.requestLedgerPermission();return(0,r.useQuery)({enabled:n,queryKey:p,queryFn:()=>d(void 0,void 0,void 0,(function*(){var n,r,d,p,f,g,h;let y;try{(0,i.debugLog)(s,"Requesting permission to connect to Ledger..."),y=yield e.request()}catch(o){if((0,i.debugLog)(s,`Received error trying to request permission: ${o}`),"string"==typeof o.message&&(null===(n=o.message)||void 0===n?void 0:n.includes("device is already open"))){(0,i.debugLog)(s,"âœ… Permission granted, device already open. Connecting to device...");const n=c.hardwareQueryKeys.ledgerTransportState(),o=yield t.getQueryData(n);let g;try{g=yield(0,l.fetchLedgerWireTransportState)(e,s,o)}catch(e){}return(null==g?void 0:g.isConnected)?((0,i.debugLog)(s,`âœ… Permission granted. Connected to Ledger device: ${null!==(d=null===(r=g.transport.deviceModel)||void 0===r?void 0:r.productName)&&void 0!==d?d:"Unknown device"}. Selected app: ${null!==(f=null===(p=null==g?void 0:g.selectedApp)||void 0===p?void 0:p.chainType)&&void 0!==f?f:"none"}`),yield(0,u.setLedgerTransportStateOverride)(t,g),(0,a.debugLogStateChange)(s,void 0,g),{type:"granted",transport:g.transport}):((0,i.debugLog)(s,"âŒ Unable to connect. Try again and make sure device is unlocked."),{type:"unable-to-connect"})}return(0,i.debugLog)(s,"âŒ Permission denied."),{type:"denied"}}if(!y){const e="Unable to connect to Ledger device. Permission granted, but no Transport received.";return(0,i.debugLog)(s,`âŒ ${e}`),{type:"unable-to-connect"}}const m={status:"connected",isConnected:!0,transport:y,selectedApp:yield(0,o.getSelectedLedgerApp)(y,e.defaultTransportTimeout)};return yield(0,u.setLedgerTransportStateOverride)(t,m),(0,a.debugLogStateChange)(s,void 0,m),(0,i.debugLog)(s,`âœ… Permission granted. Connected to Ledger device: ${null!==(h=null===(g=y.deviceModel)||void 0===g?void 0:g.productName)&&void 0!==h?h:"Unknown device"}`),{type:"granted",transport:y}})),cacheTime:0,staleTime:0,refetchOnMount:!0})}})),s.register("6ZHK3",(function(t,n){e(t.exports,"useNearbyLedgerBLEDevices",(function(){return o}));var r=s("29o0l");(e=>{const t=[];for(let o=1;o<=e;++o){const e=(n=0,r=3,n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n)+n));let i;i=0===e?0:1===e?-70:-100,t.push({name:`Nano X ${o}`,id:`${o}`,rssi:i})}var n,r;t.sort(((e,t)=>t.rssi-e.rssi))})(100);const o=(e,t)=>{const n=(0,r.useRef)([]),o=(0,r.useRef)(),[i,s]=(0,r.useState)([]);return(0,r.useEffect)((()=>{var r;if(!t)return void(null===(r=o.current)||void 0===r||r.unsubscribe());let i=n.current;const a=e.scan({onDeviceAdded:e=>{i=i.filter((t=>t.id!==e.id)),i.push(e),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];n.current.length!==t.length&&(n.current=t,s(n.current))},onDeviceRemoved:e=>{i=i.filter((t=>t.id!==e.id)),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];n.current.length!==t.length&&(n.current=t,s(n.current))},onError:e=>{var t;console.error(e),null===(t=o.current)||void 0===t||t.unsubscribe()}});return o.current=a,()=>{var e;null===(e=o.current)||void 0===e||e.unsubscribe()}}),[e,t]),i}})),s.register("e59pI",(function(e,t){var n=s("cFUcx"),r=s("7XqVB");const o=r.z.string().regex(/^[0-9A-Fa-f]*$/,{message:"String must have only valid hex characters"});r.z.object({address:n.EthAddress,publicKey:o,chainCode:o}),r.z.object({name:r.z.string(),id:r.z.string().min(1),rssi:r.z.number().int()}),r.z.union([r.z.literal("low"),r.z.literal("medium"),r.z.literal("high")])})),s.register("d1qVj",(function(e,t){var r=s("dZ3qP");n(e.exports,r)})),s.register("5i9Ta",(function(t,n){e(t.exports,"getLedgerTransportState",(function(){return a}),(function(e){return a=e}));var r=s("bwiqA"),o=s("dUHlc"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=e=>i(void 0,void 0,void 0,(function*(){const t=yield e.getQueryData(o.hardwareQueryKeys.ledgerTransportState());return null!=t?t:r.LEDGER_NOT_CONNECTED_STATE}))})),s.register("dfz3b",(function(e,t){})),s.register("cWagW",(function(n,r){e(n.exports,"createLedgerWireSigner",(function(){return b}),(function(e){return b=e}));var o=s("kIJ9R"),i=s("4v43U"),a=s("4xbAj"),u=s("iOvk1"),c=s("hMVEP"),l=s("csW2r"),d=s("RVqnc"),p=s("85iHy"),f=s("8tcqI"),g=s("bwiqA"),h=s("4NgK7"),y=(s("9O68d"),s("1yP1g")),m=s("2B5FA"),v=s("51YJE"),S=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const w=(e,n,r)=>S(void 0,void 0,void 0,(function*(){if(r.chainType!==u.ChainType.Solana)return(0,a.createVaultSignerError)(a.VaultSignerErrorType.InvalidChainType);let o;try{o="string"==typeof r.message?"transaction"===r.signingType?t(p).decode(r.message):f.Buffer.from(r.message,"utf8"):r.message}catch(e){return(0,a.createVaultSignerError)(a.VaultSignerErrorType.InvalidMessageEncoding)}const i=yield(0,m.getSolanaLedgerApp)(e),l=n.replace("m/","");let d;switch(r.signingType){case"transaction":try{const e=yield i.signTransaction(l,f.Buffer.from(o));d=t(p).encode(e.signature)}catch(n){const r=yield((e,t)=>S(void 0,void 0,void 0,(function*(){try{const n=yield(0,v.getSelectedLedgerApp)(e);if(!n||n.chainType!==u.ChainType.Solana)return null;const r=(0,c.messageStringToTransaction)(t),{gte:o}=yield s("2V55Q");return{isVersionedTx:"version"in r&&"legacy"!==r.version,isVersionedTxSupported:o(n.version,"1.3.1")}}catch(e){return null}})))(e,t(p).encode(o));if(!r)throw n;const{isVersionedTx:i,isVersionedTxSupported:l}=r;if(i&&!l)return(0,a.createVaultSignerError)(a.VaultSignerErrorType.UnsupportedOperation,"Versioned Transactions is not supported on this version of Ledger. Please upgrade your Solana Ledger firmware to version 1.3.1.");throw n}break;case"message":return(0,a.createVaultSignerError)(a.VaultSignerErrorType.UnsupportedOperation,"Signing off chain messages with Ledger is not yet supported.")}return{status:"success",signature:d}})),A=e=>e.startsWith("0x")?e:`0x${e}`,T=(e,t,n)=>S(void 0,void 0,void 0,(function*(){try{switch(n.chainType){case u.ChainType.Bitcoin:throw"not implenented for Bitcoin yet";case u.ChainType.EVM:return yield((e,t,n)=>S(void 0,void 0,void 0,(function*(){if(n.chainType!==u.ChainType.EVM)return(0,a.createVaultSignerError)(a.VaultSignerErrorType.InvalidChainType);const r=yield(0,m.getEthereumLedgerApp)(e),s=t.replace("m/","");switch(n.signingType){case"typedData":switch(n.version){case 1:return(0,a.createVaultSignerError)(a.VaultSignerErrorType.UnsupportedOperation);case 3:case 4:{const e=()=>S(void 0,void 0,void 0,(function*(){const e=(0,y.convertSignTypedDataToEip712Message)(n.data);return r.signEIP712Message(s,e)})),t=()=>S(void 0,void 0,void 0,(function*(){const e=3===n.version?i.SignTypedDataVersion.V3:i.SignTypedDataVersion.V4,t=n.data,o=i.TypedDataUtils.sanitizeData(t),a=i.TypedDataUtils.hashStruct("EIP712Domain",o.domain,o.types,e).toString("hex"),u=i.TypedDataUtils.hashStruct(o.primaryType,o.message,o.types,e).toString("hex");return yield r.signEIP712HashedMessage(s,a,u)})),{r:a,s:u,v:c}=yield e().catch(t);return{status:"success",signature:(0,o.joinSignature)({r:A(a),s:A(u),v:c})}}}break;case"message":{const e=f.Buffer.from(n.message,"utf8"),{r:t,s:i,v:a}=yield r.signPersonalMessage(s,e.toString("hex"));return{status:"success",signature:(0,o.joinSignature)({r:A(t),s:A(i),v:a})}}case"transaction":{const e=n.message.replace("0x",""),t=yield(0,m.getEthereumLedgerService)(),i=yield t.resolveTransaction(e,{},{}),{r:a,s:u,v:c}=yield r.signTransaction(s,e,i);return{status:"success",signature:(0,o.joinSignature)({r:A(a),s:A(u),v:Number.parseInt(c.replace("0x",""),16)})}}}})))(e,t,n);case u.ChainType.Solana:return yield w(e,t,n)}}catch(e){return l.telemetry.captureError(e,l.FeatureTag.Ledger),(0,a.createVaultSignerError)(a.VaultSignerErrorType.InternalError)}})),b=e=>({type:a.VaultSignerPluginType.Ledger,sign:(t,n,r)=>S(void 0,void 0,void 0,(function*(){var t;let o,i=g.LEDGER_NOT_CONNECTED_STATE;try{i=yield(0,d.withRetry)((()=>(0,d.withTimeout)((0,h.fetchLedgerWireTransportState)(e,!1),e.defaultTransportTimeout)),(()=>!0),3,200)}catch(e){}switch(i.status){case"needs-permission":return(0,a.createVaultSignerError)(a.VaultSignerErrorType.LedgerNeedPermission,"Need permission to connect to Ledger.");case"not-connected":case"reconnecting":case"waiting-for-approval":return(0,a.createVaultSignerError)(a.VaultSignerErrorType.LedgerNotConnected,"Unable to connect to Ledger. Make sure your Ledger device is plugged in.");case"connected":if((null===(t=i.selectedApp)||void 0===t?void 0:t.chainType)!==r.chainType)return(0,a.createVaultSignerError)(a.VaultSignerErrorType.LedgerAppNotOpen,`Ledger App not open. Open the ${(0,u.getChainTypeGenericName)(r.chainType)} app on your Ledger device.`);o=i.transport}return T(o,n,r)}))})})),s.register("1yP1g",(function(t,n){e(t.exports,"convertSignTypedDataToEip712Message",(function(){return r}));const r=e=>{const t={name:e.domain.name,version:e.domain.version,verifyingContract:e.domain.verifyingContract,chainId:"number"==typeof e.domain.chainId?e.domain.chainId:"string"==typeof e.domain.chainId?parseInt(e.domain.chainId,10):void 0},n=[],r={};for(const[t,o]of Object.entries(e.types))for(const e of o)"EIP712Domain"===t?n.push(e):t in r?r[t].push(e):r[t]=[e];return{domain:t,types:Object.assign({EIP712Domain:n},r),primaryType:e.primaryType,message:Object.assign({},e.message)}}})),s.register("2V55Q",(function(e,t){e.exports=s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("4nmlj")).then((()=>s("4TDRm")))})),s.register("g9PKp",(function(t,n){e(t.exports,"OnboardingStorageKeys",(function(){return s("d08rP").OnboardingStorageKeys})),e(t.exports,"OnboardingType",(function(){return s("7cOUp").OnboardingType})),e(t.exports,"createOnboardingHooks",(function(){return s("89Vzt").createOnboardingHooks})),e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return s("1eGkH").BATCH_SIZE_BY_PLATFORM})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return s("1eGkH").useSelectMultichainAccountsProps})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return s("vUpML").ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT})),e(t.exports,"discoverAccounts",(function(){return s("hwACv").discoverAccounts}));s("89Vzt"),s("1eGkH"),s("8taMK"),s("jFh3h"),s("vUpML");s("d08rP"),s("7cOUp");s("7n0ia"),s("hl6Md"),s("hwACv"),s("fGTlj"),s("cZNQz")})),s.register("89Vzt",(function(t,n){e(t.exports,"createOnboardingHooks",(function(){return c}));var r=s("hl6Md"),o=s("l7a7Z"),i=s("fZg4E"),a=s("1vrFI"),u=s("eiyTy");function c(e,t,n,s){const c=new(0,r.LedgerOnboardingAnalytics)(n);return{useIsFirstTimeOnboarding:()=>(0,a.useIsFirstTimeOnboarding)(e),useSetIsFirstTimeOnboarding:()=>(0,a.useSetIsFirstTimeOnboarding)(e,t),useIsResettingApp:()=>(0,u.useIsResettingApp)(e),useSetIsResettingApp:()=>(0,u.useSetIsResettingApp)(e,t),useSetIsFirstTimeResettingApp:()=>(0,u.useSetIsFirstTimeResettingApp)(e,t),useDeriveLedgerAccounts:e=>(0,o.useDeriveLedgerAccounts)(s,t,c,e),useDiscoverLedgerAccounts:e=>(0,i.useDiscoverLedgerAccounts)(c,e)}}})),s.register("hl6Md",(function(t,n){e(t.exports,"LedgerOnboardingAnalytics",(function(){return c}),(function(e){return c=e}));var r,o=s("4xbAj"),i=s("iOvk1"),a=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},u=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class c{constructor(e){r.set(this,void 0),this.onOpen=()=>u(this,r,"f").capture("connectHardwareOpen"),this.onSelectedChains=e=>{const t=new Set(e),n=[];for(const e of i.ChainAvailability.supportedChainIDs({mainnetOnly:!0}))t.has(e)&&n.push((0,i.getChainNameByID)(e));const o={numChains:n.length,selectedChains:n.join(", ")};u(this,r,"f").capture("connectHardwareSelectedChains",{data:o})},this.onDerivedAccounts=e=>{const t={};for(const[n,r]of Object.entries(e.derivedAddresses)){const e=i.ZodChainType.safeParse(n);if(!e.success)continue;const{data:o}=e,s={numberOfDerivedAccounts:r.addresses.length};void 0!==r.duration&&(s.derivationDuration=r.duration),t[(0,i.getChainTypeGenericName)(o)]=s}u(this,r,"f").capture("connectHardwareAccountsDerived",{data:Object.assign({},t)})},this.onDiscoveredAccounts=e=>{var t;const{discoveredAccounts:n}=e,i={};for(const e of n){if("undiscovered"===e.status)continue;const n=e.accounts.reduce(((e,{derivationPathType:t,hasAccountActivity:n})=>(e[o.DERIVATION_PATH_TYPE_CHAIN_TYPES[t]]={derivationPathType:t,hasAccountActivity:n},e)),{});for(const{hasAccountActivity:e,derivationPathType:r}of Object.values(n)){if(!e)continue;const n=null!==(t=i[r])&&void 0!==t?t:0;i[r]=n+1}}u(this,r,"f").capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:i}})},this.onConnectedAccounts=e=>{var t;const n={};for(const r of e.accounts){const e=r.publicKeys.reduce(((e,t)=>(e[o.DERIVATION_PATH_TYPE_CHAIN_TYPES[t.pathType]]=t.pathType,e)),{});for(const r of Object.values(e)){const e=null!==(t=n[r])&&void 0!==t?t:0;n[r]=e+1}}u(this,r,"f").capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:e.accounts.length,numberOfAccountsImportedByDerivationPath:n}})},a(this,r,e,"f")}}r=new WeakMap})),s.register("l7a7Z",(function(t,n){e(t.exports,"useDeriveLedgerAccounts",(function(){return d}),(function(e){return d=e})),s("eJxop");var r=s("bwiqA"),o=s("5i9Ta"),i=s("5ekp2"),a=s("29o0l"),u=s("aJdXK"),c=s("jFh3h"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const d=(e,t,n,s)=>{var d;const{selectedChainIDs:p,ledgerTransportState:f=r.LEDGER_NOT_CONNECTED_STATE}=s,g=p.length>0&&f.isConnected,h=c.onboardingQueryKeys.deriveLedgerAccounts,y=f.isConnected?null===(d=f.selectedApp)||void 0===d?void 0:d.chainType:void 0;(0,a.useEffect)((()=>{y&&t.invalidateQueries(h)}),[y,t,h]);return(0,i.useQuery)({enabled:g,queryKey:h,queryFn:()=>l(void 0,void 0,void 0,(function*(){const r=yield t.getQueryData(h);return(0,u.deriveLedgerAccounts)(Object.assign(Object.assign({ledgerDeps:e,queryClient:t,ledgerOnboardingAnalytics:n,queryKey:h},s),{ledgerTransportState:yield(0,o.getLedgerTransportState)(t),previousResponse:r}))})),retry:!1})}})),s.register("aJdXK",(function(t,n){e(t.exports,"deriveLedgerAccounts",(function(){return f}),(function(e){return f=e}));var r=s("jZpRu"),o=s("iOvk1");s("eJxop");var i=s("54Y8k"),a=s("vUpML"),u=s("1wrYO"),c=s("c6BVq"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const d={chainIDsToDerive:[],derivedAddresses:{}},p=(e,t)=>e.map((e=>({chainType:e,status:t[e]?"complete":"incomplete"}))),f=e=>l(void 0,void 0,void 0,(function*(){var t;const{ledgerDeps:n,queryClient:s,ledgerOnboardingAnalytics:l,queryKey:f,selectedChainIDs:g,enableDebugLogs:h=!0,enableLedgerXPubDerivation:y=!0,ledgerTransportState:m,previousResponse:v=d}=e;if(!(({selectedChainIDs:e,ledgerTransportState:t})=>e.length>0&&t.isConnected)(e))return{chainIDsToDerive:[],derivedAddresses:{}};const S=v.derivedAddresses,w=(0,c.getChainTypesToDerive)(g),A=p(w,S).find((e=>"incomplete"===e.status));if(!A)return{chainIDsToDerive:[],derivedAddresses:S};const{chainType:T}=A,b=g.filter((e=>(0,o.getChainType)(e)===T));if(s.setQueryData(f,{chainIDsToDerive:b,derivedAddresses:{}}),!m.isConnected||(null===(t=m.selectedApp)||void 0===t?void 0:t.chainType)!==T)return{chainIDsToDerive:b,derivedAddresses:S};const E=(0,u.createLedgerOnboardingParams)(T,a.LEDGER_ONBOARDING_INDICES_TO_DERIVE);let k;const x=yield(0,i.deriveLedgerAddresses)({transportTimeout:n.defaultTransportTimeout,state:m,derivationPathParams:E,enableDebugLogs:h,enableLedgerXPubDerivation:y,onSuccess:e=>{k=e}}),P=E.map((e=>({paramsUsed:e,address:x[(0,r.getDerivationPath)(e)]}))),I=Object.assign(Object.assign({},S),{[T]:{addresses:P,duration:k}}),C=p(w,I).find((e=>"incomplete"===e.status)),O=C?g.filter((e=>(0,o.getChainType)(e)===C.chainType)):[],F={chainIDsToDerive:O,derivedAddresses:I};return 0===O.length&&l.onDerivedAccounts(F),F}))})),s.register("vUpML",(function(t,n){e(t.exports,"LEDGER_ONBOARDING_INDICES_TO_DERIVE",(function(){return o})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return i}));var r=s("d08rP");const o=19,i=[r.OnboardingStorageKeys.FirstTimeOnboarding,r.OnboardingStorageKeys.IsResettingApp]})),s.register("d08rP",(function(t,n){var r,o;e(t.exports,"OnboardingStorageKeys",(function(){return r})),(o=r||(r={})).FirstTimeOnboarding="firstTimeOnboarding",o.IsResettingApp="isResettingApp"})),s.register("1wrYO",(function(t,n){e(t.exports,"createLedgerOnboardingParams",(function(){return u}));var r=s("jZpRu"),o=s("iOvk1");const i={chainType:o.ChainType.Solana,pathType:r.DerivationPathType.Bip44RootSolana},a={chainType:o.ChainType.EVM,pathType:r.DerivationPathType.Bip44RootEthereum},u=(e,t)=>{const n=[];e===o.ChainType.Solana?n.push(i):e===o.ChainType.EVM&&n.push(a);for(let i=0;i<t;++i)switch(e){case o.ChainType.Solana:{const t={chainType:e,index:i};n.push(Object.assign(Object.assign({},t),{pathType:r.DerivationPathType.Bip44ChangeSolana})),n.push(Object.assign(Object.assign({},t),{pathType:r.DerivationPathType.Bip44Solana}));break}case o.ChainType.EVM:{const t={chainType:e,index:i};n.push(Object.assign(Object.assign({},t),{pathType:r.DerivationPathType.Bip44Ethereum})),n.push(Object.assign(Object.assign({},t),{pathType:r.DerivationPathType.Bip44EthereumSecondary}));break}}return n}})),s.register("c6BVq",(function(t,n){e(t.exports,"getChainTypesToDerive",(function(){return o}));var r=s("iOvk1");const o=e=>{const t=new Set;for(const n of e)t.add((0,r.getChainType)(n));return r.ChainAvailability.supportedChainTypes().filter((e=>t.has(e)))}})),s.register("jFh3h",(function(t,n){e(t.exports,"onboardingQueryKeys",(function(){return o}));const r="@phantom-labs/onboarding",o={firstTimeOnboarding:[`${r}:first-time-onboarding`],isResettingApp:[`${r}:is-resetting-app`],deriveLedgerAccounts:[`${r}:derive-ledger-accounts`],discoverLedgerAccounts:[`${r}:discover-ledger-accounts`]}})),s.register("fZg4E",(function(t,n){e(t.exports,"useDiscoverLedgerAccounts",(function(){return u}),(function(e){return u=e}));var r=s("5ekp2"),o=s("57b0z"),i=s("jFh3h"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t)=>{const n=(0,o.isDiscoverLedgerAccountsEnabled)(t),s=i.onboardingQueryKeys.discoverLedgerAccounts;return(0,r.useQuery)({enabled:n,queryKey:s,queryFn:()=>a(void 0,void 0,void 0,(function*(){return(0,o.discoverLedgerAccounts)(Object.assign({ledgerOnboardingAnalytics:e},t))}))})}})),s.register("57b0z",(function(t,n){e(t.exports,"isDiscoverLedgerAccountsEnabled",(function(){return l}),(function(e){return l=e})),e(t.exports,"discoverLedgerAccounts",(function(){return d}),(function(e){return d=e}));var r=s("4xbAj"),o=s("iOvk1"),i=s("creZv"),a=s("hwACv"),u=s("cZNQz"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const l=({existingAccountsFetched:e,selectedChainIDs:t,deriveLedgerAccountsResponse:n})=>e&&t.length>0&&!!n&&0===n.chainIDsToDerive.length,d=e=>c(void 0,void 0,void 0,(function*(){var t,n,s,c;const{ledgerOnboardingAnalytics:d,existingAccounts:p,discoveryBatchSize:f,selectedChainIDs:g,deriveLedgerAccountsResponse:h,retryDiscoverAccountsOnFail:y=!0}=e;if(!l(e))throw new Error("Query disabled.");const m={},v=new Set(g),S=o.ChainAvailability.supportedChainIDs({mainnetOnly:!0});for(const e of S){if(!v.has(e))continue;const i=(0,o.getChainType)(e),a=null!==(n=null===(t=null==h?void 0:h.derivedAddresses[i])||void 0===t?void 0:t.addresses)&&void 0!==n?n:[];for(const{address:t,paramsUsed:n}of a){const o=(0,r.getDerivationPathGroupKey)(n),a=null!==(s=m[o])&&void 0!==s?s:{accounts:{},derivationIndex:null!==(c=n.index)&&void 0!==c?c:-1};a.accounts[`${e}-${t}`]={chainType:i,chainId:e,address:t,derivationPathType:n.pathType},m[o]=a}}const w=Object.entries(m).sort((([e,t],[n,o])=>(0,r.compareDerivationPathGroup)(e,n))).map((([e,t])=>t)),A=(0,u.getExistingAddressesSet)(p),T=w.reduce(((e,t)=>{let n=!1;for(const{address:e}of Object.values(t.accounts))n=n||A.has(e);return n||e.push(t),e}),[]),b=[],E=[];for(let e=0;e<T.length;e+=f){const t=T.slice(e,e+f).map((e=>{const t=Object.entries(e.accounts).reduce(((t,[n,r])=>{var o;return t[n]={account:r,seedIndex:null!==(o=e.derivationIndex)&&void 0!==o?o:-1},t}),{});return t}));E.push(t)}for(const e of E)b.push((0,a.discoverAccounts)(e,y));const k=(yield Promise.all(b)).flat().map((e=>{switch(e.status){case"discovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity||(0,r.isRecommendedDerivationPathType)(e.derivationPathType)))});case"undiscovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>(0,r.isRecommendedDerivationPathType)(e.derivationPathType)))})}})).filter((e=>e.accounts.length>0)).map((e=>{const t=(0,i.default)();return Object.assign(Object.assign({},e),{discoveryIdentifier:t})})),x=k.filter((e=>"undiscovered"===e.status||e.isSelectedByDefault)),P=k.filter((e=>!("undiscovered"===e.status||e.isSelectedByDefault))).slice(0,2),I=x.length>0,C=p.filter((e=>e.type===r.AccountType.Ledger)).length,O=(I?[...x,...P]:k.slice(0,3)).map(((e,t)=>Object.assign(Object.assign({},e),{accountIndex:C+t}))),F={};O.forEach(((e,t)=>{("discovered"===e.status&&e.isSelectedByDefault||0===t)&&(F[e.discoveryIdentifier]=!0)}));const R={discoveredAccounts:O,activeAccountsFound:I,defaultSelectedAccounts:F};return d.onDiscoveredAccounts(R),R}))})),s.register("hwACv",(function(t,n){e(t.exports,"discoverAccounts",(function(){return y}),(function(e){return y=e})),e(t.exports,"useDiscoverMultiChainAccounts",(function(){return v}),(function(e){return v=e}));var r=s("jZpRu"),o=s("iOvk1"),i=s("hMVEP"),a=s("csW2r"),u=s("RVqnc"),c=s("wGjeD"),l=s("fGTlj"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const p="fetch-multi-chain-accounts-by-seed",f=(e,t)=>[r.DerivationPathType.BitcoinNativeSegwit].map((n=>({chainType:o.ChainType.Bitcoin,chainId:o.ChainID.BitcoinMainnet,address:t.derivePathType(n,e).publicKey.toString(),derivationPathType:n}))),g=(e,t)=>[r.DerivationPathType.Bip44Ethereum,r.DerivationPathType.Bip44EthereumSecondary,r.DerivationPathType.Bip44EthereumTertiary].map((n=>({address:t.derivePathType(n,e).publicKey.toString(),pathType:n}))),h=(e,t)=>[r.DerivationPathType.Bip44ChangeSolana,r.DerivationPathType.Bip44Solana,r.DerivationPathType.DeprecatedSolana].map((n=>({chainType:o.ChainType.Solana,chainId:o.ChainID.SolanaMainnet,address:new(0,i.PublicKey)(t.derivePathType(n,e).publicKey).toString(),derivationPathType:n}))),y=(e,t=!0)=>d(void 0,void 0,void 0,(function*(){const n=Object.assign({},...e);try{const e=Object.values(n).map((({account:e})=>({address:e.address,chainId:e.chainId})));let r;r=t?(yield(0,u.withRetry)((()=>d(void 0,void 0,void 0,(function*(){return(0,u.withTimeout)((0,l.fetchDiscoverAccounts)({accounts:e}),1e4)}))),(()=>!0),2)).accounts:(yield(0,l.fetchDiscoverAccounts)({accounts:e})).accounts;const i=[],s=[],a=[];for(const e of r){const t=n[`${e.chain.id}-${e.address}`].account,r=t.chainType,u=t.derivationPathType,c=Object.assign(Object.assign({},e),{chainType:r,derivationPathType:u,hasAccountActivity:!!e.lastActivityTimestamp||parseFloat(e.amount)>0});c.chainType===o.ChainType.Solana?i.push(c):e.chain.id==o.ChainID.EthereumMainnet?s.push(c):a.push(c)}const c=[i,s,a].reduce(((e,t)=>(t.forEach(((t,n)=>{e[n]=[...e[n]||[],t]})),e)),[]),p=c.filter((e=>e.some((e=>e.hasAccountActivity)))),f=!!p.length;return(f?p:c).map((e=>{const t=e[0];return{status:"discovered",seedIndex:n[`${t.chain.id}-${t.address}`].seedIndex,isSelectedByDefault:f,accounts:e}}))}catch(e){const t=[],r=[],i=[],s=Object.values(n).map((({account:e})=>e));for(const e of s){const s=n[`${e.chainId}-${e.address}`].account,a=s.chainType,u=s.derivationPathType,c=Object.assign(Object.assign({},e),{chain:{id:e.chainId,name:(0,o.getChainNameByID)(e.chainId),symbol:(0,o.getSymbolFromChainId)(e.chainId)},chainType:a,derivationPathType:u,hasAccountActivity:!1});e.chainType===o.ChainType.Solana?t.push(c):e.chainId==o.ChainID.EthereumMainnet?r.push(c):i.push(c)}return[t,r,i].reduce(((e,t)=>(t.forEach(((t,n)=>{e[n]=[...e[n]||[],t]})),e)),[]).map((e=>{const t=e[0];return{status:"undiscovered",seedIndex:n[`${t.chain.id}-${t.address}`].seedIndex,accounts:e,isSelectedByDefault:!1}}))}})),m=({hdWallet:e,startIndex:t,endIndex:n,enabledChainTypes:r})=>d(void 0,void 0,void 0,(function*(){const i=[];for(let s=t;s<=n;++s){const t={};if(r.includes(o.ChainType.Bitcoin))for(const n of f(s,e))t[`${o.ChainID.BitcoinMainnet}-${n.address}`]={account:n,seedIndex:s};if(r.includes(o.ChainType.EVM)){const n=g(s,e);for(const{address:e,pathType:r}of n)t[`${o.ChainID.EthereumMainnet}-${e}`]={account:{chainType:o.ChainType.EVM,chainId:o.ChainID.EthereumMainnet,address:e,derivationPathType:r},seedIndex:s},t[`${o.ChainID.PolygonMainnet}-${e}`]={account:{chainType:o.ChainType.EVM,chainId:o.ChainID.PolygonMainnet,address:e,derivationPathType:r},seedIndex:s}}if(r.includes(o.ChainType.Solana))for(const n of h(s,e))t[`${n.chainId}-${n.address}`]={account:n,seedIndex:s};i.push(t)}return y(i)}));function v({batchSize:e,hdWallet:t,enabledChainTypes:n}){const r=!!t&&0!=n.length,o=[p,e];return(0,c.useInfiniteQuery)({enabled:r,queryKey:o,queryFn:({pageParam:r=0})=>d(this,void 0,void 0,(function*(){if(e<1)throw new Error(`Need positive batchSize: ${e}`);if(!t)throw new Error("Missing HDWallet");const o=[],i=[],s=0===r;let a=r,u=!0;for(;u;){const r=a,c=a+e-1,l=(yield m({hdWallet:t,startIndex:r,endIndex:c,enabledChainTypes:n})).flat(1);a+=e,u=!1;for(const e of l)o.push(e),("undiscovered"===e.status||e.isSelectedByDefault)&&i.push(e),s&&"discovered"===e.status&&e.isSelectedByDefault&&(u=!0)}if(s&&0===i.length&&o.length>1){const e=o[0],t=e.accounts.map((e=>Object.assign(Object.assign({},e),{hasAccountActivity:!1}))),n={status:"undiscovered",seedIndex:e.seedIndex,accounts:t,isSelectedByDefault:!1};i.push(n)}return i})),getNextPageParam:(t,n)=>{const r=n.length,o=r?n[0]:[],i=o.length?S(o[o.length-1].seedIndex,e):0;return 1===r?i:i+e*(r-1)},cacheTime:0,staleTime:0,onError:e=>a.telemetry.captureError(e,a.FeatureTag.Account)})}const S=(e,t)=>Math.ceil(e/t)*t+t})),s.register("fGTlj",(function(t,n){e(t.exports,"fetchDiscoverAccounts",(function(){return c}),(function(e){return c=e}));var r=s("iOvk1"),o=s("16XMG"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=`${(0,o.getAPIEnvironment)()}/discover/v1`,u={Accept:"application/json","Content-Type":"application/json"},c=e=>i(void 0,void 0,void 0,(function*(){if(!e.accounts.length)throw new Error("Must send at least 1 account for discovery");const t=yield fetch(a,{method:"POST",headers:u,body:JSON.stringify(e)}),n=yield t.json();if(200!==t.status){if((o=n)&&"string"==typeof o.message)throw new Error(n.message);throw new Error(`Unable to discover accounts with args: ${JSON.stringify(e)}`)}var o;if((e=>{if(!e||!Array.isArray(e.accounts))return!1;for(const t of e.accounts)if("string"!=typeof t.address||"string"!=typeof t.amount||t.lastActivityTimestamp&&"number"!=typeof t.lastActivityTimestamp||!t.chain||"string"!=typeof t.chain.id||!new Set(r.ChainAvailability.supportedChainIDs()).has(t.chain.id)||"string"!=typeof t.chain.name||"string"!=typeof t.chain.symbol||"string"!=typeof t.chain.imageUrl)return!1;return!0})(n))return n;throw new Error(`Invalid discover accounts response: ${JSON.stringify(n)}`)}))})),s.register("cZNQz",(function(t,n){e(t.exports,"getExistingAddressesSet",(function(){return r}));const r=e=>{const t=new Set;for(const n of e)for(const{address:e}of n.addresses)t.add(e);return t}})),s.register("1vrFI",(function(t,n){e(t.exports,"useIsFirstTimeOnboarding",(function(){return c}),(function(e){return c=e})),e(t.exports,"useSetIsFirstTimeOnboarding",(function(){return l}),(function(e){return l=e}));var r=s("9W7fs"),o=s("5ekp2"),i=s("d08rP"),a=s("jFh3h"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.firstTimeOnboarding,queryFn:()=>u(void 0,void 0,void 0,(function*(){const t=yield e.get(i.OnboardingStorageKeys.FirstTimeOnboarding);return null===t||t.isFirstTimeOnboarding}))});return t},l=(e,t)=>(0,r.useMutation)({mutationFn:n=>u(void 0,void 0,void 0,(function*(){yield e.set(i.OnboardingStorageKeys.FirstTimeOnboarding,{isFirstTimeOnboarding:n}),t.setQueryData(a.onboardingQueryKeys.firstTimeOnboarding,n)}))})})),s.register("eiyTy",(function(t,n){e(t.exports,"useIsResettingApp",(function(){return c}),(function(e){return c=e})),e(t.exports,"useSetIsResettingApp",(function(){return l}),(function(e){return l=e})),e(t.exports,"useSetIsFirstTimeResettingApp",(function(){return d}),(function(e){return d=e}));var r=s("9W7fs"),o=s("5ekp2"),i=s("d08rP"),a=s("jFh3h"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.isResettingApp,queryFn:()=>u(void 0,void 0,void 0,(function*(){const t=yield e.get(i.OnboardingStorageKeys.IsResettingApp);return null===t?{isResettingApp:!1,isFirstTimeResettingApp:!1}:t}))});return t},l=(e,t)=>(0,r.useMutation)({mutationFn:n=>u(void 0,void 0,void 0,(function*(){var r;const o=yield e.get(i.OnboardingStorageKeys.IsResettingApp),s=null!==(r=null==o?void 0:o.isFirstTimeResettingApp)&&void 0!==r&&r;yield e.set(i.OnboardingStorageKeys.IsResettingApp,{isResettingApp:n,isFirstTimeResettingApp:s}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:n,isFirstTimeResettingApp:s})}))}),d=(e,t)=>(0,r.useMutation)({mutationFn:n=>u(void 0,void 0,void 0,(function*(){var r;const o=yield e.get(i.OnboardingStorageKeys.IsResettingApp),s=null!==(r=null==o?void 0:o.isResettingApp)&&void 0!==r&&r;yield e.set(i.OnboardingStorageKeys.IsResettingApp,{isResettingApp:s,isFirstTimeResettingApp:n}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:s,isFirstTimeResettingApp:n})}))})})),s.register("1eGkH",(function(t,n){e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return d}),(function(e){return d=e})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return p}),(function(e){return p=e}));var r=s("43063"),o=s("RVqnc"),i=s("29o0l"),a=s("7z19N"),u=s("hwACv"),c=s("8taMK"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const d={extension:7,ios:7,android:7},p=({platform:e,seed:t,navigationCallback:n,storageCallback:s,enabledChainTypes:p})=>{var f;const{t:g}=(0,r.useTranslation)(),h=g("onboardingSelectAccountsFindMoreAccounts"),[y,m]=(0,i.useState)({}),[v,S]=(0,i.useState)(!1),[w,A]=(0,i.useState)(!1),[T,b]=(0,i.useState)(h),E=(0,c.useCachedHDWallet)(t),{data:k,status:x,fetchNextPage:P,isFetchingNextPage:I}=(0,u.useDiscoverMultiChainAccounts)({batchSize:d[e],hdWallet:E,enabledChainTypes:p}),C=(0,i.useMemo)((()=>{var e;return null!==(e=null==k?void 0:k.pages.flat())&&void 0!==e?e:[]}),[k]),O=(F=C,(0,i.useMemo)((()=>F?F.map((e=>"undiscovered"===e.status?e:Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity))}))):[]),[F]));var F;const R=(N=O,(0,i.useMemo)((()=>N.reduce(((e,t,n)=>(e[n]=0===n||t.isSelectedByDefault,e)),{})),[N]));var N;const D=((e,t)=>(0,i.useMemo)((()=>{var n;return null!==(n=null==e?void 0:e.reduce(((e,n,r)=>t[r]?[...e,n]:e),[]))&&void 0!==n?n:[]}),[e,t]))(C,y),L=(({activeAccountsNumber:e,allAccountsNumber:t,hasDiscoveryFailed:n})=>{const{t:o}=(0,r.useTranslation)(),s=e>0&&!n;return(0,i.useMemo)((()=>0===t?o("onboardingImportImportingFindingAccounts"):0===e?o("onboardingImportAccountsEmptyResult"):1===t?s?o("onboardingImportAccountsFoundAccounts_one",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_one",{numberOfWallets:t}):t>1?s?o("onboardingImportAccountsFoundAccounts_other",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_other",{numberOfWallets:t}):""),[e,t,s,o])})({activeAccountsNumber:O.length,allAccountsNumber:C.length,hasDiscoveryFailed:"undiscovered"===(null===(f=C[0])||void 0===f?void 0:f.status)});((e,t)=>{const{t:n}=(0,r.useTranslation)();(0,i.useEffect)((()=>{let r;if(e){const{pages:o}=e,i=o.length>1,s=0===o[o.length-1].length;i&&s&&(t(n("onboardingSelectAccountsFindMoreNoneFound")),r=setTimeout((()=>{t(n("onboardingSelectAccountsFindMoreAccounts"))}),3e3))}return()=>{r&&clearTimeout(r)}}),[e])})(k,b),((e,t)=>{(0,i.useEffect)((()=>{t((t=>{const{length:n}=Object.keys(e),r={};for(let o=0;o<n;o++)r[o]=void 0===t[o]?e[o]:t[o];return r}))}),[e,t])})(R,m);const M=(0,i.useCallback)((()=>A(!0)),[]),B=(0,i.useCallback)((e=>{if("success"!==x)return;const t=Object.assign({},y);t[e]=!t[e],m(t)}),[x,y,m]),U=(0,i.useCallback)((()=>{v||(S(!0),l(void 0,void 0,void 0,(function*(){yield(0,o.delayAsync)(0),yield s(D,(0,a.generateImportedAccountChainAnalytics)(D)),n((0,a.generateImportedAccountChainAnalytics)(D))})))}),[v,D,n,s]),_={expanded:w,findMoreAccountsButtonText:T,isFetchingMoreAccounts:I,isImporting:v,renderedPages:O,selectedAccounts:y,subtitle:L,findMoreAccounts:P,onExpand:M,onImport:U,onSelect:B};return"success"!==x?Object.assign({status:"loading",isImportButtonDisabled:!0},_):Object.assign({status:"success",isImportButtonDisabled:0===D.length},_)}})),s.register("7z19N",(function(t,n){e(t.exports,"generateImportedAccountChainAnalytics",(function(){return r}));const r=e=>e.reduce(((e,t)=>{var n,r,o,i;let s=e;for(const a of t.accounts){const t=a.chain.name.toLowerCase();if((null===(n=e[t])||void 0===n?void 0:n.balance)&&(null===(r=e[t])||void 0===r?void 0:r.history))continue;const u="amount"in a&&parseFloat(a.amount)>0,c=a.hasAccountActivity;e[t]?s=Object.assign(Object.assign({},s),{[t]:Object.assign(Object.assign({},s[t]),{balance:u||(null===(o=s[t])||void 0===o?void 0:o.balance),history:c||(null===(i=s[t])||void 0===i?void 0:i.history)})}):s=Object.assign(Object.assign({},s),{[t]:{balance:u,history:c}})}return s}),{})})),s.register("8taMK",(function(t,n){e(t.exports,"useCachedHDWallet",(function(){return i}));var r=s("jZpRu"),o=s("29o0l");const i=e=>{const[t,n]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(e.length){const t=new(0,r.CachedHDWallet)(e);return n(t),()=>{n(null),t.cleanup()}}}),[e]),t}})),s.register("7cOUp",(function(t,n){e(t.exports,"OnboardingType",(function(){return r}));var r,o,i=s("7XqVB");(o=r||(r={})).Initial="initial",o.Create="create",o.Import="import",o.Restore="restore",o.Append="append",o.SeedVault="seedVault";const a=i.z.object({balance:i.z.boolean(),history:i.z.boolean()});i.z.record(i.z.string(),a)})),s.register("7n0ia",(function(e,t){s("jFh3h")})),s.register("egHtJ",(function(t,n){e(t.exports,"createStakingHooks",(function(){return s("j4jBF").createStakingHooks})),e(t.exports,"calculateTotalValidatorAPY",(function(){return s("8lo7S").calculateTotalValidatorAPY})),e(t.exports,"recommendedValidatorSorter",(function(){return s("kAm35").recommendedValidatorSorter})),e(t.exports,"voteAccountSorter",(function(){return s("9TG0W").voteAccountSorter})),s("hvyP7"),s("jjhma"),s("9OqWg")})),s.register("hvyP7",(function(t,n){e(t.exports,"createStakingHooks",(function(){return s("j4jBF").createStakingHooks})),s("j4jBF")})),s.register("j4jBF",(function(t,n){e(t.exports,"createStakingHooks",(function(){return S}));var r=s("7gANb"),o=s("5ZOeC"),i=s("lEqf0"),a=s("6fWI5"),u=s("48Z1Q"),c=s("39pK6"),l=s("gqfgW"),d=s("3cJgq"),p=s("d5USZ"),f=s("40bAw"),g=s("8BkVZ"),h=s("kETlb"),y=s("FEhzp"),m=s("cJRQS"),v=s("efxv4");function S(e,t,n,s){const S=new(0,r.PriorityFeeService);return{useRecommendedValidators:()=>(0,u.useRecommendedValidators)(n),useSignatureStatus:(e,n,r)=>(0,c.useSignatureStatus)(t,e,n,r),useStakeAccounts:d.useStakeAccounts,useStakeAccountMinBalance:l.useStakeAccountMinBalance,useStakeActivationData:p.useStakeActivationData,useStakeApy:()=>(0,f.useStakeApy)(n),useStakeRewardsHistory:(e,t)=>(0,g.useStakeRewardsHistory)(n,e,t),useValidators:y.useValidators,useValidatorInfo:h.useValidatorInfo,useVoteAccounts:m.useVoteAccounts,useDelegateStake:n=>(0,a.useDelegateStake)(e,n,t,S,s),useCreateStakeAccountAndDelegateStake:n=>(0,o.useCreateStakeAccountAndDelegateStake)(e,n,t,S,s),useDeactivateStake:n=>(0,i.useDeactivateStake)(e,n,t,S,s),useWithdrawStake:n=>(0,v.useWithdrawStake)(e,n,t,S,s)}}})),s.register("5ZOeC",(function(t,n){e(t.exports,"useCreateStakeAccountAndDelegateStake",(function(){return v}),(function(e){return v=e}));var r=s("iOvk1"),o=s("43063"),i=s("hMVEP"),a=s("csW2r"),u=s("7gANb"),c=s("9W7fs"),l=s("bQvNK"),d=s("24hfq"),p=s("Nt4tV"),f=s("3vaB1");s("9OqWg");var g=s("hIkt0"),h=s("6fWI5"),y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function m({lamports:e,votePubkey:t,authorizedPubkey:n}){const[r,o]=function({ownerPublicKey:e,lamports:t,transaction:n=new(0,i.Transaction)}){const r=i.Keypair.generate();return n.add(i.StakeProgram.createAccount({fromPubkey:e,stakePubkey:r.publicKey,authorized:new(0,i.Authorized)(e,e),lamports:t})),[n,r]}({ownerPublicKey:n,lamports:e});return r.add((0,h.delegateStake)({stakePubkey:o.publicKey,authorizedPubkey:n,votePubkey:t})),[r,o]}const v=(e,t,n,s,h)=>{const{t:v}=(0,o.useTranslation)(),{mutateAsync:S}=e.useSignAndSendSolanaTransactionAsync(t);return(0,c.useMutation)({mutationFn:({accountIdentifier:e,senderAddress:n,lamports:o,votePubkey:a,authorizedPubkey:c,usdPerSol:l})=>y(void 0,void 0,void 0,(function*(){if(!n)throw f.MissingSenderAddressError;const{chainId:g,address:y}=n,[w,A]=m({accountIdentifier:e,senderAddress:n,lamports:o,votePubkey:a,authorizedPubkey:c}),T=yield s.addPriorityFee(w,{connection:t}),b={ownerAddress:null!=y?y:"",chainID:g,data:{signature:""},type:u.PendingTransactionType.CreateAccountAndDelegateStake,display:{summary:{topLeft:{label:v("transactionsPendingCreatingAndDelegatingStake")}}}};h.approved({chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(g),type:"delegate"});const E=yield S({accountIdentifier:e,feePayer:new(0,i.PublicKey)(y),transaction:T,pendingTransactionInput:b,opts:{additionalSignerAccounts:[A]}});h.submittedTransaction(E,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(g),method:"signAndSendTransaction"});const k=(0,p.lamportsToSolana)(o),x=l?new(0,d.BigNumber)(l).times(new(0,d.BigNumber)(k)).toNumber():void 0;return h.createStakeAccountAndDelegateStake({sol:k,usd:x,voteAccountPubkey:a}),{chainID:g,id:null!=E?E:""}})),onSuccess:e=>{(0,l.waitForTransactionConfirmationAsync)(t,e.id).then((()=>{h.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"confirmed"}}),(0,g.invalidateAllStakeAccountData)(n)()})).catch((t=>{h.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"error"}}),a.telemetry.captureError(t,a.FeatureTag.Staking)}))}})}})),s.register("3vaB1",(function(t,n){e(t.exports,"MissingSenderAddressError",(function(){return r})),e(t.exports,"MissingConfirmationSignatureError",(function(){return o})),e(t.exports,"MissingPublicKeyError",(function(){return i}));const r=new Error("Missing sender address for staking fungibles."),o=(new Error("Missing signature from staking fungibles."),new Error("Missing signature from waiting for staking transaction confirmation.")),i=new Error("PublicKey is required")})),s.register("9OqWg",(function(t,n){e(t.exports,"calculateTotalValidatorAPY",(function(){return s("8lo7S").calculateTotalValidatorAPY})),e(t.exports,"invalidateAllStakeAccountData",(function(){return s("hIkt0").invalidateAllStakeAccountData})),e(t.exports,"recommendedValidatorSorter",(function(){return s("kAm35").recommendedValidatorSorter})),e(t.exports,"voteAccountSorter",(function(){return s("9TG0W").voteAccountSorter}));s("8lo7S"),s("hIkt0"),s("kAm35"),s("9TG0W")})),s.register("8lo7S",(function(n,r){e(n.exports,"calculateTotalValidatorAPY",(function(){return i}));var o=s("k1fjo");function i(e,n){const r=new(t(o))(e/100),i=new(t(o))(n/100);return r.minus(r.times(i)).times(100).decimalPlaces(2).toNumber()}})),s.register("k1fjo",(function(e,t){!function(t){"use strict";var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,i=Math.floor,s="[BigNumber Error] ",a=s+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,f=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function h(e){for(var t,n,r=1,o=e.length,i=e[0]+"";r<o;){for(t=e[r++]+"",n=c-t.length;n--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function y(e,t){var n,r,o=e.c,i=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=u==c,!o||!i)return r?0:!o^n?1:-1;if(!r)return u>c^n?1:-1;for(a=(u=o.length)<(c=i.length)?u:c,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^n?1:-1;return u==c?0:u>c^n?1:-1}function m(e,t,n,r){if(e<t||e>n||e!==i(e))throw Error(s+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return g(e.e/c)==t&&e.c[t]%2!=0}function S(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,n){var r,o;if(t<0){for(o=n+".";++t;o+=n);e=o+e}else if(++t>(r=e.length)){for(o=n,t-=r;--t;o+=n);e+=o}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,A,T,b,E,k,x,P,I,C,O=K.prototype={constructor:K,toString:null,valueOf:null},F=new K(1),R=20,N=4,D=-7,L=21,M=-1e7,B=1e7,U=!1,_=1,j=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",H=!0;function K(e,t){var n,o,s,u,d,p,f,g,h=this;if(!(h instanceof K))return new K(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>B?h.c=h.e=null:e.e<M?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,d=e;d>=10;d/=10,u++);return void(u>B?h.c=h.e=null:(h.e=u,h.c=[e]))}g=String(e)}else{if(!r.test(g=String(e)))return T(h,g,p);h.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(u=g.indexOf("."))>-1&&(g=g.replace(".","")),(d=g.search(/e/i))>0?(u<0&&(u=d),u+=+g.slice(d+1),g=g.substring(0,d)):u<0&&(u=g.length)}else{if(m(t,2,V.length,"Base"),10==t&&H)return z(h=new K(e),R+h.e+1,N);if(g=String(e),p="number"==typeof e){if(0*e!=0)return T(h,g,p,t);if(h.s=1/e<0?(g=g.slice(1),-1):1,K.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else h.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(n=V.slice(0,t),u=d=0,f=g.length;d<f;d++)if(n.indexOf(o=g.charAt(d))<0){if("."==o){if(d>u){u=f;continue}}else if(!s&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){s=!0,d=-1,u=0;continue}return T(h,String(e),p,t)}p=!1,(u=(g=A(g,t,10,h.s)).indexOf("."))>-1?g=g.replace(".",""):u=g.length}for(d=0;48===g.charCodeAt(d);d++);for(f=g.length;48===g.charCodeAt(--f););if(g=g.slice(d,++f)){if(f-=d,p&&K.DEBUG&&f>15&&(e>l||e!==i(e)))throw Error(a+h.s*e);if((u=u-d-1)>B)h.c=h.e=null;else if(u<M)h.c=[h.e=0];else{if(h.e=u,h.c=[],d=(u+1)%c,u<0&&(d+=c),d<f){for(d&&h.c.push(+g.slice(0,d)),f-=c;d<f;)h.c.push(+g.slice(d,d+=c));d=c-(g=g.slice(d)).length}else d-=f;for(;d--;g+="0");h.c.push(+g)}}else h.c=[h.e=0]}function Q(e,t,n,r){var o,i,s,a,u;if(null==n?n=N:m(n,0,8),!e.c)return e.toString();if(o=e.c[0],s=e.e,null==t)u=h(e.c),u=1==r||2==r&&(s<=D||s>=L)?S(u,s):w(u,s,"0");else if(i=(e=z(new K(e),t,n)).e,a=(u=h(e.c)).length,1==r||2==r&&(t<=i||i<=D)){for(;a<t;u+="0",a++);u=S(u,i)}else if(t-=s,u=w(u,i,"0"),i+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=i-a)>0)for(i+1==a&&(u+=".");t--;u+="0");return e.s<0&&o?"-"+u:u}function G(e,t){for(var n,r=1,o=new K(e[0]);r<e.length;r++){if(!(n=new K(e[r])).s){o=n;break}t.call(o,n)&&(o=n)}return o}function W(e,t,n){for(var r=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,r++);return(n=r+n*c-1)>B?e.c=e.e=null:n<M?e.c=[e.e=0]:(e.e=n,e.c=t),e}function z(e,t,n,r){var s,a,l,p,f,g,h,y=e.c,m=d;if(y){e:{for(s=1,p=y[0];p>=10;p/=10,s++);if((a=t-s)<0)a+=c,l=t,h=(f=y[g=0])/m[s-l-1]%10|0;else if((g=o((a+1)/c))>=y.length){if(!r)break e;for(;y.length<=g;y.push(0));f=h=0,s=1,l=(a%=c)-c+1}else{for(f=p=y[g],s=1;p>=10;p/=10,s++);h=(l=(a%=c)-c+s)<0?0:f/m[s-l-1]%10|0}if(r=r||t<0||null!=y[g+1]||(l<0?f:f%m[s-l-1]),r=n<4?(h||r)&&(0==n||n==(e.s<0?3:2)):h>5||5==h&&(4==n||r||6==n&&(a>0?l>0?f/m[s-l]:0:y[g-1])%10&1||n==(e.s<0?8:7)),t<1||!y[0])return y.length=0,r?(t-=e.e+1,y[0]=m[(c-t%c)%c],e.e=-t||0):y[0]=e.e=0,e;if(0==a?(y.length=g,p=1,g--):(y.length=g+1,p=m[c-a],y[g]=l>0?i(f/m[s-l]%m[l])*p:0),r)for(;;){if(0==g){for(a=1,l=y[0];l>=10;l/=10,a++);for(l=y[0]+=p,p=1;l>=10;l/=10,p++);a!=p&&(e.e++,y[0]==u&&(y[0]=1));break}if(y[g]+=p,y[g]!=u)break;y[g--]=0,p=1}for(a=y.length;0===y[--a];y.pop());}e.e>B?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function $(e){var t,n=e.e;return null===n?e.toString():(t=h(e.c),t=n<=D||n>=L?S(t,n):w(t,n,"0"),e.s<0?"-"+t:t)}return K.clone=e,K.ROUND_UP=0,K.ROUND_DOWN=1,K.ROUND_CEIL=2,K.ROUND_FLOOR=3,K.ROUND_HALF_UP=4,K.ROUND_HALF_DOWN=5,K.ROUND_HALF_EVEN=6,K.ROUND_HALF_CEIL=7,K.ROUND_HALF_FLOOR=8,K.EUCLID=9,K.config=K.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(n=e[t],0,f,t),R=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(n=e[t],0,8,t),N=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(m(n[0],-f,0,t),m(n[1],0,f,t),D=n[0],L=n[1]):(m(n,-f,f,t),D=-(L=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)m(n[0],-f,-1,t),m(n[1],1,f,t),M=n[0],B=n[1];else{if(m(n,-f,f,t),!n)throw Error(s+t+" cannot be zero: "+n);M=-(B=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(s+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!n,Error(s+"crypto unavailable");U=n}else U=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(n=e[t],0,9,t),_=n),e.hasOwnProperty(t="POW_PRECISION")&&(m(n=e[t],0,f,t),j=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(s+t+" not an object: "+n);q=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(s+t+" invalid: "+n);H="0123456789"==n.slice(0,10),V=n}}return{DECIMAL_PLACES:R,ROUNDING_MODE:N,EXPONENTIAL_AT:[D,L],RANGE:[M,B],CRYPTO:U,MODULO_MODE:_,POW_PRECISION:j,FORMAT:q,ALPHABET:V}},K.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!K.DEBUG)return!0;var t,n,r=e.c,o=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===a||-1===a)&&o>=-f&&o<=f&&o===i(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break e}if((t=(o+1)%c)<1&&(t+=c),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=u||n!==i(n))break e;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===a||1===a||-1===a))return!0;throw Error(s+"Invalid BigNumber: "+e)},K.maximum=K.max=function(){return G(arguments,O.lt)},K.minimum=K.min=function(){return G(arguments,O.gt)},K.random=(b=9007199254740992,E=Math.random()*b&2097151?function(){return i(Math.random()*b)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,a,u,l=0,p=[],g=new K(F);if(null==e?e=R:m(e,0,f),a=o(e/c),U)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(u=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(p.push(u%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw U=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(u=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(p.push(u%1e14),l+=7);l=a/7}if(!U)for(;l<a;)(u=E())<9e15&&(p[l++]=u%1e14);for(a=p[--l],e%=c,a&&e&&(u=d[c-e],p[l]=i(a/u)*u);0===p[l];p.pop(),l--);if(l<0)p=[r=0];else{for(r=-1;0===p[0];p.splice(0,1),r-=c);for(l=1,u=p[0];u>=10;u/=10,l++);l<c&&(r-=c-l)}return g.e=r,g.c=p,g}),K.sum=function(){for(var e=1,t=arguments,n=new K(t[0]);e<t.length;)n=n.plus(t[e++]);return n},A=function(){var e="0123456789";function t(e,t,n,r){for(var o,i,s=[0],a=0,u=e.length;a<u;){for(i=s.length;i--;s[i]*=t);for(s[0]+=r.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>n-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/n|0,s[o]%=n)}return s.reverse()}return function(r,o,i,s,a){var u,c,l,d,p,f,g,y,m=r.indexOf("."),v=R,S=N;for(m>=0&&(d=j,j=0,r=r.replace(".",""),f=(y=new K(o)).pow(r.length-m),j=d,y.c=t(w(h(f.c),f.e,"0"),10,i,e),y.e=y.c.length),l=d=(g=t(r,o,i,a?(u=V,e):(u=e,V))).length;0==g[--d];g.pop());if(!g[0])return u.charAt(0);if(m<0?--l:(f.c=g,f.e=l,f.s=s,g=(f=n(f,y,v,S,i)).c,p=f.r,l=f.e),m=g[c=l+v+1],d=i/2,p=p||c<0||null!=g[c+1],p=S<4?(null!=m||p)&&(0==S||S==(f.s<0?3:2)):m>d||m==d&&(4==S||p||6==S&&1&g[c-1]||S==(f.s<0?8:7)),c<1||!g[0])r=p?w(u.charAt(1),-v,u.charAt(0)):u.charAt(0);else{if(g.length=c,p)for(--i;++g[--c]>i;)g[c]=0,c||(++l,g=[1].concat(g));for(d=g.length;!g[--d];);for(m=0,r="";m<=d;r+=u.charAt(g[m++]));r=w(r,l,u.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,o,i,s,a=0,u=e.length,c=t%p,l=t/p|0;for(e=e.slice();u--;)a=((o=c*(i=e[u]%p)+(r=l*i+(s=e[u]/p|0)*c)%p*p+a)/n|0)+(r/p|0)+l*s,e[u]=o%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,o,s,a,l){var d,p,f,h,y,m,v,S,w,A,T,b,E,k,x,P,I,C=r.s==o.s?1:-1,O=r.c,F=o.c;if(!(O&&O[0]&&F&&F[0]))return new K(r.s&&o.s&&(O?!F||O[0]!=F[0]:F)?O&&0==O[0]||!F?0*C:C/0:NaN);for(w=(S=new K(C)).c=[],C=s+(p=r.e-o.e)+1,l||(l=u,p=g(r.e/c)-g(o.e/c),C=C/c|0),f=0;F[f]==(O[f]||0);f++);if(F[f]>(O[f]||0)&&p--,C<0)w.push(1),h=!0;else{for(k=O.length,P=F.length,f=0,C+=2,(y=i(l/(F[0]+1)))>1&&(F=e(F,y,l),O=e(O,y,l),P=F.length,k=O.length),E=P,T=(A=O.slice(0,P)).length;T<P;A[T++]=0);I=F.slice(),I=[0].concat(I),x=F[0],F[1]>=l/2&&x++;do{if(y=0,(d=t(F,A,P,T))<0){if(b=A[0],P!=T&&(b=b*l+(A[1]||0)),(y=i(b/x))>1)for(y>=l&&(y=l-1),v=(m=e(F,y,l)).length,T=A.length;1==t(m,A,v,T);)y--,n(m,P<v?I:F,v,l),v=m.length,d=1;else 0==y&&(d=y=1),v=(m=F.slice()).length;if(v<T&&(m=[0].concat(m)),n(A,m,T,l),T=A.length,-1==d)for(;t(F,A,P,T)<1;)y++,n(A,P<T?I:F,T,l),T=A.length}else 0===d&&(y++,A=[0]);w[f++]=y,A[0]?A[T++]=O[E]||0:(A=[O[E]],T=1)}while((E++<k||null!=A[0])&&C--);h=null!=A[0],w[0]||w.splice(0,1)}if(l==u){for(f=1,C=w[0];C>=10;C/=10,f++);z(S,s+(S.e=f+p*c-1)+1,a,h)}else S.e=p,S.r=+h;return S}}(),k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,P=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,n,r){var o,i=n?t:t.replace(C,"");if(I.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(k,(function(e,t,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?e:t})),r&&(o=r,i=i.replace(x,"$1").replace(P,"0.$1")),t!=i))return new K(i,o);if(K.DEBUG)throw Error(s+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},O.absoluteValue=O.abs=function(){var e=new K(this);return e.s<0&&(e.s=1),e},O.comparedTo=function(e,t){return y(this,new K(e,t))},O.decimalPlaces=O.dp=function(e,t){var n,r,o,i=this;if(null!=e)return m(e,0,f),null==t?t=N:m(t,0,8),z(new K(i),e+i.e+1,t);if(!(n=i.c))return null;if(r=((o=n.length-1)-g(this.e/c))*c,o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},O.dividedBy=O.div=function(e,t){return n(this,new K(e,t),R,N)},O.dividedToIntegerBy=O.idiv=function(e,t){return n(this,new K(e,t),0,1)},O.exponentiatedBy=O.pow=function(e,t){var n,r,a,u,l,d,p,f,g=this;if((e=new K(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+$(e));if(null!=t&&(t=new K(t)),l=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return f=new K(Math.pow(+$(g),l?2-v(e):+$(e))),t?f.mod(t):f;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new K(NaN);(r=!d&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||l&&g.c[1]>=24e7:g.c[0]<8e13||l&&g.c[0]<=9999975e7)))return u=g.s<0&&v(e)?-0:0,g.e>-1&&(u=1/u),new K(d?1/u:u);j&&(u=o(j/c+2))}for(l?(n=new K(.5),d&&(e.s=1),p=v(e)):p=(a=Math.abs(+$(e)))%2,f=new K(F);;){if(p){if(!(f=f.times(g)).c)break;u?f.c.length>u&&(f.c.length=u):r&&(f=f.mod(t))}if(a){if(0===(a=i(a/2)))break;p=a%2}else if(z(e=e.times(n),e.e+1,1),e.e>14)p=v(e);else{if(0===(a=+$(e)))break;p=a%2}g=g.times(g),u?g.c&&g.c.length>u&&(g.c.length=u):r&&(g=g.mod(t))}return r?f:(d&&(f=F.div(f)),t?f.mod(t):u?z(f,j,N,undefined):f)},O.integerValue=function(e){var t=new K(this);return null==e?e=N:m(e,0,8),z(t,t.e+1,e)},O.isEqualTo=O.eq=function(e,t){return 0===y(this,new K(e,t))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(e,t){return y(this,new K(e,t))>0},O.isGreaterThanOrEqualTo=O.gte=function(e,t){return 1===(t=y(this,new K(e,t)))||0===t},O.isInteger=function(){return!!this.c&&g(this.e/c)>this.c.length-2},O.isLessThan=O.lt=function(e,t){return y(this,new K(e,t))<0},O.isLessThanOrEqualTo=O.lte=function(e,t){return-1===(t=y(this,new K(e,t)))||0===t},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(e,t){var n,r,o,i,s=this,a=s.s;if(t=(e=new K(e,t)).s,!a||!t)return new K(NaN);if(a!=t)return e.s=-t,s.plus(e);var l=s.e/c,d=e.e/c,p=s.c,f=e.c;if(!l||!d){if(!p||!f)return p?(e.s=-t,e):new K(f?s:NaN);if(!p[0]||!f[0])return f[0]?(e.s=-t,e):new K(p[0]?s:3==N?-0:0)}if(l=g(l),d=g(d),p=p.slice(),a=l-d){for((i=a<0)?(a=-a,o=p):(d=l,o=f),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(r=(i=(a=p.length)<(t=f.length))?a:t,a=t=0;t<r;t++)if(p[t]!=f[t]){i=p[t]<f[t];break}if(i&&(o=p,p=f,f=o,e.s=-e.s),(t=(r=f.length)-(n=p.length))>0)for(;t--;p[n++]=0);for(t=u-1;r>a;){if(p[--r]<f[r]){for(n=r;n&&!p[--n];p[n]=t);--p[n],p[r]+=u}p[r]-=f[r]}for(;0==p[0];p.splice(0,1),--d);return p[0]?W(e,p,d):(e.s=3==N?-1:1,e.c=[e.e=0],e)},O.modulo=O.mod=function(e,t){var r,o,i=this;return e=new K(e,t),!i.c||!e.s||e.c&&!e.c[0]?new K(NaN):!e.c||i.c&&!i.c[0]?new K(i):(9==_?(o=e.s,e.s=1,r=n(i,e,0,3),e.s=o,r.s*=o):r=n(i,e,0,_),(e=i.minus(r.times(e))).c[0]||1!=_||(e.s=i.s),e)},O.multipliedBy=O.times=function(e,t){var n,r,o,i,s,a,l,d,f,h,y,m,v,S,w,A=this,T=A.c,b=(e=new K(e,t)).c;if(!(T&&b&&T[0]&&b[0]))return!A.s||!e.s||T&&!T[0]&&!b||b&&!b[0]&&!T?e.c=e.e=e.s=null:(e.s*=A.s,T&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=g(A.e/c)+g(e.e/c),e.s*=A.s,(l=T.length)<(h=b.length)&&(v=T,T=b,b=v,o=l,l=h,h=o),o=l+h,v=[];o--;v.push(0));for(S=u,w=p,o=h;--o>=0;){for(n=0,y=b[o]%w,m=b[o]/w|0,i=o+(s=l);i>o;)n=((d=y*(d=T[--s]%w)+(a=m*d+(f=T[s]/w|0)*y)%w*w+v[i]+n)/S|0)+(a/w|0)+m*f,v[i--]=d%S;v[i]=n}return n?++r:v.splice(0,1),W(e,v,r)},O.negated=function(){var e=new K(this);return e.s=-e.s||null,e},O.plus=function(e,t){var n,r=this,o=r.s;if(t=(e=new K(e,t)).s,!o||!t)return new K(NaN);if(o!=t)return e.s=-t,r.minus(e);var i=r.e/c,s=e.e/c,a=r.c,l=e.c;if(!i||!s){if(!a||!l)return new K(o/0);if(!a[0]||!l[0])return l[0]?e:new K(a[0]?r:0*o)}if(i=g(i),s=g(s),a=a.slice(),o=i-s){for(o>0?(s=i,n=l):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(t=l.length)<0&&(n=l,l=a,a=n,t=o),o=0;t;)o=(a[--t]=a[t]+l[t]+o)/u|0,a[t]=u===a[t]?0:a[t]%u;return o&&(a=[o].concat(a),++s),W(e,a,s)},O.precision=O.sd=function(e,t){var n,r,o,i=this;if(null!=e&&e!==!!e)return m(e,1,f),null==t?t=N:m(t,0,8),z(new K(i),e,t);if(!(n=i.c))return null;if(r=(o=n.length-1)*c+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return e&&i.e+1>r&&(r=i.e+1),r},O.shiftedBy=function(e){return m(e,-l,l),this.times("1e"+e)},O.squareRoot=O.sqrt=function(){var e,t,r,o,i,s=this,a=s.c,u=s.s,c=s.e,l=R+4,d=new K("0.5");if(1!==u||!a||!a[0])return new K(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+$(s)))||u==1/0?(((t=h(a)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=g((c+1)/2)-(c<0||c%2),r=new K(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new K(u+""),r.c[0])for((u=(c=r.e)+l)<3&&(u=0);;)if(i=r,r=d.times(i.plus(n(s,i,l,1))),h(i.c).slice(0,u)===(t=h(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(r,r.e+R+2,1),e=!r.times(r).eq(s));break}if(!o&&(z(i,i.e+R+2,0),i.times(i).eq(s))){r=i;break}l+=4,u+=4,o=1}return z(r,r.e+R+1,N,e)},O.toExponential=function(e,t){return null!=e&&(m(e,0,f),e++),Q(this,e,t,1)},O.toFixed=function(e,t){return null!=e&&(m(e,0,f),e=e+this.e+1),Q(this,e,t)},O.toFormat=function(e,t,n){var r,o=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=q;else if("object"!=typeof n)throw Error(s+"Argument not an object: "+n);if(r=o.toFixed(e,t),o.c){var i,a=r.split("."),u=+n.groupSize,c=+n.secondaryGroupSize,l=n.groupSeparator||"",d=a[0],p=a[1],f=o.s<0,g=f?d.slice(1):d,h=g.length;if(c&&(i=u,u=c,c=i,h-=i),u>0&&h>0){for(i=h%u||u,d=g.substr(0,i);i<h;i+=u)d+=l+g.substr(i,u);c>0&&(d+=l+g.slice(i)),f&&(d="-"+d)}r=p?d+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?p.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):p):d}return(n.prefix||"")+r+(n.suffix||"")},O.toFraction=function(e){var t,r,o,i,a,u,l,p,f,g,y,m,v=this,S=v.c;if(null!=e&&(!(l=new K(e)).isInteger()&&(l.c||1!==l.s)||l.lt(F)))throw Error(s+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+$(l));if(!S)return new K(v);for(t=new K(F),f=r=new K(F),o=p=new K(F),m=h(S),a=t.e=m.length-v.e-1,t.c[0]=d[(u=a%c)<0?c+u:u],e=!e||l.comparedTo(t)>0?a>0?t:f:l,u=B,B=1/0,l=new K(m),p.c[0]=0;g=n(l,t,0,1),1!=(i=r.plus(g.times(o))).comparedTo(e);)r=o,o=i,f=p.plus(g.times(i=f)),p=i,t=l.minus(g.times(i=t)),l=i;return i=n(e.minus(r),o,0,1),p=p.plus(i.times(f)),r=r.plus(i.times(o)),p.s=f.s=v.s,y=n(f,o,a*=2,N).minus(v).abs().comparedTo(n(p,r,a,N).minus(v).abs())<1?[f,o]:[p,r],B=u,y},O.toNumber=function(){return+$(this)},O.toPrecision=function(e,t){return null!=e&&m(e,1,f),Q(this,e,t,2)},O.toString=function(e){var t,n=this,r=n.s,o=n.e;return null===o?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=o<=D||o>=L?S(h(n.c),o):w(h(n.c),o,"0"):10===e&&H?t=w(h((n=z(new K(n),R+o+1,N)).c),n.e,"0"):(m(e,2,V.length,"Base"),t=A(w(h(n.c),o,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},O.valueOf=O.toJSON=function(){return $(this)},O._isBigNumber=!0,null!=t&&K.set(t),K}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define((function(){return n})):e.exports?e.exports=n:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=n)}(e.exports)})),s.register("hIkt0",(function(t,n){e(t.exports,"invalidateAllStakeAccountData",(function(){return o}));var r=s("7dNLn");const o=e=>()=>{e.invalidateQueries({predicate:e=>e.queryKey[0]===r.STAKE_ACCOUNTS_SCOPE||e.queryKey[0]===r.STAKE_ACTIVATION_DATA_SCOPE})}})),s.register("7dNLn",(function(t,n){e(t.exports,"STAKE_ACCOUNTS_SCOPE",(function(){return r})),e(t.exports,"STAKE_ACTIVATION_DATA_SCOPE",(function(){return o})),e(t.exports,"stakingQueryKeys",(function(){return i}));const r="stakeAccounts",o="stakeActivationData",i={signatureStatus:e=>["signatureStatus",{txSignature:e}],stakeAccounts:e=>[r,e],stakeAccountMinBalance:()=>["stakeAccountMinBalance"],stakeActivationData:e=>[o,{publicKey:e}],stakeRewardsHistory:e=>["stakeRewardsHistory",{publicKey:e}],stakeApy:()=>["stakeApy"],recommendedValidators:()=>["recommendedValidators"],validatorInfo:()=>["validatorInfo"],voteAccounts:()=>["voteAccounts"]}})),s.register("kAm35",(function(t,n){e(t.exports,"recommendedValidatorSorter",(function(){return r}));const r=e=>(t,n)=>{const r=e.indexOf(t.voteAccountPubkey),o=e.indexOf(n.voteAccountPubkey);return(r>-1?r:1/0)-(o>-1?o:1/0)}})),s.register("9TG0W",(function(t,n){e(t.exports,"voteAccountSorter",(function(){return o}));const r=(e,t)=>e+t[1],o=(e,t)=>{if(e.commission>50||t.commission>50)return e.commission-t.commission;const n=e.epochCredits.reduce(r,0)*(1-e.commission/100);return t.epochCredits.reduce(r,0)*(1-t.commission/100)-n}})),s.register("6fWI5",(function(t,n){e(t.exports,"delegateStake",(function(){return g}),(function(e){return g=e})),e(t.exports,"useDelegateStake",(function(){return h}),(function(e){return h=e}));var r=s("iOvk1"),o=s("43063"),i=s("hMVEP"),a=s("csW2r"),u=s("7gANb"),c=s("9W7fs"),l=s("bQvNK"),d=s("3vaB1");s("9OqWg");var p=s("hIkt0"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function g({stakePubkey:e,authorizedPubkey:t,votePubkey:n}){return i.StakeProgram.delegate({stakePubkey:e,authorizedPubkey:t,votePubkey:n})}const h=(e,t,n,s,h)=>{const{t:y}=(0,o.useTranslation)(),{mutateAsync:m}=e.useSignAndSendSolanaTransactionAsync(t);return(0,c.useMutation)({mutationFn:({accountIdentifier:e,senderAddress:n,stakePubkey:o,authorizedPubkey:a,votePubkey:c})=>f(void 0,void 0,void 0,(function*(){if(!n)throw d.MissingSenderAddressError;const{chainId:l,address:p}=n,f=g({stakePubkey:o,authorizedPubkey:a,votePubkey:c}),v=yield s.addPriorityFee(f,{connection:t}),S={ownerAddress:null!=p?p:"",chainID:l,data:{signature:""},type:u.PendingTransactionType.DelegateStake,display:{summary:{topLeft:{label:y("transactionsPendingDelegatingStake")}}}};h.approved({chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(l),type:"delegate"});const w=yield m({accountIdentifier:e,feePayer:new(0,i.PublicKey)(p),transaction:v,pendingTransactionInput:S});return h.submittedTransaction(w,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(l),method:"signAndSendTransaction"}),{chainID:l,id:null!=w?w:""}})),onSuccess:e=>{(0,l.waitForTransactionConfirmationAsync)(t,e.id).then((()=>{h.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"confirmed"}}),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{h.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"error"}}),a.telemetry.captureError(t,a.FeatureTag.Staking)}))}})}})),s.register("lEqf0",(function(t,n){e(t.exports,"useDeactivateStake",(function(){return g}),(function(e){return g=e}));var r=s("iOvk1"),o=s("43063"),i=s("hMVEP"),a=s("csW2r"),u=s("7gANb"),c=s("9W7fs"),l=s("bQvNK"),d=s("3vaB1");s("9OqWg");var p=s("hIkt0"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const g=(e,t,n,s,g)=>{const{t:h}=(0,o.useTranslation)(),{mutateAsync:y}=e.useSignAndSendSolanaTransactionAsync(t);return(0,c.useMutation)({mutationFn:({accountIdentifier:e,senderAddress:n,stakePubkey:o,authorizedPubkey:a})=>f(void 0,void 0,void 0,(function*(){if(!n)throw d.MissingSenderAddressError;const{chainId:c,address:l}=n,p=function({stakePubkey:e,authorizedPubkey:t,transaction:n=new(0,i.Transaction)}){return n.add(i.StakeProgram.deactivate({stakePubkey:e,authorizedPubkey:t})),n}({accountIdentifier:e,senderAddress:n,stakePubkey:o,authorizedPubkey:a}),f=yield s.addPriorityFee(p,{connection:t}),m={ownerAddress:null!=l?l:"",chainID:c,data:{signature:""},type:u.PendingTransactionType.DeactivateStake,display:{summary:{topLeft:{label:h("transactionsPendingDeactivatingStake")}}}};g.approved({chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(c),type:"undelegate"});const v=yield y({accountIdentifier:e,feePayer:new(0,i.PublicKey)(l),transaction:f,pendingTransactionInput:m});return g.submittedTransaction(v,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(c),method:"signAndSendTransaction"}),g.deactivateStake(),{chainID:c,id:null!=v?v:""}})),onSuccess:e=>{(0,l.waitForTransactionConfirmationAsync)(t,e.id).then((()=>{g.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"confirmed"}}),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{g.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"error"}}),a.telemetry.captureError(t,a.FeatureTag.Staking)}))}})}})),s.register("48Z1Q",(function(t,n){e(t.exports,"useRecommendedValidators",(function(){return l}),(function(e){return l=e}));var r=s("csW2r"),o=s("5ekp2"),i=s("5u9SD"),a=s("7dNLn"),u=s("kX9T3"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const l=e=>{const t=a.stakingQueryKeys.recommendedValidators();return(0,o.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getRecommendedValidators)(e())}))},onError(e){r.telemetry.captureError(e,r.FeatureTag.Staking)}})}})),s.register("5u9SD",(function(n,r){e(n.exports,"getRecommendedValidators",(function(){return c}),(function(e){return c=e}));var o=s("1LpD3"),i=s("jjhma"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=new Error("Failed to fetch recommended staking validators.");function c(e){return a(this,void 0,void 0,(function*(){try{const n=yield t(o)(`${e}/staking/v1/recommended`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw u;const r=yield n.json();return i.RecommendedValidators.parse(r).validators}catch(e){throw u}}))}})),s.register("jjhma",(function(t,n){e(t.exports,"StakeApy",(function(){return a})),e(t.exports,"RecommendedValidators",(function(){return u})),e(t.exports,"StakingRewardsHistory",(function(){return l}));var r,o,i=s("7XqVB");(o=r||(r={})).Initialized="initialized",o.Delegated="delegated";const a=i.z.object({apy:i.z.number()}),u=i.z.object({validators:i.z.array(i.z.string())}),c=i.z.object({epoch:i.z.number(),effectiveSlot:i.z.number(),amount:i.z.number(),postBalance:i.z.number(),percentChange:i.z.number(),apr:i.z.number(),timestamp:i.z.number()}),l=i.z.object({items:i.z.array(c)})})),s.register("kX9T3",(function(t,n){e(t.exports,"CacheTime",(function(){return o})),e(t.exports,"StaleTime",(function(){return a}));var r=s("RVqnc");var o,i,a,u;(i=o||(o={}))[i.Always=1/0]="Always",i[i.Short=(0,r.toMilliseconds)({days:1})]="Short",i[i.Medium=(0,r.toMilliseconds)({days:3})]="Medium",i[i.Long=(0,r.toMilliseconds)({days:7})]="Long",(u=a||(a={}))[u.Immediate=0]="Immediate",u[u.Short=(0,r.toMilliseconds)({minutes:1})]="Short",u[u.Medium=(0,r.toMilliseconds)({minutes:2.5})]="Medium",u[u.Long=(0,r.toMilliseconds)({minutes:5})]="Long",u[u.Never=1/0]="Never"})),s.register("39pK6",(function(t,n){e(t.exports,"useSignatureStatus",(function(){return c}),(function(e){return c=e}));var r=s("5ekp2"),o=s("3vaB1"),i=s("7dNLn"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t)=>a(void 0,void 0,void 0,(function*(){return yield e.getSignatureStatus(t,{searchTransactionHistory:!0})}));function c(e,t,n,s){var c;const l=i.stakingQueryKeys.signatureStatus(s),d=e.getQueryData(l),p=null===(c=null==d?void 0:d.value)||void 0===c?void 0:c.confirmationStatus,f=!!s&&"finalized"!==p;return(0,r.useQuery)({queryKey:l,queryFn:()=>a(this,void 0,void 0,(function*(){if(!s)throw o.MissingConfirmationSignatureError;return yield u(t,s)})),enabled:f,refetchInterval:n})}})),s.register("gqfgW",(function(t,n){e(t.exports,"useStakeAccountMinBalance",(function(){return c}),(function(e){return c=e}));var r=s("hMVEP"),o=s("5ekp2"),i=s("7dNLn"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=e=>()=>a(void 0,void 0,void 0,(function*(){return yield e.getMinimumBalanceForRentExemption(r.StakeProgram.space)}));function c(e){const t=i.stakingQueryKeys.stakeAccountMinBalance(),n=u(e);return(0,o.useQuery)({queryKey:t,queryFn:n,placeholderData:0})}})),s.register("3cJgq",(function(t,n){e(t.exports,"useStakeAccounts",(function(){return l}),(function(e){return l=e}));var r=s("hMVEP"),o=s("csW2r"),i=s("5ekp2"),a=s("7dNLn"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>u(void 0,void 0,void 0,(function*(){const n=[];t.ownerPublicKey&&n.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&n.push({memcmp:{offset:124,bytes:t.voteAccountPublicKey}});const i=yield e.getParsedProgramAccounts(r.StakeProgram.programId,{filters:n});let s=[];if(t.fetchInflationRewards)try{s=yield((e,t,n,r="confirmed")=>u(void 0,void 0,void 0,(function*(){return yield e.getInflationReward(t,n,r)})))(e,i.map((({pubkey:e})=>e)))}catch(e){const t=e;o.telemetry.captureError(t,o.FeatureTag.Staking)}return i.map(((e,t)=>{var n;return Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,inflationReward:null===(n=s[t])||void 0===n?void 0:n.amount},e.account.data.parsed)}))}));function l(e,t){const n=a.stakingQueryKeys.stakeAccounts(t);return(0,i.useQuery)({queryKey:n,queryFn:()=>c(e,{ownerPublicKey:t,fetchInflationRewards:!0}),placeholderData:[]})}})),s.register("d5USZ",(function(t,n){e(t.exports,"useStakeActivationData",(function(){return l}),(function(e){return l=e}));var r=s("hMVEP"),o=s("5ekp2"),i=s("3vaB1"),a=s("7dNLn"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>e.getStakeActivation(new(0,r.PublicKey)(t));function l(e,t){const n=a.stakingQueryKeys.stakeActivationData(t),r=!!t;return(0,o.useQuery)({queryKey:n,queryFn:()=>u(this,void 0,void 0,(function*(){if(!t)throw i.MissingPublicKeyError;return yield c(e,t)})),enabled:r})}})),s.register("40bAw",(function(t,n){e(t.exports,"useStakeApy",(function(){return l}),(function(e){return l=e}));var r=s("csW2r"),o=s("5ekp2"),i=s("9Kma9"),a=s("7dNLn"),u=s("kX9T3"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const l=e=>{const t=a.stakingQueryKeys.stakeApy();return(0,o.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getStakingApy)(e())}))},onError(e){r.telemetry.captureError(e,r.FeatureTag.Staking)}})}})),s.register("9Kma9",(function(n,r){e(n.exports,"getStakingApy",(function(){return c}),(function(e){return c=e}));var o=s("1LpD3"),i=s("jjhma"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=new Error("Failed to fetch staking APY");function c(e){return a(this,void 0,void 0,(function*(){try{const n=yield t(o)(`${e}/staking/v1/apy`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw u;const r=yield n.json();return i.StakeApy.parse(r).apy}catch(e){throw u}}))}})),s.register("8BkVZ",(function(t,n){e(t.exports,"useStakeRewardsHistory",(function(){return l}),(function(e){return l=e}));var r=s("csW2r"),o=s("wGjeD"),i=s("1xomf"),a=s("7dNLn"),u=s("kX9T3"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function l(e,t,n,s=2){const l=a.stakingQueryKeys.stakeRewardsHistory(t);return(0,o.useInfiniteQuery)({retry:s,enabled:!!t&&!!n,queryKey:l,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn:({pageParam:r})=>c(this,void 0,void 0,(function*(){const o=r?{address:t,chainId:n,epoch:r}:{address:t,chainId:n};return(0,i.getStakingRewardsHistory)(e(),o)})),getNextPageParam:({items:e})=>e.length?e[e.length-1].epoch:null,onError:e=>r.telemetry.captureError(e,r.FeatureTag.Staking)})}})),s.register("1xomf",(function(n,r){e(n.exports,"getStakingRewardsHistory",(function(){return c}),(function(e){return c=e}));var o=s("1LpD3"),i=s("jjhma"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=new Error("Failed to fetch staking rewards history");function c(e,n){return a(this,void 0,void 0,(function*(){let r;try{r=yield t(o)(`${e}/staking/v1/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(e){throw u}if(!r.ok)throw u;const s=yield r.json(),a=i.StakingRewardsHistory.safeParse(s);if(a.success)return a.data;throw u}))}})),s.register("kETlb",(function(t,n){e(t.exports,"useValidatorInfo",(function(){return c}),(function(e){return c=e}));var r=s("5ekp2"),o=s("f5UU6"),i=s("7dNLn"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=e=>()=>a(void 0,void 0,void 0,(function*(){return(yield e.getParsedProgramAccounts(o.CONFIG_PROGRAM_ID)).reduce(((e,t)=>{var n;if("validatorInfo"!==(null===(n=t.account.data.parsed)||void 0===n?void 0:n.type))return e;const r=t.pubkey.toString(),o=t.account.data.parsed.info.keys,[,i]=o;if(!i.signer)return e;const s=i.pubkey,a=t.account.data.parsed.info.configData;return e.push({identityPubkey:s,infoPubkey:r,info:a}),e}),[])}));function c(e){const t=i.stakingQueryKeys.validatorInfo(),n=u(e);return(0,r.useQuery)({queryKey:t,queryFn:n,placeholderData:[]})}})),s.register("f5UU6",(function(t,n){e(t.exports,"CONFIG_PROGRAM_ID",(function(){return r}));const r=new(0,s("hMVEP").PublicKey)("Config1111111111111111111111111111111111111")})),s.register("FEhzp",(function(t,n){e(t.exports,"useValidators",(function(){return c}),(function(e){return c=e}));var r=s("29o0l"),o=s("9TG0W"),i=s("kETlb"),a=s("cJRQS"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function c(e){const{isFetched:t,isFetching:n,isLoading:s,isSuccess:c,isError:l,dataUpdatedAt:d,errorUpdatedAt:p,error:f,refetch:g,data:h}=(0,a.useVoteAccounts)(e),y=Math.max(d,p),{isFetched:m,isFetching:v,isLoading:S,isSuccess:w,isError:A,dataUpdatedAt:T,errorUpdatedAt:b,error:E,refetch:k,data:x}=(0,i.useValidatorInfo)(e),P=Math.max(T,b),I=Math.max(y,P),C=t&&m,O=n||v,F=c||w,R=l||A,N=f||E,D=s||S,L=(0,r.useCallback)((()=>u(this,void 0,void 0,(function*(){Promise.all([g(),k()])}))),[k,g]);return{results:(0,r.useMemo)((()=>{if(!h)return[];if(!x)return[];h.sort(o.voteAccountSorter);const e=new Map(h.map((e=>[e.identityPubkey,e]))),t=new Map(x.map((e=>[e.identityPubkey,e]))),n=[];for(const[r,o]of e){const e=t.get(r);n.push(Object.assign(Object.assign({},o),e))}return n}),[x,h]),dataUpdatedAt:I,error:N,isSuccess:F,isError:R,isFetched:C,isFetching:O,isLoading:D,refetch:L}}})),s.register("cJRQS",(function(t,n){e(t.exports,"useVoteAccounts",(function(){return u}),(function(e){return u=e}));var r=s("5ekp2"),o=s("7dNLn"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=e=>i(void 0,void 0,void 0,(function*(){const t=yield e.getVoteAccounts();return[...t.current,...t.delinquent].map((e=>({identityPubkey:e.nodePubkey,voteAccountPubkey:e.votePubkey,commission:e.commission,lastVote:e.lastVote,epochCredits:e.epochCredits,activatedStake:e.activatedStake}))).filter((e=>e.commission<99))}));function u(e){const t=o.stakingQueryKeys.voteAccounts();return(0,r.useQuery)({queryKey:t,queryFn:()=>i(this,void 0,void 0,(function*(){return a(e)})),placeholderData:[]})}})),s.register("efxv4",(function(t,n){e(t.exports,"useWithdrawStake",(function(){return g}),(function(e){return g=e}));var r=s("iOvk1"),o=s("43063"),i=s("hMVEP"),a=s("csW2r"),u=s("7gANb"),c=s("9W7fs"),l=s("bQvNK"),d=s("3vaB1");s("9OqWg");var p=s("hIkt0"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const g=(e,t,n,s,g)=>{const{t:h}=(0,o.useTranslation)(),{mutateAsync:y}=e.useSignAndSendSolanaTransactionAsync(t);return(0,c.useMutation)({mutationFn:({accountIdentifier:e,senderAddress:n,stakePubkey:o,authorizedPubkey:a,amount:c})=>f(void 0,void 0,void 0,(function*(){if(!n)throw d.MissingSenderAddressError;const{chainId:l,address:p}=n,f=function({stakePubkey:e,authorizedPubkey:t,amount:n,transaction:r=new(0,i.Transaction)}){return r.add(i.StakeProgram.withdraw({stakePubkey:e,authorizedPubkey:t,toPubkey:t,lamports:n})),r}({stakePubkey:o,authorizedPubkey:a,amount:c}),m=yield s.addPriorityFee(f,{connection:t}),v={ownerAddress:null!=p?p:"",chainID:l,data:{signature:""},type:u.PendingTransactionType.WithdrawStake,display:{summary:{topLeft:{label:h("transactionsPendingWithdrawingStake")}}}};g.approved({chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(l),type:"withdraw"});const S=yield y({accountIdentifier:e,feePayer:new(0,i.PublicKey)(p),transaction:m,pendingTransactionInput:v});return g.submittedTransaction(S,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(l),method:"signAndSendTransaction"}),{chainID:l,id:null!=S?S:""}})),onSuccess:e=>{(0,l.waitForTransactionConfirmationAsync)(t,e.id).then((()=>{g.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"confirmed"}}),(0,p.invalidateAllStakeAccountData)(n)()})).catch((t=>{g.transactionStatus(e.id,{chainType:r.ChainType.Solana,chainName:r.Chain.Solana,networkId:(0,r.solanaCAIPChainIDToSolanaChainID)(e.chainID),status:{type:"error"}}),a.telemetry.captureError(t,a.FeatureTag.Staking)}))}})}})),s.register("kram9",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return s("dMwYe").useFeeBreakdown})),e(t.exports,"useFetchSwapBuyAssetsList",(function(){return s("eFZiv").useFetchSwapBuyAssetsList})),e(t.exports,"useInitialAssets",(function(){return s("fxXvK").useInitialAssets})),e(t.exports,"useResetSwapperOnMount",(function(){return s("ezPKD").useResetSwapperOnMount})),e(t.exports,"useSubscribeSwapQuoteToQueries",(function(){return s("bFhoc").useSubscribeSwapQuoteToQueries})),e(t.exports,"useSwapBuyAssetProps",(function(){return s("hVvmZ").useSwapBuyAssetProps})),e(t.exports,"useSwapCardProps",(function(){return s("dtI9r").useSwapCardProps})),e(t.exports,"useSwapConfirmationProps",(function(){return s("8vNNq").useSwapConfirmationProps})),e(t.exports,"useSwapProvidersProps",(function(){return s("lCzzn").useSwapProvidersProps})),e(t.exports,"useSwapReviewButtonProps",(function(){return s("9PpHT").useSwapReviewButtonProps})),e(t.exports,"useSwapReviewProps",(function(){return s("iTLyO").useSwapReviewProps})),e(t.exports,"useSwapSellAssetProps",(function(){return s("6M54M").useSwapSellAssetProps})),e(t.exports,"useSwapSellAssetsList",(function(){return s("eOCBr").useSwapSellAssetsList})),e(t.exports,"useSwapSetBuyAsset",(function(){return s("4MMT9").useSwapSetBuyAsset})),e(t.exports,"useSwapSetSellAsset",(function(){return s("iA6sm").useSwapSetSellAsset})),e(t.exports,"useSwapperStore",(function(){return s("iTQ0V").useSwapperStore})),e(t.exports,"FUSE_SWAP_ASSET_SEARCH_CONFIG",(function(){return s("2UOPE").FUSE_SWAP_ASSET_SEARCH_CONFIG})),e(t.exports,"PHANTOM_SUPPORT_SWAP_FAILED_URL",(function(){return s("2UOPE").PHANTOM_SUPPORT_SWAP_FAILED_URL})),e(t.exports,"SWAP_ASSET_SELECT_TOKEN_STANDARDS",(function(){return s("2UOPE").SWAP_ASSET_SELECT_TOKEN_STANDARDS})),e(t.exports,"extractUsdRate",(function(){return s("lDJ5X").extractUsdRate})),e(t.exports,"createSwapperHooks",(function(){return s("2e392").createSwapperHooks})),e(t.exports,"useMultichainSwapBuyAssetProps",(function(){return s("fPjP5").useSwapBuyAssetProps})),e(t.exports,"useMultichainSwapSetBuyAsset",(function(){return s("dkOnS").useSwapSetBuyAsset})),e(t.exports,"useMultichainSwapSetSellAsset",(function(){return s("cfA1B").useSwapSetSellAsset})),e(t.exports,"useMultichainFeeBreakdown",(function(){return s("gb4iB").useFeeBreakdown})),e(t.exports,"useMultichainQuote",(function(){return s("2Upmy").useQuote})),s("c6eRZ"),s("iTQ0V"),s("f2tU6"),s("2UOPE"),s("kvuQ4"),s("d0HjU");s("2e392"),s("fPjP5"),s("dkOnS"),s("cfA1B"),s("gb4iB"),s("2Upmy"),s("fQWxX"),s("iixDX"),s("kRqRr")})),s.register("c6eRZ",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return s("dMwYe").useFeeBreakdown})),e(t.exports,"useFetchSwapBuyAssetsList",(function(){return s("eFZiv").useFetchSwapBuyAssetsList})),e(t.exports,"useInitialAssets",(function(){return s("fxXvK").useInitialAssets})),e(t.exports,"useResetSwapperOnMount",(function(){return s("ezPKD").useResetSwapperOnMount})),e(t.exports,"useSubscribeSwapQuoteToQueries",(function(){return s("bFhoc").useSubscribeSwapQuoteToQueries})),e(t.exports,"useSwapBuyAssetProps",(function(){return s("hVvmZ").useSwapBuyAssetProps})),e(t.exports,"useSwapCardProps",(function(){return s("dtI9r").useSwapCardProps})),e(t.exports,"useSwapConfirmationProps",(function(){return s("8vNNq").useSwapConfirmationProps})),e(t.exports,"useSwapProvidersProps",(function(){return s("lCzzn").useSwapProvidersProps})),e(t.exports,"useSwapReviewButtonProps",(function(){return s("9PpHT").useSwapReviewButtonProps})),e(t.exports,"useSwapReviewProps",(function(){return s("iTLyO").useSwapReviewProps})),e(t.exports,"useSwapSellAssetProps",(function(){return s("6M54M").useSwapSellAssetProps})),e(t.exports,"useSwapSellAssetsList",(function(){return s("eOCBr").useSwapSellAssetsList})),e(t.exports,"useSwapSetBuyAsset",(function(){return s("4MMT9").useSwapSetBuyAsset})),e(t.exports,"useSwapSetSellAsset",(function(){return s("iA6sm").useSwapSetSellAsset}));s("lgcfo"),s("I4BHf"),s("dMwYe"),s("eFZiv"),s("dsDYC"),s("iqqDn"),s("fxXvK"),s("8IOCk"),s("4xLuU"),s("UWzy4"),s("iX5lP"),s("ezPKD"),s("bFhoc"),s("hVvmZ"),s("dtI9r"),s("8vNNq"),s("3pIvT"),s("lCzzn"),s("9PpHT"),s("iTLyO"),s("6M54M"),s("eOCBr"),s("4MMT9"),s("iA6sm"),s("h8AIo")})),s.register("lgcfo",(function(t,n){e(t.exports,"useAnalyticsPayload",(function(){return a}));var r=s("29o0l"),o=s("24hfq"),i=s("Nt4tV");function a({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:n,sellToken:o,buyAmount:s,sellAmount:a,phantomFee:d,priceImpact:p,provider:f}){return(0,r.useMemo)((()=>{if(t&&o){const r=c(s,t.decimals,e),g=c(a,o.decimals,n),h=l(r,g),y=u(d,t.decimals,e);return{data:{marketName:`${o.symbol}/${t.symbol}`,tradeDirection:"sell",swapSource:f,priceImpact:p,fromAssetSymbol:o.symbol,fromAssetAddress:o.mint,fromAssetAmount:(0,i.amountToUiAmount)(a,o.decimals),fromAssetUsdPrice:n,fromAssetUsdVolume:g,toAssetSymbol:t.symbol,toAssetAddress:t.mint,toAssetAmount:(0,i.amountToUiAmount)(s,t.decimals),toAssetUsdPrice:e,toAssetUsdVolume:r,totalUsdVolume:h,feeUsd:y}}}return{}}),[e,n,s,t,d,p,f,a,o])}const u=(e,t,n)=>n&&e>0?e/Math.pow(10,t)*n:0,c=(e,t,n)=>{if(n){const r=(0,i.amountToUiAmount)(e,t);return new(0,o.BigNumber)(r).times(new(0,o.BigNumber)(n)).toNumber()}},l=(e,t)=>t&&e?t>e?t:e:null!=t?t:e})),s.register("I4BHf",(function(t,n){e(t.exports,"useExchangeRate",(function(){return i}));var r=s("29o0l"),o=s("Nt4tV");function i(e,t,n){const[i,s]=(0,r.useState)(!1),a=(0,r.useCallback)((()=>s((e=>!e))),[]);return(0,r.useMemo)((()=>{let r=!1,s="";if(t&&n){const{buyToken:a,sellToken:u}=t,{buyAmount:c,sellAmount:l}=n,d=(0,o.amountToUiAmount)(c,a.decimals)/(0,o.amountToUiAmount)(l,u.decimals),p=`1 ${u.symbol} â‰ˆ ${(0,o.formatTokenAmount)(d)} ${a.symbol}`,f=`1 ${a.symbol} â‰ˆ ${(0,o.formatTokenAmount)(1/d)} ${u.symbol}`;r=Number(n.buyAmount)===e,s=i?f:p}return{isBestRate:r,rate:s,flip:a}}),[e,n,i,t,a])}})),s.register("dMwYe",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return c}));var r=s("43063"),o=s("29o0l"),i=s("Nt4tV"),a=s("azr2P"),u=s("iX5lP");function c(e,t){const{t:n}=(0,r.useTranslation)(),{currentQuote:s}=(0,u.useQuote)();return(0,o.useMemo)((()=>{if(s&&t){const{phantomFee:r,serumAccountDeposits:o,tokenAccountDeposits:u}=s.fees;return{networkFee:{label:n("swapQuoteSolanaNetwork"),value:e},tokenAccountFee:{label:n("swapQuoteOneTimeTokenAccount"),value:(0,a.formatFee)(u.amount,t)},serumAccountFee:{label:n("swapQuoteOneTimeSerumAccount"),value:(0,a.formatFee)(o.amount,t)},phantomFeePercent:{label:r.pct?n("swapQuoteFeeDisclaimer",{feePercentage:(0,i.formatPercentage)(r.pct)}):"",value:r.pct?`${r.pct}`:""}}}}),[s,e,t,n])}})),s.register("azr2P",(function(t,n){e(t.exports,"formatFee",(function(){return o}));var r=s("Nt4tV");function o(e,t){if(e<=0)return"";const n=(0,r.lamportsToSolana)(e);return(null==t?void 0:t.usd)?`${(0,r.formatDollarAmountExtended)(t.usd*n)}`:`${(0,r.formatTokenAmount)(n)} SOL`}})),s.register("iX5lP",(function(t,n){e(t.exports,"useQuote",(function(){return i}));var r=s("29o0l"),o=s("iTQ0V");function i(){var e,t;const n=(0,o.useSwapperStore)((e=>e.quote)),i=(0,o.useSwapperStore)((e=>e.hasNoRoutes)),s=(0,o.useSwapperStore)((e=>e.selectedProviderIndex)),a=(0,r.useMemo)((()=>n?n.quotes:[]),[n]),u=a[s];return{bestBuyAmount:parseInt(null!==(t=null===(e=a[0])||void 0===e?void 0:e.buyAmount)&&void 0!==t?t:0),currentQuote:u,hasNoRoutes:i,quote:n,quotes:a,selectedProviderIndex:s}}})),s.register("iTQ0V",(function(n,r){e(n.exports,"useSwapperStore",(function(){return a}));var o=s("gTwcH");const i={buyAsset:void 0,buyFungible:void 0,buyUsdValue:void 0,sellAsset:void 0,sellFungible:void 0,sellUsdValue:void 0,sellAmount:"",uiSellAmount:"",quote:void 0,multichainQuoteResponse:void 0,selectedProviderIndex:0,gasEstimation:void 0,isFetchingGasEstimation:!1,maxGasEstimation:void 0,quoteFetchIntervalToggle:!0,hasNoRoutes:!1,isFetchingQuote:!1},a=t(o)((e=>Object.assign(Object.assign({},i),{resetQuote:()=>e({quote:i.quote,multichainQuoteResponse:i.multichainQuoteResponse}),resetSwapper:()=>e({quote:i.quote,multichainQuoteResponse:i.multichainQuoteResponse,gasEstimation:i.gasEstimation,isFetchingGasEstimation:i.isFetchingGasEstimation,maxGasEstimation:i.maxGasEstimation,quoteFetchIntervalToggle:i.quoteFetchIntervalToggle,sellAmount:"",uiSellAmount:""}),setBuyAsset:t=>e({buyAsset:t}),setBuyFungible:t=>e({buyFungible:t}),setBuyUsdValue:t=>e({buyUsdValue:t}),setHasNoRoutes:t=>e({hasNoRoutes:t}),setIsFetchingQuote:t=>e({isFetchingQuote:t}),setQuote:t=>e({quote:t,hasNoRoutes:!1}),setMultichainQuoteResponse:t=>e({multichainQuoteResponse:t,hasNoRoutes:!1}),setSelectedProviderIndex:t=>e({selectedProviderIndex:t}),setGasEstimation:t=>e({gasEstimation:t}),setIsFetchingGasEstimation:t=>e({isFetchingGasEstimation:t}),setMaxGasEstimation:t=>e({maxGasEstimation:t}),setQuoteFetchIntervalToggle:t=>e({quoteFetchIntervalToggle:t}),setSellAmount:t=>e({sellAmount:t}),setSellUsdValue:t=>e({sellUsdValue:t}),setSellAsset:t=>e({sellAsset:t}),setSellFungible:t=>e({sellFungible:t}),setUiSellAmount:t=>e({uiSellAmount:t})})))})),s.register("eFZiv",(function(t,n){e(t.exports,"useFetchSwapBuyAssetsList",(function(){return p}),(function(e){return p=e}));var r=s("5ekp2"),o=s("9CoSy"),i=s("3YDVy"),a=s("2UOPE"),u=s("iTQ0V");s("f2tU6");var c=s("7NBkj"),l=s("7SmhG"),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function p(e,t){const{owner:n,cluster:s}=t,{data:p}=(0,i.useMintToAssetMap)(n,s),f=(0,u.useSwapperStore)((e=>e.sellAsset)),g=f&&"solana"!==f.type?f.data.mintPubKey:o.WRAPPED_SOLANA.address,h=!!g&&!!e,y=["fetch-swap-to-assets-list",g];return(0,r.useQuery)({enabled:h,queryKey:y,queryFn:function(){return d(this,void 0,void 0,(function*(){const e=yield(0,c.getSwapPairsAsync)([g]),t=[],r=e[g],{length:s}=r;for(let e=0;e<s;e++){const i=r[e],s=i.mint===o.WRAPPED_SOLANA.address&&a.SHOULD_UNWRAP_WRAPPED_SOL?"":i.mint;let u;const c=p.get(s),d=void 0!==c&&"spl-token"===c.type&&""!==c.data.pubkey,f=void 0!==c&&"solana"===c.type;u=d||f?c:(0,l.swapPairsAssetInfoToAsset)(i,n),u&&t.push(u)}return e?t.sort(i.assetSorter):[]}))}})}})),s.register("3YDVy",(function(t,n){e(t.exports,"SOLANA_STATIC_VALUES",(function(){return O}),(function(e){return O=e})),e(t.exports,"useLamportBalance",(function(){return F}),(function(e){return F=e})),e(t.exports,"useSPLTokenAccountsByStandard",(function(){return L}),(function(e){return L=e})),e(t.exports,"useSPLTokenPrices",(function(){return U}),(function(e){return U=e})),e(t.exports,"useFetchSPLTokenJSONMetadata",(function(){return q}),(function(e){return q=e})),e(t.exports,"parseMediaFromImage",(function(){return J}),(function(e){return J=e})),e(t.exports,"useSelectBestMedia",(function(){return ee}),(function(e){return ee=e})),e(t.exports,"useSelectCollectionMedia",(function(){return te}),(function(e){return te=e})),e(t.exports,"useBestCollectionName",(function(){return ne}),(function(e){return ne=e})),e(t.exports,"getImageThroughProxy",(function(){return oe}),(function(e){return oe=e})),e(t.exports,"getScaledImageURIExt",(function(){return ie}),(function(e){return ie=e})),e(t.exports,"assetKeyExtractor",(function(){return se}),(function(e){return se=e})),e(t.exports,"assetSorter",(function(){return ue}),(function(e){return ue=e})),e(t.exports,"getMintPubkeyFromAsset",(function(){return ce}),(function(e){return ce=e})),e(t.exports,"getTotalAssetsBalance",(function(){return le}),(function(e){return le=e})),e(t.exports,"useSPLAssets",(function(){return de}),(function(e){return de=e})),e(t.exports,"useAssetsAndSPLTokenList",(function(){return fe}),(function(e){return fe=e})),e(t.exports,"useMintToAssetMap",(function(){return he}),(function(e){return he=e}));var r=s("21aqi"),o=s("5slFC"),i=s("6ElgT"),a=s("56oyT"),u=s("hMVEP"),c=s("HlEsU"),l=s("RVqnc"),d=s("5ekp2"),p=s("7dHjq"),f=s("8tcqI"),g=s("29o0l"),h=s("16XMG"),y=s("9CoSy"),m=s("dY6gO"),v=s("hRUHU"),S=s("6tBWY"),w=s("kAjeg"),A=s("lvcyB"),T=s("jF6Pg"),b=s("Nt4tV"),E=s("7qsqs"),k=s("lAsdm"),x=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const P=f.Buffer.from("metadata"),I=i.METADATA_PROGRAM_ID.toBuffer(),C=(0,l.toMilliseconds)({minutes:1}),O={coingeckoId:"solana",decimals:9,logoURI:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL"};Object.assign(Object.assign({},O),{amount:"0",usd:0,usd24hChange:0});function F(e,t){return(0,d.useQuery)({enabled:""!==e,queryKey:["cluster",t,"owner",e,"lamport-balance"],refetchInterval:C,queryFn(){return x(this,void 0,void 0,(function*(){const n=(0,A.getRPCURLByCluster)(t),r=yield function(e,t){return x(this,void 0,void 0,(function*(){const n=yield fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"getBalance",params:[t,{commitment:"confirmed"}]})}),r=yield n.json();if("error"in r)throw console.error(r.error,t),new Error(r.error.message);return r.result.value.toString()}))}(n,e);return r}))},onSuccess(n){return x(this,void 0,void 0,(function*(){const r=(yield(0,E.getStorageValue)(c.StorageKeys.OwnerToClusterToLamportBalance))||{},o=r[e]||{};(0,E.setStorageValue)(c.StorageKeys.OwnerToClusterToLamportBalance,Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},o),{[t]:n})}))}))}})}const R=e=>{const t=P;return u.PublicKey.findProgramAddressSync([t,I,e.toBuffer()],i.METADATA_PROGRAM_ID)};function N(e,t){return x(this,void 0,void 0,(function*(){const n=new Map,{Metadata:r}=yield(0,i.getMetaplexFoundationDeps)(),o=t.map((t=>x(this,void 0,void 0,(function*(){const o=yield function(e,t){return x(this,void 0,void 0,(function*(){const n=yield fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"getMultipleAccounts",params:[t,{encoding:"base64",commitment:"confirmed"}]})}),r=yield n.json();if("error"in r)throw console.error(r.error),new Error(r.error.message);return r}))}(e,t);for(const e of o.result.value)if(e){const[t]=r.deserialize(f.Buffer.from(e.data[0],"base64"));n.set(t.mint.toString(),t)}}))));return yield Promise.all(o),n}))}const D="SPLTokenAccounts";function L(e,t){const n=(0,p.useQueryClient)();return(0,d.useQuery)({enabled:""!==e,queryKey:[D,{pubkey:e,cluster:t}],refetchInterval:C,queryFn({queryKey:e}){var n,i;return x(this,void 0,void 0,(function*(){const[,{pubkey:s}]=e,a=(0,A.getTokenListChainIDByCluster)(t),[u,c]=yield Promise.all([M(s,a),(0,o.getSPLTokenMap)(a)]),l=null===(n=null==u?void 0:u.response)||void 0===n?void 0:n.results;if(l.infos=c,!l)return null;if(null===(i=yield(0,E.getStorageValue)(r.StorageKeyCollectibles.HideSuspiciousCollectibles))||void 0===i||i){const e=yield(0,S.getNFTBlocklist)(),t=["SemiFungible","NonFungible","NonFungibleEdition","ProgrammableNonFungible"];for(const n of t){const t=l[n].filter((({mintPubKey:t})=>!e.includes(t)));l[n]=t}}return l}))},onSuccess(r){return x(this,void 0,void 0,(function*(){const o=r.Fungible.reduce(((e,t)=>(t.coingeckoId&&e.push(t.coingeckoId),e)),["solana"]),i=yield(0,E.getStorageValue)(c.StorageKeys.PriceMap);(0,a.getPricesByCoingeckoId)(o).then((e=>x(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},i),e);n.setQueryData([B],t),(0,E.setStorageValue)(c.StorageKeys.PriceMap,t)})))).catch(console.error);(function(e,t){var n;return x(this,void 0,void 0,(function*(){const r=new Set,o=[[]],i=new Map;for(const e of[t.NonFungible,t.NonFungibleEdition,t.SemiFungible,t.ProgrammableNonFungible])for(const t of e){let{collectionPubKey:e}=t;if(e&&!r.has(e)){r.add(e);const t=new(0,u.PublicKey)(e),[n]=yield R(t),i=o[o.length-1];i&&i.length<100?i.push(n.toString()):o.push([n.toString()])}if(!e){if(t.creators){const n=t.creators.find((e=>e.verified));n&&(e=null==n?void 0:n.address.toString())}e||(e=t.mintPubKey)}const s=null!==(n=i.get(e))&&void 0!==n?n:[];s.push(t),i.set(e,s)}let s=new Map;try{s=yield N(e,o)}catch(e){console.error(e)}const a=[];for(const[e,t]of i){t.sort(((e,t)=>{var n,r;const o=null!==(n=e.name)&&void 0!==n?n:"",i=null!==(r=t.name)&&void 0!==r?r:"",s=o.localeCompare(i);if(o.localeCompare(i))return s;const a=e.pubkey,u=t.pubkey;return a.localeCompare(u)}));const[n]=t;if(n){const r=s.get(e);r?a.push({key:e,name:r.data.name,uri:n.uri||r.data.uri,items:t}):a.push({key:e,name:null,uri:n.uri,items:t})}}return a.sort(((e,t)=>{var n,r;if(e.items.length>t.items.length)return-1;if(t.items.length>e.items.length)return 1;const o=null!==(n=e.name)&&void 0!==n?n:e.key,i=null!==(r=t.name)&&void 0!==r?r:t.key;return o.localeCompare(i)})),a}))})((0,A.getRPCURLByCluster)(t),r).then((r=>{n.setQueryData([_,{pubkey:e,cluster:t}],r)})).catch(console.error)}))}})}const M=(e,t)=>x(void 0,void 0,void 0,(function*(){const n=new URLSearchParams;n.append("ownerPubKey",e),n.append("chainId",t.toString());const r=`${(0,h.getAPIEnvironment)()}/solana/spl_token_accounts?${n.toString()}`,o=yield fetch(r,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!o.ok){const e="Error fetching spl token accounts";throw console.error(e),new Error(e)}return yield o.json()}));const B="SPLTokenPrices";function U(){const e=(0,p.useQueryClient)(),[t,n]=(0,g.useState)((()=>{var t;return null!==(t=e.getQueryData([B]))&&void 0!==t?t:null}));return(0,g.useEffect)((()=>e.getQueryCache().subscribe((()=>{var t;const r=null!==(t=e.getQueryData([B]))&&void 0!==t?t:null;r&&n(r)}))),[e]),t}const _="SPLTokenCollections";const j="SPLTokenJSONMetadata";function q(e){const t=[j,e];return(0,d.useQuery)({queryKey:t,queryFn(){return x(this,void 0,void 0,(function*(){return yield function(e){return x(this,void 0,void 0,(function*(){if(!e)return null;const t=V(e);if(t)return t;const n=`https://metaplex-cache.phantom.app/?url=${encodeURIComponent(e)}`;for(const t of[n,e])try{const e=yield fetch(t,{headers:{"content-type":"application/json"}});if(e.ok){const t=yield e.json();if(t&&"object"==typeof t)return t}}catch(e){console.error(`Failed to fetch URL ${t}`)}return console.error("Failed to fetch collectible metadata from origin server"),null}))}(e)}))},staleTime:k.CacheTime.Short,cacheTime:k.CacheTime.Long})}const V=e=>{const t=new RegExp(/(data:)([\w/+-]*)(;charset=[\w-]+|;base64){0,1},(.*)/i);if(!t.test(e))return;const n=t.exec(e);if(!n)return;const r=n[2],o=n[3],i=n[4];return"application/json"===r&&";base64"!==o?JSON.parse(i):void 0};const H=new Set(["image","audio","video","model"]),K=new Set([v.FileExtension.JPEG,v.FileExtension.JPG,v.FileExtension.PNG,v.FileExtension.GIF,v.FileExtension.SVG]),Q=new Set([v.FileExtension.MP3,v.FileExtension.WAV,v.FileExtension.OGA,v.FileExtension.FLAC]),G=new Set([v.FileExtension.WEBM,v.FileExtension.MP4,v.FileExtension.M4V,v.FileExtension.OGV,v.FileExtension.OGG,v.FileExtension.MOV]),W=new Set([v.FileExtension.GLTF,v.FileExtension.GLTFBINARY,v.FileExtension.GLB]),z=e=>K.has(e)?`image/${e}`:G.has(e)?`video/${e}`:W.has(e)?"model/gltf-binary":Q.has(e)?`audio/${e}`:void 0,$=e=>{const t=(0,l.parseURL)(e);if(!t)return null;if("http:"!==t.protocol&&"https:"!==t.protocol)return null;const n=t.searchParams.get("ext");if(n){const t=z(n);if(t)return{type:t,uri:e}}const r=(0,l.getLast)(e.split("."));if(r){const t=z(r);if(t)return{type:t,uri:e}}return null},J=e=>{const{image:t}=e;if(t){const e=$(t);return e||{type:"image/png",uri:t}}return null},Y=e=>{const{animation_url:t}=e;if(t){const n=$(t);if(n)return n;const r=(0,l.parseURL)(t);if(r&&("http:"===r.protocol||"https:"===r.protocol)){if("html"===r.searchParams.get("ext"))return null}const{properties:o}=e;if(null==o?void 0:o.category){const{category:e}=o;let n="";switch(e){case"image":n="image/png";break;case"video":n="video/mp4";break;case"audio":n="audio/mp3";break;case"model":case"vr":n="model/gltf-binary"}if(n)return{type:n,uri:t}}}return null},X=e=>{if(!(e=>H.has(e))(e))switch(e){case"image":return 0;case"audio":return 1;case"video":return 2;case"model":return 3}return 0},Z=e=>{var t,n,r;return null!==(r=null!==(n=null!==(t=(e=>{var t,n;let r=null!==(n=null===(t=e.properties)||void 0===t?void 0:t.files)&&void 0!==n?n:[];Array.isArray(r)||(r=[r]);let o=null;for(const e of r){let t=null;if("string"==typeof e)t=$(e);else if((null==e?void 0:e.type)&&(null==e?void 0:e.uri)){if(e.cdn)return e;t={type:e.type,uri:e.uri}}t&&o&&X(o.type)<X(t.type)&&(o=t)}})(e))&&void 0!==t?t:Y(e))&&void 0!==n?n:J(e))&&void 0!==r?r:null},ee=e=>(0,g.useMemo)((()=>e?Z(e):null),[e]),te=e=>(0,g.useMemo)((()=>e?(e=>{var t,n;return null!==(n=null!==(t=J(e))&&void 0!==t?t:Y(e))&&void 0!==n?n:null})(e):null),[e]),ne=e=>(0,g.useMemo)((()=>e?(e=>{const{collection:t}=e;if(t){const{name:e,family:n}=t;if(e)return e;if(n)return n}const{external_url:n}=e;if(n){const e=(0,l.formatURL)({url:n,format:"domain"});if(e)return e}const{name:r}=e;if(r){const e=(0,w.parseName)(r);if(e)return e}const{symbol:o}=e;return o||null})(e):null),[e]),re=e=>(0,T.getDevicePixelRatio)()*e,oe=e=>`https://api.phantom.app/image-proxy/?image=${encodeURIComponent(e)}`,ie=(e,t,n)=>{const r=re(t),o=re(n);return`${oe(e)}&fit=cover&width=${r}&height=${o}`},se=(e,t)=>{switch(e.type){case"solana":return"solana";case"spl-token":return`${e.data.pubkey}-${t}`}},ae=(e,t,n)=>{var r,o;const i=n[e],s=(null!==(r=null==i?void 0:i.usd)&&void 0!==r?r:0)*t;return{usd:s,usd24hChange:s-s/(1+(null!==(o=null==i?void 0:i.usd_24h_change)&&void 0!==o?o:0)/100)}},ue=(e,t,n)=>{let r=0;n&&(r=((e,t)=>{const n=e.data.usd,r=t.data.usd;return n&&r?n>r?-1:n<r?1:0:n&&!r?-1:r&&!n?1:0})(e,t));const o=((e,t)=>{const n=(0,b.amountToUiAmount)(e.data.amount,e.data.decimals),r=(0,b.amountToUiAmount)(t.data.amount,t.data.decimals);return n>r?-1:n<r?1:0})(e,t),i=((e,t)=>{var n,r,o,i,s,a;const u=null!==(r=null===(n=e.data.name)||void 0===n?void 0:n.toUpperCase())&&void 0!==r?r:null===(o=e.data.symbol)||void 0===o?void 0:o.toUpperCase(),c=null!==(s=null===(i=t.data.name)||void 0===i?void 0:i.toUpperCase())&&void 0!==s?s:null===(a=t.data.symbol)||void 0===a?void 0:a.toUpperCase();if(u&&c){if(u>c)return 1;if(u<c)return-1}return u&&!c?-1:c&&!u?1:0})(e,t);return r||o||i};function ce(e){return"solana"===e.type?y.SOLANA_ID:e.data.coingeckoId===y.USDT_COINGECKO_ID?m.USDT_MINT_ADDRESS:e.data.mintPubKey}const le=e=>{let t=0,n=0;for(const r of e)t+=r.data.usd,n+=r.data.usd24hChange;return{totalBalance:t,totalBalanceChange:n}},de=({publicKey:e,standards:t,cluster:n,cachedLamportBalance:r,cachedSPLTokensByStandard:o,cachedPrices:i={},hiddenMints:s,sortByPrice:a=!1})=>{var u,c;const l=F(e,n),d=null!==(u=l.data)&&void 0!==u?u:r,p=!d&&!l.isFetched,f=L(e,n),h=null!==(c=f.data)&&void 0!==c?c:o,y=!h&&!f.isFetched,m=U(),v=null!=m?m:i,S=(0,g.useMemo)((()=>{if(!h||!d)return[];const e=[];if(!(null==s?void 0:s.has("solana"))){const t=Object.assign({amount:d},O),n=ae(t.coingeckoId,(0,b.amountToUiAmount)(t.amount,t.decimals),v),r={type:"solana",data:Object.assign(Object.assign({},t),n)};e.push(r)}for(const n of t){const t=h[n];for(const n of t){if(null==s?void 0:s.has(n.mintPubKey))continue;const t={type:"spl-token",data:Object.assign(Object.assign({},n),{usd:0,usd24hChange:0})};if(n.coingeckoId){const e=(0,b.amountToUiAmount)(n.amount,n.decimals),r=ae(n.coingeckoId,e,v);t.data.usd=r.usd,t.data.usd24hChange=r.usd24hChange}e.push(t)}}return e}),[h,d,t,s,v]),w=(0,g.useMemo)((()=>S.sort(((e,t)=>ue(e,t,a?v:void 0)))),[S,a,v]),A=(0,g.useCallback)((()=>{x(void 0,void 0,void 0,(function*(){yield f.refetch(),yield l.refetch()}))}),[f,l]);return{data:w,dataUpdatedAt:f.dataUpdatedAt,isFetching:p||y,error:l.error||f.error,refetch:A}},pe=["Fungible"],fe=(e,t)=>{const n=de({publicKey:e,standards:pe,cluster:t,sortByPrice:!0}),{data:r}=n,o=L(e,t),{data:i}=o,s=null==i?void 0:i.infos,a=(0,g.useMemo)((()=>s),[s]),u=(0,g.useMemo)((()=>{const t=new Map;for(const e of r)switch(e.type){case"solana":break;case"spl-token":t.set(e.data.mintPubKey,e)}if(!a)return[];const n=Array.from(a.values()),o=[];for(const r of n){if(t.has(r.address)||0===r.decimals)continue;const n=ye({info:r,publicKey:e});o.push(n),t.set(r.address,n)}return o}),[a,r,e]),c=(0,g.useMemo)((()=>r.concat(u)),[r,u]),l=n.isFetching||!o.isFetched,d=n.error||o.error,p=n.refetch,f=o.refetch;return{data:c,isFetching:l,error:d,refetch:(0,g.useCallback)((()=>{p(),f()}),[p,f])}},ge=["Fungible"],he=(e,t)=>{const n=de({publicKey:e,standards:ge,cluster:t}),{data:r}=n,o=L(e,t),{data:i}=o,s=null==i?void 0:i.infos,a=(0,g.useMemo)((()=>s),[s]),u=(0,g.useMemo)((()=>{const t=new Map;if(!a)return t;for(const e of r){const n="solana"===e.type?"":e.data.mintPubKey;t.set(n,e)}const n=Array.from(a.values());for(const r of n){if(t.has(r.address))continue;const n=0===r.decimals?"SemiFungible":"Fungible",o=ye({info:r,publicKey:e,tokenStandard:n});t.set(r.address,o)}return t}),[a,r,e]),c=n.isFetching||!o.isFetched,l=n.error||o.error,d=n.refetch,p=o.refetch;return{data:u,isFetching:c,error:l,refetch:(0,g.useCallback)((()=>{d(),p()}),[d,p])}},ye=({info:e,publicKey:t,tokenStandard:n})=>{var r,o,i;const s={standard:n||"Fungible",pubkey:"",mintPubKey:e.address,ownerPubKey:t,decimals:e.decimals,amount:"0",delegate:null,delegatedAmount:"0",logoURI:null!==(r=e.logoURI)&&void 0!==r?r:null,name:e.name,symbol:e.symbol,coingeckoId:null!==(i=null===(o=e.extensions)||void 0===o?void 0:o.coingeckoId)&&void 0!==i?i:null,state:"uninitialized",collectionPubKey:"",uses:null,creators:[],uri:""};return{type:"spl-token",data:Object.assign(Object.assign({},s),{usd:0,usd24hChange:0})}}})),s.register("dY6gO",(function(t,n){e(t.exports,"PRICES_FETCH_TIMEOUT_MS",(function(){return o})),e(t.exports,"COLLECTIBLES_FETCH_TIMEOUT_MS",(function(){return i})),e(t.exports,"USDT_MINT_ADDRESS",(function(){return a}));var r=s("RVqnc");(0,r.toMilliseconds)({seconds:30});const o=(0,r.toMilliseconds)({seconds:10}),i=((0,r.toMilliseconds)({seconds:10}),(0,r.toMilliseconds)({seconds:5}),(0,r.toMilliseconds)({seconds:15})),a="Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"})),s.register("kAjeg",(function(t,n){e(t.exports,"groupCollectibles",(function(){return $}),(function(e){return $=e})),e(t.exports,"parseName",(function(){return Y}),(function(e){return Y=e})),e(t.exports,"getMetadata",(function(){return X}),(function(e){return X=e})),e(t.exports,"getCollectibleUriData",(function(){return Z}),(function(e){return Z=e})),e(t.exports,"parseCollectibles",(function(){return ee}),(function(e){return ee=e}));var r=s("iOvk1"),o=s("hMVEP"),i=s("RVqnc"),a=s("dY6gO"),u=s("fxm4i"),c=s("hRUHU"),l=s("24hfq");s("izATd");var d,p,f=s("cBVvR"),g=s("lvcyB"),h=s("8tcqI").Buffer,y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};(p=d||(d={}))[p.Uninitialized=0]="Uninitialized",p[p.MetadataV1=4]="MetadataV1",p[p.EditionV1=1]="EditionV1",p[p.MasterEditionV1=2]="MasterEditionV1",p[p.MasterEditionV2=6]="MasterEditionV2",p[p.EditionMarker=7]="EditionMarker";class m{constructor(e){this.address=e.address,this.verified=e.verified,this.share=e.share}}class v{constructor(e){this.name=e.name,this.symbol=e.symbol,this.uri=e.uri,this.sellerFeeBasisPoints=e.sellerFeeBasisPoints,this.creators=e.creators}}class S{constructor(e){var t;this.key=d.MetadataV1,this.updateAuthority=e.updateAuthority,this.mint=e.mint,this.data=e.data,this.primarySaleHappened=e.primarySaleHappened,this.isMutable=e.isMutable,this.editionNonce=null!==(t=e.editionNonce)&&void 0!==t?t:null}}const w=new Map([[v,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[m]}]]}],[m,{kind:"struct",fields:[["address","pubkey"],["verified","u8"],["share","u8"]]}],[S,{kind:"struct",fields:[["key","u8"],["updateAuthority","pubkey"],["mint","pubkey"],["data",v],["primarySaleHappened","u8"],["isMutable","u8"],["editionNonce",{kind:"option",type:"u8"}]]}]]),A=new RegExp("\0","g"),T=e=>{const t=(0,f.deserializeUnchecked)(w,S,e);return t.data.name=t.data.name.replace(A,""),t.data.uri=t.data.uri.replace(A,""),t.data.symbol=t.data.symbol.replace(A,""),t},b=[c.FileExtension.JPEG,c.FileExtension.JPG,c.FileExtension.PNG,c.FileExtension.GIF],E=new Set(b),k=[c.FileExtension.WEBM,c.FileExtension.MP4,c.FileExtension.M4V,c.FileExtension.OGV,c.FileExtension.OGG,c.FileExtension.MOV],x=new Set(k),P=[c.FileExtension.MP3,c.FileExtension.WAV,c.FileExtension.OGA,c.FileExtension.FLAC],I=new Set(P),C=[c.FileExtension.GLTF,c.FileExtension.GLTFBINARY,c.FileExtension.GLB],O=new Set(C),F=[...b,...k,...C,...P],R=new Set(F),N=e=>R.has(e),D=e=>E.has(e)?`image/${e}`:x.has(e)?`video/${e}`:O.has(e)?`model/${e}`:I.has(e)?`audio/${e}`:void 0,L=e=>{if(!e||"object"!=typeof e)return!1;const t="string"==typeof e.trait_type,n="string"==typeof e.value||"number"==typeof e.value;return t&&n},M=e=>L(e)?[e]:Array.isArray(e)?e.filter(L):[],B=e=>(e=>{if(!e||"object"!=typeof e)return!1;if(!e.category||"string"!=typeof e.category)return!1;if(!/^(image|video|audio|vr|html)$/.test(e.category))return!1;if(!Array.isArray(e.files))return!1;for(const t of e.files)if(!U(t))return!1;return!0})(e)?e:(e=>{if(!e||"object"!=typeof e)return!1;if(!e.category||"string"!=typeof e.category)return!1;if(!/^(image|video|audio|vr|html)$/.test(e.category))return!1;if(!Array.isArray(e.files))return!1;for(const t of e.files)if("string"!=typeof t)return!1;return!0})(e)?{category:e.category,files:e.files.map((e=>_(e))).filter((e=>!!e))}:void 0,U=e=>{if(!e||"object"!=typeof e)return!1;if(!e.type||"string"!=typeof e.type)return!1;if(!e.uri||"string"!=typeof e.uri)return!1;const t=typeof e.cdn;return"undefined"===t||"boolean"===t},_=e=>{const t=(0,i.parseURL)(e);if(!t)return;if("http:"!==t.protocol&&"https:"!==t.protocol)return;const n=t.searchParams.get("ext");if(n&&N(n)){const t=D(n);if(t)return{type:t,uri:e}}const r=(0,i.getLast)(e.split("."));if(r&&N(r)){const t=D(r);if(t)return{type:t,uri:e}}},j=e=>{const t=(e=>{const[t,n]=e.split("/");if(t&&n)return t.startsWith("image")&&E.has(n)?c.CollectibleMediaType.Image:t.startsWith("video")&&x.has(n)?c.CollectibleMediaType.Video:t.startsWith("model")&&O.has(n)?c.CollectibleMediaType.VR:t.startsWith("audio")&&I.has(n)?c.CollectibleMediaType.Audio:void 0})(e.type);if(t){return{type:t,fileUri:e.uri}}},q=e=>{if(!("object"==typeof e&&null!==e))return!1;return Object.values(e).every((e=>"string"==typeof e||void 0===e))},V=(e,t,n)=>{var o,i,s,a,u,c,d,p;const{mint:f,updateAuthority:g}=t,h=f.toString(),{creators:y=[],symbol:m,uri:v}=t.data,S=t.data.name,w=null!=n?n:{mint:h,name:S},A=w.name||S,T=Q(w),b=null!==(s=null===(i=null===(o=null==y?void 0:y.find((e=>1===e.verified)))||void 0===o?void 0:o.address)||void 0===i?void 0:i.toString())&&void 0!==s?s:"",{collection:E,external_url:k,description:x,image:P,attributes:I}=w;return{type:"collectible",chain:r.Chain.Solana,address:h,account:e.pubkey,collectionFamily:null!==(a=null==E?void 0:E.family)&&void 0!==a?a:"",collectionName:null!==(u=null==E?void 0:E.name)&&void 0!==u?u:"",collectionKey:b,name:A,symbol:m,uri:v,externalUrl:k,description:x,image:P,media:T,decimals:null!==(c=e.tokenAmount.decimals)&&void 0!==c?c:0,balance:null!==(d=e.tokenAmount.uiAmount)&&void 0!==d?d:1,delegate:e.delegate,attributes:I,baseBalance:new(0,l.BigNumber)(null!==(p=e.tokenAmount.amount)&&void 0!==p?p:1),updateAuthority:g,metaName:S}},H=(e,t)=>{const{mintAddress:n}=e,{name:o,symbol:i,websiteUrl:s,iconUrl:a,imageUrl:u,description:c,animationUrl:d}=t,p=(e=>{const t=_(e);if(t)return j(t)})(null!=d?d:"");return{type:"collectible",chain:r.Chain.Solana,address:n,account:e.pubkey,collectionFamily:"",collectionName:"",collectionKey:"",name:o,symbol:i,uri:"",externalUrl:s,description:c,image:null!=u?u:a,media:p,decimals:e.tokenAmount.decimals,balance:e.tokenAmount.uiAmount,delegate:e.delegate,baseBalance:new(0,l.BigNumber)(e.tokenAmount.amount),updateAuthority:null,metaName:null}},K=(e,t)=>y(void 0,void 0,void 0,(function*(){const n=yield fetch(e);if(!n.ok)throw new Error(`Failed to fetch data from ${e}`);return((e,t)=>{const n=t&&"object"==typeof t?t:{},{collection:r,description:o,external_url:i,name:s,image:a,animation_url:u,attributes:c}=n,l=B(n.properties);return{name:"string"==typeof s?s:"",mint:e,image:"string"==typeof a||null===a?a:void 0,collection:q(r)?r:void 0,description:"string"==typeof o?o:void 0,external_url:"string"==typeof i?i:void 0,animation_url:"string"==typeof u?u:void 0,properties:B(l),attributes:M(c)}})(t,yield n.json())})),Q=e=>{var t,n,r;const o=e.animation_url;if(o){const n=_(o);if(n){const e=j(n);if(e)return e}if(!n&&(null===(t=e.properties)||void 0===t?void 0:t.category)){if(/^(image|video|audio|vr)$/.test(e.properties.category))return{type:e.properties.category,fileUri:o}}}const i=null!==(r=null===(n=e.properties)||void 0===n?void 0:n.files)&&void 0!==r?r:[];let s;for(const e of i){const t=j(e);if(t){if(e.cdn)return t;(!s||s&&G(s.type)<G(t.type))&&(s=t)}}return s},G=e=>{switch(e){case c.CollectibleMediaType.VR:return 3;case c.CollectibleMediaType.Video:return 2;case c.CollectibleMediaType.Audio:return 1;case c.CollectibleMediaType.Image:return 0}},W=e=>y(void 0,void 0,void 0,(function*(){const t=[h.from("metadata"),u.METADATA_PROGRAM_ID.toBuffer(),e.toBuffer()];return(yield o.PublicKey.findProgramAddress(t,u.METADATA_PROGRAM_ID))[0]})),z=e=>y(void 0,void 0,void 0,(function*(){const t=[];let n=0;for(const r of Object.values(e)){const{data:e}=r;t.push(T(e)),n++,n%15==0&&(yield Promise.resolve())}return t})),$=e=>{var t;const n=new Map;for(const r of e){const e=r.collectionKey||r.address,o=null!==(t=n.get(e))&&void 0!==t?t:{collectibles:[],key:e,name:J(r)};o.collectibles=[...o.collectibles,r],o.collectibles.sort(((e,t)=>e.name.localeCompare(t.name))),n.set(e,o)}const r=[...n.values()];return r.sort(((e,t)=>{const n=t.collectibles.length-e.collectibles.length;return n||e.name.localeCompare(t.name)})),r},J=e=>{const{collectionFamily:t,collectionName:n,collectionKey:r,externalUrl:o,metaName:s,name:a,symbol:u}=e;if(n)return n;if(t)return t;if(o){const e=(0,i.formatURL)({url:o,format:"domain"});if(e)return e}if(s||a){const e=Y(s)||Y(a);if(e)return e}return u||r},Y=e=>e?e.replace(/(\/|-|_|#)+?\d+(?!-|_|\/)+/g,"").replace(/\d+( of )\d+/g,"").trim():null,X=(e,t)=>y(void 0,void 0,void 0,(function*(){return((e,t)=>y(void 0,void 0,void 0,(function*(){const n=e.map((e=>new(0,o.PublicKey)(e))),r=yield Promise.all((0,i.chunks)(n,15).map((e=>e.map(W))).flat()),s=yield(0,g.getMultipleAccountsAsync)(t,r,"confirmed");return z(s)})))(t.filter((e=>e.tokenAmount.uiAmount>0)).map((e=>e.mintAddress)),e)})),Z=e=>y(void 0,void 0,void 0,(function*(){const t=e.filter((e=>e.data.uri));if(t.length>0){const e=yield Promise.all((0,i.chunks)(t,5).map((e=>e.map((e=>y(void 0,void 0,void 0,(function*(){const{mint:t,data:{name:n,uri:r}}=e,o=t.toString();try{return yield(0,i.withTimeout)(K(r,o),a.COLLECTIBLES_FETCH_TIMEOUT_MS)}catch(e){return{mint:o,name:n}}})))))).flat());return(0,i.objectArrayToMap)(e,"mint")}return{}})),ee=(e,t,n,r)=>{const o=null!=t?t:{},i=r.reduce(((e,t)=>t.data.uri?(e.set(t.mint.toString(),t),e):e),new Map),s=[];for(const t of n){if(0===t.tokenAmount.uiAmount)continue;const n=t.mintAddress.toString(),r=i.get(n),a=o[n];if(r&&a){const e=V(t,r,a);s.push(e);continue}if(t.tokenAmount.uiAmount<=0)continue;const u=e[n];if(!u||!u.isCollectible)continue;const c=H(t,u);s.push(c)}return s}})),s.register("izATd",(function(t,n){e(t.exports,"deserializeBorsh",(function(){return s("cBVvR").deserializeUnchecked}));var r=s("hMVEP");s("cBVvR").BinaryReader.prototype.readPubkey=function(){const e=this.readFixedArray(32);return new(0,r.PublicKey)(e)}})),s.register("jF6Pg",(function(t,n){e(t.exports,"getDevicePixelRatio",(function(){return r}));const r=()=>(null===window||void 0===window?void 0:window.devicePixelRatio)||1})),s.register("2UOPE",(function(t,n){e(t.exports,"SWAPPER_BASE_URL",(function(){return u})),e(t.exports,"DEFAULT_SLIPPAGE",(function(){return c})),e(t.exports,"MAX_NUMBER_OF_QUOTES",(function(){return l})),e(t.exports,"QUOTE_FETCH_INTERVAL_MS",(function(){return d})),e(t.exports,"SHOULD_UNWRAP_WRAPPED_SOL",(function(){return p})),e(t.exports,"INITIAL_BUY_ASSET",(function(){return T})),e(t.exports,"INITIAL_SELL_ASSET",(function(){return b})),e(t.exports,"INITIAL_BUY_FUNGIBLE",(function(){return E})),e(t.exports,"INITIAL_SELL_FUNGIBLE",(function(){return k})),e(t.exports,"SWAP_ASSET_SELECT_TOKEN_STANDARDS",(function(){return x})),e(t.exports,"CHAIN_TO_NATIVE_FUNGIBLE",(function(){return P})),e(t.exports,"CHAIN_TO_USDC_FUNGIBLE",(function(){return I})),e(t.exports,"FUSE_SWAP_ASSET_SEARCH_CONFIG",(function(){return C})),e(t.exports,"PHANTOM_SUPPORT_SWAP_FAILED_URL",(function(){return O})),e(t.exports,"BALANCE_HIDDEN_TEXT",(function(){return F}));var r=s("iOvk1"),o=s("5slFC"),i=s("16XMG"),a=s("3YDVy");const u=`${(0,i.getAPIEnvironment)()}/solana/swap/v1`,c=.5,l=5,d=2e4,p=!0,f={id:r.ChainID.SolanaMainnet,imageUrl:"https://static.phantom.app/assets/solana.png",name:"Solana",symbol:"SOL"},g={type:"solana",data:Object.assign(Object.assign({},a.SOLANA_STATIC_VALUES),{amount:"0",usd:0,usd24hChange:0})},h={type:o.FungibleTokenType.SolanaNative,data:{amount:"0",balance:0,chain:f,coingeckoId:"solana",decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:""}},y={type:"spl-token",data:{amount:"0",coingeckoId:"usd-coin",collectionPubKey:null,creators:[],decimals:6,delegate:null,delegatedAmount:"0",logoURI:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/solana/assets/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintPubKey:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",ownerPubKey:"EtiWtHKB9RRHcSsprD4QVmUt5jjUFbfTZ6bXDc58yC2g",pubkey:"72iTmWTJZmHKWr6rh8a15YFpReJWdaZ8EQNJP32yceKz",standard:"Fungible",state:"initialized",symbol:"USDC",uri:"",usd:0,usd24hChange:0,uses:null}},m={type:o.FungibleTokenType.SPL,data:{amount:"0",balance:0,chain:f,coingeckoId:"usd-coin",decimals:6,key:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoUri:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",splTokenAccountPubkey:"EAF7dH8Jy43Xgp68PhyybKhfKxk46NFRkWN4PMCLqMfS",symbol:"USDC",tokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",walletAddress:"",programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"}},v={type:o.FungibleTokenType.PolygonNative,data:{chain:{id:r.ChainID.PolygonMainnet,name:"Polygon",symbol:"MATIC",imageUrl:"https://static.phantom.app/assets/polygon.png"},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://wallet-asset.matic.network/img/tokens/matic.svg",name:"Polygon",symbol:"MATIC",coingeckoId:"matic-network",balance:72.1728063520574,key:"PolygonNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0}},S={type:o.FungibleTokenType.ERC20,data:{amount:"0",balance:0,coingeckoId:null,decimals:6,key:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",walletAddress:"",chain:{id:r.ChainID.PolygonMainnet,imageUrl:"https://static.phantom.app/assets/polygon.png",name:"Polygon",symbol:"MATIC"},contractAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174"}},w={type:o.FungibleTokenType.EthereumNative,data:{chain:{id:r.ChainID.EthereumMainnet,name:"Ethereum",symbol:"ETH",imageUrl:"https://static.phantom.app/assets/ethereum.png"},walletAddress:"",decimals:18,amount:"45824381294194610",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",coingeckoId:"ethereum",balance:.04582438129419461,key:"EthereumNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0}},A={type:o.FungibleTokenType.ERC20,data:{chain:{id:r.ChainID.EthereumMainnet,name:"Ethereum",symbol:"ETH",imageUrl:"https://static.phantom.app/assets/ethereum.png"},walletAddress:"",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,amount:"1881092",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",coingeckoId:null,balance:1.881092,key:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411}},T=y,b=g,E=m,k=h,x=["Fungible","SemiFungible"],P=new Map([[r.ChainID.SolanaMainnet,h],[r.ChainID.EthereumMainnet,w],[r.ChainID.PolygonMainnet,v]]),I=new Map([[r.ChainID.SolanaMainnet,m],[r.ChainID.EthereumMainnet,A],[r.ChainID.PolygonMainnet,S]]),C={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"data.name",weight:.4},{name:"data.symbol",weight:.4},{name:"data.amount",weight:.1},{name:"data.mint",weight:.1}]},O="https://help.phantom.app/hc/en-us/articles/5985106844435",F="â€¢â€¢â€¢â€¢â€¢â€¢"})),s.register("f2tU6",(function(t,n){e(t.exports,"getSwapPairsAsync",(function(){return s("7NBkj").getSwapPairsAsync})),e(t.exports,"getSwapQuoteAsync",(function(){return s("cH46O").getSwapQuoteAsync})),e(t.exports,"parseSwapError",(function(){return s("huZwj").parseSwapError})),e(t.exports,"updateSellAssetAmount",(function(){return s("8A1G6").updateSellAssetAmount})),e(t.exports,"swapPairsAssetInfoToAsset",(function(){return s("7SmhG").swapPairsAssetInfoToAsset}));s("2JxpK"),s("30Tum"),s("azr2P"),s("gWWyM"),s("9XJOV"),s("bKooM"),s("31DM9"),s("7NBkj"),s("cH46O"),s("huZwj"),s("eH8pa"),s("9YFpa"),s("8A1G6"),s("7SmhG")})),s.register("2JxpK",(function(t,n){function r(e,t){return"solana"===e.type||"solana"===t.type?e.type===t.type:e.data.mintPubKey===t.data.mintPubKey}e(t.exports,"areAssetsEqual",(function(){return r}))})),s.register("30Tum",(function(t,n){function r(e){return"0"!==e.data.amount}e(t.exports,"canSellAsset",(function(){return r}))})),s.register("gWWyM",(function(t,n){e(t.exports,"getAnalyticsAsset",(function(){return o}));var r=s("iOvk1");function o(e){return{chain:r.Chain.Solana,type:"spl-token"===e.type&&"Fungible"!==e.data.standard?"collectible":"fungible",address:"spl-token"===e.type?e.data.mintPubKey:void 0,symbol:e.data.symbol}}})),s.register("9XJOV",(function(t,n){e(t.exports,"getMaxSellAmount",(function(){return u}));var r=s("5slFC"),o=s("9CoSy"),i=s("Nt4tV"),a=s("9YFpa");function u(e){const t=e?e.data.decimals:0,n=e?e.data.amount:0,s=(0,i.amountToUiAmount)(n,t);return e&&("solana"===e.type||e.type===r.FungibleTokenType.SolanaNative)&&s>o.ESTIMATED_SOL_TRADE_FEE?(0,a.subtractTokenAmounts)(s,o.ESTIMATED_SOL_TRADE_FEE):s}})),s.register("9YFpa",(function(t,n){e(t.exports,"subtractTokenAmounts",(function(){return o}));var r=s("24hfq");function o(e,t){return new(0,r.BigNumber)(e).minus(t).toNumber()}})),s.register("bKooM",(function(t,n){function r(e){if(void 0===e)return"#999";const t=parseFloat(e.toFixed(2));switch(!0){case t>=5:return"#EB3742";case t>=1&&e<5:return"#FFDC62";case e>=0&&e<1:return"#21E56F";default:return"#777777"}}e(t.exports,"getPriceImpactColor",(function(){return r}))})),s.register("31DM9",(function(t,n){function r(e){if(void 0===e)return"-";switch(!0){case e>=1e3:return">1000%";case e>=.01&&e<1e3:return`${e.toFixed(2)}%`;case e>0&&e<.01:return"<0.01%";case 0===e:return"0%";default:return"-"}}e(t.exports,"getPriceImpactText",(function(){return r}))})),s.register("7NBkj",(function(t,n){e(t.exports,"getSwapPairsAsync",(function(){return i}),(function(e){return i=e}));var r=s("2UOPE"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function i(e){return o(this,void 0,void 0,(function*(){const t=`${r.SWAPPER_BASE_URL}/pairs?tokens=${e}&includeMetadata=true`,n=yield fetch(t);if(200!==n.status)throw new Error(`Failed to fetch swap pairs for the following mints: ${e.join(", ")}.`);return yield n.json()}))}})),s.register("cH46O",(function(t,n){e(t.exports,"getSwapQuoteAsync",(function(){return i}),(function(e){return i=e}));var r=s("2UOPE"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function i(e){return o(this,void 0,void 0,(function*(){const t=new URLSearchParams([...Object.entries(e)]),n=new URL(`${r.SWAPPER_BASE_URL}/quote?${t}`).toString(),o=yield fetch(n);if(200!==o.status)throw new Error(`Failed to fetch quote for ${e.sellToken} and ${e.buyToken} pair.`);return yield o.json()}))}})),s.register("huZwj",(function(t,n){function r(e){var t;return"string"==typeof e?new Error(e):"object"==typeof e&&"logs"in e&&(null===(t=e.logs)||void 0===t?void 0:t.length)?new Error(e.logs.join("\n")):e}e(t.exports,"parseSwapError",(function(){return r}))})),s.register("eH8pa",(function(t,n){function r(e){if(e){const t=[];for(const n of e)t.includes(n.name)||t.push(n.name);return t.join(" + ")}return""}e(t.exports,"parseSwapSources",(function(){return r}))})),s.register("8A1G6",(function(t,n){function r({currentQuote:e,sellAsset:t,setSellAsset:n}){if(t&&e){const r=Object.assign({},t);r.data.amount=String(Number(t.data.amount)-Number(e.sellAmount)),n(r)}}e(t.exports,"updateSellAssetAmount",(function(){return r}))})),s.register("7SmhG",(function(t,n){e(t.exports,"swapPairsAssetInfoToAsset",(function(){return r}));const r=(e,t)=>{var n;return e.decimals&&e.name&&e.symbol?{type:"spl-token",data:{standard:"Fungible",pubkey:"",mintPubKey:e.mint,ownerPubKey:t,decimals:e.decimals,amount:"0",delegate:null,delegatedAmount:"0",logoURI:null!==(n=e.imageUrl)&&void 0!==n?n:null,name:e.name,symbol:e.symbol,coingeckoId:null,state:"uninitialized",collectionPubKey:"",uses:null,creators:[],uri:"",usd:0,usd24hChange:0}}:null}})),s.register("dsDYC",(function(t,n){e(t.exports,"useFetchSwapQuote",(function(){return u}),(function(e){return u=e}));var r=s("5ekp2"),o=s("2UOPE");s("f2tU6");var i=s("cH46O"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function u({publicKey:e,sellAmount:t,sellTokenMint:n,buyTokenMint:s}){const u=!!(e&&t&&n&&s),c=["fetch-phantom-swap-quote",e,t,n,s];return(0,r.useQuery)({cacheTime:0,enabled:u,queryKey:c,queryFn:function(){return a(this,void 0,void 0,(function*(){if(!e)throw new Error("Unable to fetch swap quote: no public key");if(!t||!n||!s)return;return yield(0,i.getSwapQuoteAsync)({buyToken:s,maxNumberOfQuotes:o.MAX_NUMBER_OF_QUOTES,sellToken:n,sellAmount:t,slippageTolerance:o.DEFAULT_SLIPPAGE,taker:e,wrapUnwrapSOL:o.SHOULD_UNWRAP_WRAPPED_SOL})}))},refetchInterval:o.QUOTE_FETCH_INTERVAL_MS,retry:!1})}})),s.register("iqqDn",(function(t,n){e(t.exports,"useFetchUsdPrices",(function(){return c}),(function(e){return c=e}));var r=s("56oyT"),o=s("RVqnc"),i=s("5ekp2"),a=s("dY6gO"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function c(e,t){var n,s;const c=null!==(n=null==e?void 0:e.data.coingeckoId)&&void 0!==n?n:null,l=null!==(s=null==t?void 0:t.data.coingeckoId)&&void 0!==s?s:null,d=!!c||!!l,p=["fetch-usd-prices",c,l];return(0,i.useQuery)({queryKey:p,queryFn:function(){return u(this,void 0,void 0,(function*(){const n=[];return[e,t].forEach((e=>{e&&e.data.coingeckoId&&n.push(e.data.coingeckoId)})),yield(0,o.withTimeout)((0,r.getPricesByCoingeckoId)(n),a.PRICES_FETCH_TIMEOUT_MS)}))},enabled:d})}})),s.register("fxXvK",(function(t,n){e(t.exports,"useInitialAssets",(function(){return c}));var r=s("29o0l"),o=s("3YDVy"),i=s("2UOPE"),a=s("iTQ0V");const u=["Fungible"];function c({owner:e,cluster:t,hiddenMints:n}){const{data:s}=(0,o.useSPLAssets)({publicKey:e,standards:u,cluster:t,hiddenMints:n}),c=(0,a.useSwapperStore)((e=>e.setBuyAsset)),l=(0,a.useSwapperStore)((e=>e.setSellAsset));(0,r.useEffect)((()=>{const e=new Map(s.map((e=>["solana"===e.type?"":e.data.mintPubKey,e]))),t="solana"===i.INITIAL_SELL_ASSET.type?"":i.INITIAL_SELL_ASSET.data.mintPubKey,n="solana"===i.INITIAL_BUY_ASSET.type?"":i.INITIAL_BUY_ASSET.data.mintPubKey,r=e.get(t)||i.INITIAL_SELL_ASSET,o=e.get(n)||i.INITIAL_BUY_ASSET;l(r),c(o)}),[])}})),s.register("8IOCk",(function(t,n){function r(e){return e?e.phantomFee.pct:0}e(t.exports,"usePhantomFee",(function(){return r}))})),s.register("4xLuU",(function(t,n){e(t.exports,"usePriceImpact",(function(){return a}));var r=s("29o0l"),o=s("bKooM"),i=s("31DM9");function a(e){return(0,r.useMemo)((()=>{let t="",n="";if(void 0!==e){const r=100*e;t=(0,o.getPriceImpactColor)(r),n=(0,i.getPriceImpactText)(r)}return{color:t,text:n}}),[e])}})),s.register("UWzy4",(function(t,n){e(t.exports,"useProvider",(function(){return i}));var r=s("29o0l"),o=s("eH8pa");function i(e){return(0,r.useMemo)((()=>(0,o.parseSwapSources)(e)),[e])}})),s.register("ezPKD",(function(t,n){e(t.exports,"useResetSwapperOnMount",(function(){return i}));var r=s("29o0l"),o=s("iTQ0V");function i(){const e=(0,o.useSwapperStore)((e=>e.resetSwapper));(0,r.useEffect)((()=>{e()}),[])}})),s.register("bFhoc",(function(t,n){e(t.exports,"useSubscribeSwapQuoteToQueries",(function(){return c}));var r=s("29o0l"),o=s("9CoSy"),i=s("Nt4tV"),a=s("iTQ0V"),u=s("dsDYC");function c(e){const t=(0,a.useSwapperStore)((e=>e.sellAmount)),n=(0,a.useSwapperStore)((e=>e.buyAsset)),s=(0,a.useSwapperStore)((e=>e.sellAsset)),c=(0,a.useSwapperStore)((e=>e.resetQuote)),l=(0,a.useSwapperStore)((e=>e.setHasNoRoutes)),d=(0,a.useSwapperStore)((e=>e.setIsFetchingQuote)),p=(0,a.useSwapperStore)((e=>e.setQuote)),f=(0,a.useSwapperStore)((e=>e.setSelectedProviderIndex)),g=s&&"spl-token"===s.type?s.data.mintPubKey:o.WRAPPED_SOLANA.address,h=n&&"spl-token"===n.type?n.data.mintPubKey:o.WRAPPED_SOLANA.address,y=(0,r.useMemo)((()=>parseFloat(t)>0&&s?String((0,i.uiAmountToAmount)(t,s.data.decimals)):(c(),"")),[c,t,s]),{data:m,isError:v,isFetching:S}=(0,u.useFetchSwapQuote)({sellAmount:y,sellTokenMint:g,buyTokenMint:h,publicKey:e}),w=(0,r.useCallback)((e=>{e.quotes.sort(((e,t)=>parseInt(t.buyAmount)-parseInt(e.buyAmount))),f(0),d(!1),l(!1),p(e)}),[l,d,p,f]),A=(0,r.useCallback)((()=>{c(),d(!1),l(!0)}),[c,l,d]);(0,r.useEffect)((()=>{S?d(!0):m?w(m):v&&A()}),[v,m,S,w,A,d])}})),s.register("hVvmZ",(function(t,n){e(t.exports,"useSwapBuyAssetProps",(function(){return d}));var r=s("29o0l"),o=s("Nt4tV"),i=s("2UOPE"),a=s("iTQ0V"),u=s("iX5lP"),c=s("4MMT9"),l=s("iA6sm");function d(e){var t;const n=(0,a.useSwapperStore)((e=>e.sellAsset)),s=(0,a.useSwapperStore)((e=>e.buyAsset)),d=(0,a.useSwapperStore)((e=>e.isFetchingQuote)),p=(0,a.useSwapperStore)((e=>e.setSellAmount)),f=(0,a.useSwapperStore)((e=>e.setUiSellAmount)),g=(0,l.useSwapSetSellAsset)(e),h=(0,c.useSwapSetBuyAsset)(e),{currentQuote:y,quote:m}=(0,u.useQuote)(),v=String(y&&m?(0,o.amountToFormattedAmount)(y.buyAmount,m.buyToken.decimals):""),S=null!==(t=null==s?void 0:s.data.decimals)&&void 0!==t?t:0,w=s&&s.data.logoURI?s.data.logoURI:i.INITIAL_BUY_ASSET.data.logoURI||"",A=s&&s.data.symbol?s.data.symbol:i.INITIAL_BUY_ASSET.data.symbol||"",T=(0,r.useCallback)((()=>{p(v),f(v),s&&g(s),n&&h(n)}),[p,v,f,s,n,g,h]);return{assetButtonTitle:A,buyAmount:v,decimals:S,iconUrl:w,isFetchingQuote:d,onSwitchTokens:T}}})),s.register("4MMT9",(function(t,n){e(t.exports,"useSwapSetBuyAsset",(function(){return a}));var r=s("29o0l"),o=s("iTQ0V"),i=s("gWWyM");function a(e){const t=(0,o.useSwapperStore)((e=>e.setBuyAsset));return(0,r.useCallback)((n=>{const r=(0,i.getAnalyticsAsset)(n);e.capture("swapperUpdateToAsset",{asset:r}),t(n)}),[e,t])}})),s.register("iA6sm",(function(t,n){e(t.exports,"useSwapSetSellAsset",(function(){return u}));var r=s("29o0l"),o=s("iTQ0V"),i=s("2JxpK"),a=s("gWWyM");function u(e){const t=(0,o.useSwapperStore)((e=>e.buyAsset)),n=(0,o.useSwapperStore)((e=>e.sellAsset)),s=(0,o.useSwapperStore)((e=>e.setBuyAsset)),u=(0,o.useSwapperStore)((e=>e.setSellAsset));return(0,r.useCallback)((r=>{const o=(0,a.getAnalyticsAsset)(r);e.capture("swapperUpdateFromAsset",{asset:o}),u(r),t&&n&&(0,i.areAssetsEqual)(r,t)&&s(n)}),[e,t,n,s,u])}})),s.register("dtI9r",(function(t,n){e(t.exports,"useSwapCardProps",(function(){return l}));var r=s("I4BHf"),o=s("8IOCk"),i=s("4xLuU"),a=s("UWzy4"),u=s("iX5lP"),c=s("h8AIo");function l(e){const{bestBuyAmount:t,currentQuote:n,hasNoRoutes:s,quote:l}=(0,u.useQuote)(),d=(0,r.useExchangeRate)(t,l,n),p=(0,i.usePriceImpact)(null==n?void 0:n.priceImpact),f=(0,a.useProvider)(null==n?void 0:n.sources),g=(0,o.usePhantomFee)(null==n?void 0:n.fees),{networkFeeInCurrencyFormatted:h,totalFeesInCurrencyFormatted:y}=(0,c.useTotalFees)(n,e);return{exchangeRate:d,hasNoRoutes:s,phantomFee:g,priceImpact:p,provider:f,quote:l,networkFee:h,totalFees:y}}})),s.register("h8AIo",(function(t,n){e(t.exports,"useTotalFees",(function(){return i}));var r=s("29o0l"),o=s("azr2P");function i(e,t){return(0,r.useMemo)((()=>{const n=null==e?void 0:e.fees;if(n&&t){const{networkFees:e,serumAccountDeposits:r,tokenAccountDeposits:i}=n,s=e.amount+r.amount+i.amount;return{networkFeeInCurrencyFormatted:(0,o.formatFee)(e.amount,t),totalFeesInLamports:s,totalFeesInCurrencyFormatted:(0,o.formatFee)(s,t)}}return{networkFeeInCurrencyFormatted:"",totalFeesInLamports:void 0,totalFeesInCurrencyFormatted:""}}),[null==e?void 0:e.fees,t])}})),s.register("8vNNq",(function(t,n){e(t.exports,"useSwapConfirmationProps",(function(){return m}),(function(e){return m=e}));var r=s("hMVEP"),o=s("29o0l"),i=s("bQvNK"),a=s("3YDVy"),u=s("guHTU"),c=s("iTQ0V");s("f2tU6");var l=s("8A1G6"),d=s("huZwj"),p=s("lgcfo"),f=s("UWzy4"),g=s("iX5lP"),h=s("3pIvT"),y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function m({analytics:e,connection:t,explorer:n,isLedger:s,signer:m,splAssetsArgs:v,onError:S}){const{cluster:w}=v,{currentQuote:A,quote:T}=(0,g.useQuote)(),b=(0,c.useSwapperStore)((e=>e.sellAsset)),E=(0,c.useSwapperStore)((e=>e.buyUsdValue)),k=(0,c.useSwapperStore)((e=>e.sellUsdValue)),x=(0,c.useSwapperStore)((e=>e.setSellAsset)),P=(0,c.useSwapperStore)((e=>e.resetSwapper)),{refetch:I}=(0,a.useSPLAssets)(v),C=(0,f.useProvider)(null==A?void 0:A.sources),O=(0,p.useAnalyticsPayload)({buyToken:null==T?void 0:T.buyToken,sellToken:null==T?void 0:T.sellToken,buyAmount:null==A?void 0:A.buyAmount,sellAmount:null==A?void 0:A.sellAmount,phantomFee:null==A?void 0:A.fees.phantomFee.amount,priceImpact:null==A?void 0:A.priceImpact,provider:C,buyAssetUsdValue:E,sellAssetUsdValue:k}),F=null==T?void 0:T.buyToken.symbol,[R,N]=(0,o.useState)(),D=w&&R?(0,u.generateTxExplorerUrl)(R,w,n):"",L=(null==A?void 0:A.transactionData.length)||0,[M,B]=(0,o.useState)("loading"),U="success"===M,_="failure"===M,[j,q]=(0,o.useState)(void 0),{notEnoughSol:V,txErrorMessage:H}=(0,h.useSwapError)(j),K=(0,o.useCallback)((()=>y(this,void 0,void 0,(function*(){if(B("loading"),N(void 0),q(void 0),!A)throw new Error("Trying to execute swap with no current quote");if(!t||!m)throw new Error("Trying to execute swap with no connection or signer.");try{const{transactionData:n}=A;for(const e of n){const n=(0,r.transactionStringToTransaction)(e,"bs58");(0,r.setRecentBlockhash)(n,yield(0,i.getLatestBlockhash)(t,"finalized"));const o=yield(0,i.signAndSendTransactionAsync)(t,m,n,{skipPreflight:!0});N(o),yield(0,i.waitForTransactionConfirmationAsync)(t,o,"confirmed")}B("success"),e.capture("swapperSwapSuccess",O),P(),(0,l.updateSellAssetAmount)({currentQuote:A,sellAsset:b,setSellAsset:x}),I()}catch(t){console.error(t);const n=(0,d.parseSwapError)(t);B("failure"),q(n),S&&S(n),e.capture("swapperSwapFailure",O)}}))),[e,O,t,A,S,I,P,b,x,m]);return{buyAssetSymbol:F,isSuccess:U,isFailure:_,isLedger:s,notEnoughSol:V,txError:j,txErrorMessage:H,txLink:D,executeSwap:K,resetSwapper:P,useExecuteSwapOnMount:()=>{(0,o.useEffect)((()=>{s||K()}),[])},numberOfTransactions:L}}})),s.register("3pIvT",(function(t,n){e(t.exports,"useSwapError",(function(){return d}));var r=s("43063"),o=s("29o0l");const i='"Custom":301',a="Insufficient funds for fee",u="lower balance than rent-exempt minimum",c="insufficient lamports",l="debit an account but found no record of a prior credit";function d(e){const{t:t}=(0,r.useTranslation)();return(0,o.useMemo)((()=>e&&e.message?{notEnoughSol:[a,c,l,u].some((t=>e.message.includes(t))),txErrorMessage:e.message.includes(i)?t("swapTxConfirmationSwapFailedSlippageLimit"):t("swapTxConfirmationSwapFailedTryAgain")}:{notEnoughSol:!1,txErrorMessage:""}),[e,t])}})),s.register("lCzzn",(function(t,n){e(t.exports,"useSwapProvidersProps",(function(){return l}));var r=s("43063"),o=s("29o0l"),i=s("Nt4tV"),a=s("iTQ0V"),u=s("eH8pa"),c=s("iX5lP");function l(){const{t:e}=(0,r.useTranslation)(),{bestBuyAmount:t,quote:n,quotes:s,selectedProviderIndex:l}=(0,c.useQuote)(),d=(0,a.useSwapperStore)((e=>e.setSelectedProviderIndex));return{rows:(0,o.useMemo)((()=>n?s.map((r=>{const{buyAmount:o,sources:s}=r,a=Number(o),c=t-a,l=(0,i.amountToFormattedAmount)(c,n.buyToken.decimals);return{label:(0,u.parseSwapSources)(s),value:0===c?e("swapFeesBestPrice"):`- ${l} ${n.buyToken.symbol}`}})):[]),[t,n,s,e]),selectedProviderIndex:l,setSelectedProviderIndex:d}}})),s.register("9PpHT",(function(t,n){e(t.exports,"useSwapReviewButtonProps",(function(){return a}));var r=s("iTQ0V"),o=s("9XJOV"),i=s("iX5lP");function a(){const{currentQuote:e}=(0,i.useQuote)(),t=(0,r.useSwapperStore)((e=>e.hasNoRoutes)),n=(0,r.useSwapperStore)((e=>e.sellAsset)),s=(0,r.useSwapperStore)((e=>e.sellAmount)),a=(0,o.getMaxSellAmount)(n),u=Number(s)<=a;return{canSwap:!!e&&u&&!t,hasEnoughAssets:u,hasNoRoutes:t}}})),s.register("iTLyO",(function(t,n){e(t.exports,"useSwapReviewProps",(function(){return l}));var r=s("29o0l"),o=s("3YDVy"),i=s("Nt4tV"),a=s("iTQ0V"),u=s("iqqDn"),c=s("iX5lP");function l(){const e=(0,a.useSwapperStore)((e=>e.buyAsset)),t=(0,a.useSwapperStore)((e=>e.sellAsset)),n=(0,a.useSwapperStore)((e=>e.sellAmount)),s=(0,a.useSwapperStore)((e=>e.setBuyUsdValue)),l=(0,a.useSwapperStore)((e=>e.setSellUsdValue)),{currentQuote:d,quote:p}=(0,c.useQuote)(),{data:f}=(0,u.useFetchUsdPrices)(t,e);return(0,r.useMemo)((()=>{var r,a;let u="",c="",g="",h="";if(!p||!e||!t)return{sellAmountText:g,sellAmountUsdText:h,buyAmountText:u,buyAmountUsdText:c};const{buyToken:y,sellToken:m}=p,{buyAmount:v}=d,S=(0,i.amountToUiAmount)(v,p.buyToken.decimals),w=Number(n),A=String(S).split(".")[0].length,T=n.split(".")[0].length,b=y.symbol.length,E=m.symbol.length,k=A&&b?A+b:0,x=T&&E?T+E:0;if(g=`${(0,i.formatTokenAmountForReviewScreen)(w,x)} ${m.symbol}`,u=`${(0,i.formatTokenAmountForReviewScreen)(S,k)} ${y.symbol}`,f){const n=(0,o.getMintPubkeyFromAsset)(e),u=(0,o.getMintPubkeyFromAsset)(t),d=f[n],p=f[u];if(d){const e=S*(null!==(r=d.usd)&&void 0!==r?r:0);c=`$${(0,i.formatTokenAmount)(e)}`,s(d.usd)}if(p){const e=w*(null!==(a=p.usd)&&void 0!==a?a:0);h=`$${(0,i.formatTokenAmount)(e)}`,l(p.usd)}}return{sellAmountText:g,sellAmountUsdText:h,buyAmountText:u,buyAmountUsdText:c}}),[p,e,t,d,n,f,s,l])}})),s.register("6M54M",(function(t,n){e(t.exports,"useSwapSellAssetProps",(function(){return g}));var r=s("29o0l"),o=s("9CoSy"),i=s("m2d5Y"),a=s("3YDVy"),u=s("Nt4tV"),c=s("2UOPE"),l=s("iTQ0V"),d=s("2JxpK"),p=s("9XJOV");const f=500;function g({owner:e,cluster:t,hiddenMints:n,isBalanceHidden:s}){const{data:g}=(0,a.useSPLAssets)({publicKey:e,standards:c.SWAP_ASSET_SELECT_TOKEN_STANDARDS,cluster:t,hiddenMints:n}),h=(0,l.useSwapperStore)((e=>e.sellAsset)),y=(0,l.useSwapperStore)((e=>e.sellAmount)),m=(0,l.useSwapperStore)((e=>e.uiSellAmount)),v=(0,l.useSwapperStore)((e=>e.setSellAmount)),S=(0,l.useSwapperStore)((e=>e.setSellAsset)),w=(0,l.useSwapperStore)((e=>e.setUiSellAmount)),[A,T]=(0,i.useDebouncedChangeHandler)(y,v,f),b=null==h?void 0:h.data.amount,E=h?h.data.decimals:0,k=(0,p.getMaxSellAmount)(h),x=Number(null!=y?y:0)>k,P=h&&h.data.logoURI?h.data.logoURI:c.INITIAL_SELL_ASSET.data.logoURI||"",I=h&&h.data.symbol?h.data.symbol:c.INITIAL_SELL_ASSET.data.symbol||"",C=s?` ${c.BALANCE_HIDDEN_TEXT}`:` ${k} ${h?h.data.symbol:""}`,O=(0,r.useCallback)((e=>{const t=(0,u.formatTokenAmountInputs)(e.substring(0,o.MOBILE_SWAP_INPUT_MAX_LENGTH)),n=(0,u.formatTokenAmountToMaxDecimals)(t,E);w(n),T(n)}),[E,T,w]),F=(0,r.useCallback)((()=>{O(k.toString())}),[k,O]),R=(0,r.useMemo)((()=>{if(h)return g.find((e=>(0,d.areAssetsEqual)(e,h)))}),[g,h]);return(0,r.useEffect)((()=>{R&&R.data.amount!==b&&S(R)}),[R,b,S]),{assetButtonTitle:I,decimals:E,formattedMaxSellAmount:C,iconUrl:P,notEnoughAssets:x,uiSellAmount:m,setMaxSellAmount:F,updateSellAmount:O}}})),s.register("eOCBr",(function(t,n){e(t.exports,"useSwapSellAssetsList",(function(){return c}));var r=s("29o0l"),o=s("3YDVy"),i=s("iTQ0V"),a=s("2JxpK"),u=s("30Tum");function c(e){const{data:t,error:n,isFetching:s}=(0,o.useSPLAssets)(e),c=(0,i.useSwapperStore)((e=>e.sellAsset));return{data:(0,r.useMemo)((()=>{if(c){const e=t.findIndex((e=>(0,a.areAssetsEqual)(e,c))),n=t[e];n&&n.data.amount!==c.data.amount&&(t[e]=c)}return t.filter((e=>(0,u.canSellAsset)(e)))}),[t,c]),isError:!!n,isFetching:s}}})),s.register("kvuQ4",(function(e,t){})),s.register("d0HjU",(function(t,n){e(t.exports,"extractUsdRate",(function(){return s("lDJ5X").extractUsdRate}));s("lDJ5X")})),s.register("lDJ5X",(function(t,n){e(t.exports,"extractUsdRate",(function(){return o}));var r=s("5slFC");const o=(e,t)=>{if(void 0!==t)return e.type===r.FungibleTokenType.SolanaNative?t[r.SOLANA_TOKEN_VALUES.coingeckoId]:e.type===r.FungibleTokenType.EthereumNative?t[r.ETHER_TOKEN_VALUES.coingeckoId]:e.type===r.FungibleTokenType.PolygonNative?t[r.MATIC_TOKEN_VALUES.coingeckoId]:e.type===r.FungibleTokenType.SPL?t[e.data.mintAddress]:e.type===r.FungibleTokenType.ERC20?t[e.data.contractAddress]:void 0}})),s.register("2e392",(function(t,n){e(t.exports,"createSwapperHooks",(function(){return T}));var r=s("7gANb"),o=s("l7Y64"),i=s("j3ma1"),a=s("fz9J3"),u=s("a6NKv"),c=s("9IHYJ"),l=s("fI7vj"),d=s("2so4T"),p=s("6aawr"),f=s("9gwVO"),g=s("8vAsr"),h=s("kBlcI"),y=s("ipDsT"),m=s("5WhLj"),v=s("5Soz0"),S=s("jVgYF"),w=s("6CB7N"),A=s("02Lw2");function T(e,t,n,s,T,b,E,k,x,P){const I=new(0,r.PriorityFeeService);return{useSwapTransactions:e=>(0,u.useSwapTransactions)(Object.assign(Object.assign({},e),{accountHooks:k,priorityFeeService:I})),useSwapPairs:(e,t)=>(0,i.useSwapPairs)({sellToken:e,includeBridgePairs:t,getApiEnvironment:n}),useSwapQuotes:(e,t,r,o,i)=>(0,a.useSwapQuotes)(e,t,r,o,i,n),useSwapCardProps:()=>(0,f.useSwapCardProps)({transactionHooks:P,priceHooks:b,accountHooks:k,analytics:T}),useSwapSellAssetProps:e=>(0,A.useSwapSellAssetProps)({transactionHooks:P,priceHooks:b,fungibleHooks:E,accountHooks:k,analytics:T,getApiEnvironment:n,queryClient:s,isBalanceHidden:e}),useSwapProvidersProps:()=>(0,y.useSwapProvidersProps)({accountHooks:k,fungibleHooks:E,getApiEnvironment:n}),useSwapReviewProps:()=>(0,v.useSwapReviewProps)({accountHooks:k,priceHooks:b,analytics:T,getApiEnvironment:n}),useSwapReviewButtonProps:()=>(0,m.useSwapReviewButtonProps)({accountHooks:k,fungibleHooks:E,transactionHooks:P,priceHooks:b,analytics:T}),useSwapConfirmationProps:(n,r,o)=>(0,g.useSwapConfirmationProps)({accountSigner:e,storage:t,isLedger:r,onError:o,fungibleHooks:E,priceHooks:b,settingsHooks:x,analytics:T,accountHooks:k,transactionHooks:P,priorityFeeService:I,isSwapSimulationDisabled:n}),useSwapSellAssetList:()=>(0,w.useSwapSellAssetList)({fungibleHooks:E}),useSwapBuyAssetList:e=>(0,p.useSwapBuyAssetList)({includeBridgePairs:e,fungibleHooks:E,accountHooks:k,getApiEnvironment:n}),useInitialAssets:()=>(0,c.useInitialAssets)({accountHooks:k}),useSubscribeSwapQuoteToQueries:()=>(0,d.useSubscribeSwapQuoteToQueries)({accountHooks:k,getApiEnvironment:n}),useSubscribeGasEstimation:()=>(0,l.useSubscribeGasEstimation)({accountHooks:k,fungibleHooks:E,transactionHooks:P,priorityFeeService:I}),useSwapScanTransaction:e=>(0,S.useSwapScanTransaction)({accountHooks:k,swapTransactions:e}),useSwapGasEstimation:()=>(0,h.useSwapGasEstimation)({accountHooks:k,fungibleHooks:E,transactionHooks:P,priorityFeeService:I}),useMultichainSwapFungibles:(n,r)=>(0,o.useMultichainSwapFungibles)({accountSigner:e,storage:t,accountIdentifier:n,chainId:r})}}})),s.register("l7Y64",(function(t,n){e(t.exports,"useMultichainSwapFungibles",(function(){return c}),(function(e){return c=e}));var r=s("iOvk1"),o=s("9W7fs"),i=s("5e414"),a=s("9SFZy"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=({accountIdentifier:e,chainId:t,accountSigner:n,storage:s})=>(0,o.useMutation)({mutationFn:o=>u(void 0,void 0,void 0,(function*(){const{swapTransactions:u,type:c}=o;if("evm"===u.type&&c===r.ChainType.EVM){const{gasEstimation:r,pendingApprovalActivityRows:a,pendingSwapActivityRows:l}=o,d=yield(0,i.swapTransactionEvm)({transactions:u.transactions,chainId:t,gasEstimation:r,pendingSwapActivityRows:l,pendingApprovalActivityRows:a,accountIdentifier:e,accountSigner:n,storage:s});return{chainID:t,chainType:c,id:d}}if("solana"===u.type&&c===r.ChainType.Solana){const{callerAddress:r,connection:i,pendingSwapActivityRows:l}=o;if(!i)throw new Error("missing connection");const d=yield(0,a.swapTransactionSolana)({callerAddress:r,connection:i,chainId:t,transactions:u.transactions,pendingSwapActivityRows:l,accountIdentifier:e,accountSigner:n,storage:s});return{chainID:t,chainType:c,id:d}}throw new Error("unsupported")}))})})),s.register("5e414",(function(t,n){e(t.exports,"swapTransactionEvm",(function(){return u}),(function(e){return u=e}));var r=s("cFUcx"),o=s("7gANb"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=({chainId:e,unsignedTransaction:t,pendingActivityRows:n,accountIdentifier:r,accountSigner:i,storage:s,includeCallPayload:a})=>Object.assign(Object.assign({accountSigner:i,accountIdentifier:r,chainID:e,unsignedTransaction:t},a&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}}),{pendingTransactionInput:{ownerAddress:t.from,chainID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:o.PendingTransactionType.Swap,display:{summary:n}},storage:s}),u=({transactions:e,chainId:t,gasEstimation:n,pendingApprovalActivityRows:s,pendingSwapActivityRows:u,accountIdentifier:c,accountSigner:l,storage:d})=>i(void 0,void 0,void 0,(function*(){let i=!0;const p={gas:`0x${n.gasLimit.toString(16)}`,maxFeePerGas:`0x${n.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${n.maxPriorityFeePerGas.toString(16)}`};if(e.length>1){const n=r.EthUnsignedTransactionObject.parse(Object.assign(Object.assign({},e[0]),p)),u=a({chainId:t,accountIdentifier:c,pendingActivityRows:s,accountSigner:l,storage:d,unsignedTransaction:n,includeCallPayload:i});yield(0,o.signAndSendEthereumTransactionAsync)(u),i=!1}const f=r.EthUnsignedTransactionObject.parse(Object.assign(Object.assign({},e[e.length-1]),p)),g=a({chainId:t,accountIdentifier:c,pendingActivityRows:u,accountSigner:l,storage:d,unsignedTransaction:f,includeCallPayload:i});return(0,o.signAndSendEthereumTransactionAsync)(g)}))})),s.register("9SFZy",(function(t,n){e(t.exports,"swapTransactionSolana",(function(){return c}),(function(e){return c=e}));var r=s("hMVEP"),o=s("7gANb"),i=s("bQvNK"),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const u=({chainId:e,transaction:t,feePayer:n,connection:r,pendingActivityRows:i,accountIdentifier:s,accountSigner:a,storage:u})=>({accountSigner:a,accountIdentifier:s,transaction:t,feePayer:n,connection:r,opts:{skipPreflight:!0},pendingTransactionInput:{ownerAddress:n.toBase58(),chainID:e,data:{signature:""},type:o.PendingTransactionType.Swap,display:{summary:i}},storage:u}),c=({callerAddress:e,connection:t,chainId:n,transactions:s,pendingSwapActivityRows:c,accountIdentifier:l,accountSigner:d,storage:p})=>a(void 0,void 0,void 0,(function*(){const a=new(0,r.PublicKey)(e),f=(yield t.getLatestBlockhash("confirmed")).blockhash;let g;for(const e of s){const s=(0,r.transactionStringToTransaction)(e,"bs58");(0,r.setRecentBlockhash)(s,f);const h=u({chainId:n,transaction:s,feePayer:a,connection:t,pendingActivityRows:c,accountIdentifier:l,accountSigner:d,storage:p});g=yield(0,o.signAndSendSolanaTransactionAsync)(h),yield(0,i.waitForTransactionConfirmationAsync)(t,g)}return null!=g?g:""}))})),s.register("j3ma1",(function(t,n){e(t.exports,"useSwapPairs",(function(){return l}),(function(e){return l=e})),e(t.exports,"prefetchSwapPairs",(function(){return d}),(function(e){return d=e}));var r=s("5ekp2"),o=s("kA1kJ"),i=s("dOGoW"),a=s("6BFZj"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=({sellToken:e,includeBridgePairs:t,getApiEnvironment:n})=>u(void 0,void 0,void 0,(function*(){const r=n();return(0,o.getSwapPairs)({apiEnv:r,sellToken:e,includeBridgePairs:t})})),l=({sellToken:e,includeBridgePairs:t,getApiEnvironment:n})=>(0,r.useQuery)({queryKey:i.swapperQueryKeys.pairs(e,t),cacheTime:a.CacheTime.Always,staleTime:a.StaleTime.Long,refetchInterval:a.RefetchInterval.Short,queryFn:()=>c({sellToken:e,includeBridgePairs:t,getApiEnvironment:n})}),d=({sellToken:e,includeBridgePairs:t,getApiEnvironment:n,queryClient:r})=>{r.prefetchQuery(i.swapperQueryKeys.pairs(e),(()=>c({sellToken:e,includeBridgePairs:t,getApiEnvironment:n})))}})),s.register("kA1kJ",(function(n,r){e(n.exports,"getSwapPairs",(function(){return p}),(function(e){return p=e}));var o=s("1cPb8"),i=s("1LpD3"),a=s("b4wfG"),u=s("9GQfW"),c=s("1m0w7"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const d="swap-pairs";function p({apiEnv:e,sellToken:n,includeBridgePairs:r}){return l(this,void 0,void 0,(function*(){let s;try{(0,o.isEvmCaip19Address)(n)&&(n.address=n.address.toLowerCase());const a=`${e}/swap/v2/pairs`,l=yield t(i)(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokens:[n],includeBridgePairs:r})});return s=l.status,yield(0,u.handleBadResponse)(l,d),(0,c.parseSwapPairsResponse)(yield l.json())}catch(t){const r=t instanceof Error?t:new Error("Non-Error was thrown during fetching of swap pairs");throw(0,a.captureClientError)(r,s,d,{apiEnv:e,sellToken:n}),r}}))}})),s.register("b4wfG",(function(t,n){e(t.exports,"captureClientError",(function(){return o}));var r=s("csW2r");const o=(e,t,n,o)=>{(!t||t>=400&&t<500)&&(r.telemetry.addBreadcrumb(n,JSON.stringify(o),r.Severity.Info),r.telemetry.captureError(e,r.FeatureTag.Swapper))}})),s.register("9GQfW",(function(t,n){e(t.exports,"handleBadResponse",(function(){return a}),(function(e){return a=e}));var r=s("csW2r"),o=s("iixDX"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=(e,t)=>i(void 0,void 0,void 0,(function*(){if(e.ok)return;const n=e.statusText;let i;try{i=yield e.json()}catch(e){throw new Error(n)}const s=o.SwapErrorResponse.safeParse(i);if(s.success)throw r.telemetry.addBreadcrumb(t,JSON.stringify(s.data.errors),r.Severity.Info),new Error(s.data.message);throw new Error(n)}))})),s.register("iixDX",(function(t,n){e(t.exports,"SwapErrorResponse",(function(){return u})),e(t.exports,"SwapToken",(function(){return l})),e(t.exports,"SolanaSwapQuote",(function(){return h})),e(t.exports,"EvmSwapQuote",(function(){return y})),e(t.exports,"QuoteType",(function(){return v})),e(t.exports,"SwapperQuoteResponse",(function(){return S}));var r=s("1cPb8"),o=s("iOvk1"),i=s("cFUcx"),a=s("7XqVB");const u=a.z.object({message:a.z.string(),errors:a.z.record(a.z.string(),a.z.any())}),c=a.z.object({coingeckoId:a.z.optional(a.z.string())}),l=a.z.object({chainId:o.ZodChainID,address:a.z.optional(a.z.string()),name:a.z.string(),symbol:a.z.string(),decimals:a.z.number(),logoURI:a.z.optional(a.z.string()),resourceType:a.z.string(),extensions:a.z.optional(c),includesBridge:a.z.optional(a.z.boolean())}),d=a.z.enum(["network","phantom"]),p=a.z.object({name:a.z.string(),percentage:a.z.number(),amount:a.z.number(),type:d}),f=a.z.object({name:a.z.string(),proportion:a.z.string()}),g=a.z.object({sellAmount:a.z.string(),buyAmount:a.z.string(),priceImpact:a.z.number(),sources:a.z.array(f),fees:a.z.array(p)}),h=g.extend({transactionData:a.z.array(a.z.string())}),y=g.extend({allowanceTarget:a.z.string(),exchangeAddress:a.z.string(),gas:a.z.number(),value:a.z.string(),transactionData:a.z.string()}),m=a.z.union([h,y]),v=a.z.enum(["solana","eip155"]),S=a.z.object({type:v,taker:r.FungibleCaip19,buyToken:r.FungibleCaip19,sellToken:r.FungibleCaip19,slippageTolerance:a.z.number(),simulationTolerance:a.z.optional(a.z.number()),gasBuffer:a.z.optional(a.z.number()),quotes:a.z.array(m)}),w=a.z.object({type:a.z.literal("solana"),transactions:a.z.array(a.z.string())}),A=a.z.object({type:a.z.literal("evm"),transactions:a.z.array(i.EthUnsignedTransactionObject)});a.z.union([w,A])})),s.register("1m0w7",(function(t,n){e(t.exports,"parseSwapPairsResponse",(function(){return i}));var r=s("1cPb8"),o=s("iixDX");const i=e=>{var t;if(!e.tokens)return[];const n=[],i=Object.keys(e.tokens)[0];if(r.BRI.safeParse(i).success){(null!==(t=e.tokens[i])&&void 0!==t?t:[]).forEach((e=>{const t=o.SwapToken.safeParse(e);t.success&&n.push(t.data)}))}return n}})),s.register("6BFZj",(function(t,n){e(t.exports,"CacheTime",(function(){return r})),e(t.exports,"StaleTime",(function(){return i})),e(t.exports,"RefetchInterval",(function(){return u}));var r,o,i,a,u,c,l=s("RVqnc");(o=r||(r={}))[o.Always=1/0]="Always",o[o.Short=(0,l.toMilliseconds)({days:1})]="Short",o[o.Medium=(0,l.toMilliseconds)({days:3})]="Medium",o[o.Long=(0,l.toMilliseconds)({days:7})]="Long",(a=i||(i={}))[a.Immediate=0]="Immediate",a[a.Short=(0,l.toMilliseconds)({minutes:1})]="Short",a[a.Medium=(0,l.toMilliseconds)({minutes:2.5})]="Medium",a[a.Long=(0,l.toMilliseconds)({minutes:60})]="Long",a[a.Never=1/0]="Never",(c=u||(u={}))[c.Short=(0,l.toMilliseconds)({seconds:20})]="Short",c[c.Medium=(0,l.toMilliseconds)({minutes:2.5})]="Medium",c[c.Long=(0,l.toMilliseconds)({minutes:5})]="Long"})),s.register("fz9J3",(function(t,n){e(t.exports,"useSwapQuotes",(function(){return c}),(function(e){return c=e}));var r=s("5ekp2"),o=s("jx8aE"),i=s("dOGoW"),a=s("6BFZj"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c=(e,t,n,s,c,l)=>{const d=i.swapperQueryKeys.quotes(e,t,n,s,c);return(0,r.useQuery)({queryKey:d,enabled:!!s,cacheTime:0,staleTime:0,refetchInterval:a.RefetchInterval.Short,queryFn({queryKey:[,,{sellToken:e,buyToken:t,taker:n,sellAmount:r,slippageTolerance:i}]}){return u(this,void 0,void 0,(function*(){const s=l();return(0,o.getSwapQuotes)({apiEnv:s,sellToken:e,buyToken:t,taker:n,sellAmount:r,slippageTolerance:i})}))}})}})),s.register("jx8aE",(function(n,r){e(n.exports,"getSwapQuotes",(function(){return p}),(function(e){return p=e}));var o=s("1cPb8"),i=s("1LpD3"),a=s("b4wfG"),u=s("9GQfW"),c=s("gouXv"),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const d="swap-quotes";function p({apiEnv:e,sellToken:n,buyToken:r,taker:s,sellAmount:p,slippageTolerance:f}){return l(this,void 0,void 0,(function*(){let l;try{(0,o.isEvmCaip19Address)(s)&&(s.address=s.address.toLowerCase()),(0,o.isEvmCaip19Address)(r)&&(r.address=r.address.toLowerCase()),(0,o.isEvmCaip19Address)(n)&&(n.address=n.address.toLowerCase());const a=`${e}/swap/v2/quotes`,g=yield t(i)(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sellToken:n,buyToken:r,taker:s,sellAmount:p,slippageTolerance:f})});return l=g.status,yield(0,u.handleBadResponse)(g,d),(0,c.parseSwapQuotesResponse)(yield g.json())}catch(t){const o=t instanceof Error?t:new Error("Non-Error was thrown during fetching of swap quotes");throw(0,a.captureClientError)(o,l,d,{apiEnv:e,sellToken:n,buyToken:r,sellAmount:p,slippageTolerance:f}),o}}))}})),s.register("gouXv",(function(t,n){e(t.exports,"parseSwapQuotesResponse",(function(){return o}));var r=s("iixDX");const o=e=>{if(!1===r.QuoteType.safeParse(null==e?void 0:e.type).success)throw new Error("Invalid input");const t=r.SwapperQuoteResponse.safeParse(e);if(!t.success)throw new Error("Failed to parse swap quote response");return t.data}})),s.register("a6NKv",(function(n,r){e(n.exports,"useSwapTransactions",(function(){return y}),(function(e){return y=e}));var o=s("iOvk1"),i=s("cFUcx"),a=s("hMVEP"),u=s("csW2r"),c=s("7gANb"),l=s("5ekp2"),d=s("kAKNF"),p=s("iHaNO"),f=s("dOGoW"),g=s("6BFZj"),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const y=({accountHooks:e,priorityFeeService:n,callerAddress:r,sellFungible:s,quote:y})=>{const{connection:m}=e.useSelectedSolanaConnection(),v=f.swapperQueryKeys.transactions(y);return(0,l.useQuery)({queryKey:v,enabled:!!y,cacheTime:0,staleTime:0,refetchInterval:g.RefetchInterval.Short,onError(e){e instanceof Error&&u.telemetry.captureError(e,u.FeatureTag.Swapper)},queryFn(){var e,u;return h(this,void 0,void 0,(function*(){const l=null!==(e=null==s?void 0:s.data.chain.id)&&void 0!==e?e:o.ChainID.SolanaMainnet,f=[];if((0,p.isEvmSwapQuote)(y)&&(0,o.isEVMChainID)(l)){const e=null!==(u=null==s?void 0:s.data.tokenAddress)&&void 0!==u?u:"",{allowanceTarget:n,exchangeAddress:a,sellAmount:p,value:g}=y;if(e){if((yield(0,c.getERC20Allowance)({callerAddress:r,spender:n,chainId:l,contractAddress:e})).lt(p.toString())){const t=yield(0,c.getERC20Approval)({callerAddress:r,spender:n,chainId:l,contractAddress:e});f.push(t)}}const h=i.EthUnsignedTransactionObject.parse(Object.assign({type:i.TransactionTypes.eip1559,from:r,data:y.transactionData,chainId:(0,o.getEthereumChainID)(l),to:a},"0"===g?{}:{value:`0x${new(t(d))(g).toString(16)}`}));return f.push(h),{type:"evm",transactions:f}}if((0,p.isSolanaSwapQuote)(y)&&(0,o.isSolanaChainID)(l)){const e=y.transactionData.map((e=>((e,t,n)=>h(void 0,void 0,void 0,(function*(){const r=(0,a.transactionStringToTransaction)(e,"bs58");return yield t.addPriorityFee(r,{connection:n,transactionType:c.TransactionTypeValue.Swap,calculators:{budget:new(0,c.StaticLimitCalculator)(c.COMPUTE_UNIT_LIMIT)}})})))(e,n,m)));return{type:"solana",transactions:(yield Promise.all(e)).map((e=>c.TransactionSerializationUtils.serialize(e).transaction))}}throw new Error("Not implemented")}))}})}})),s.register("iHaNO",(function(t,n){e(t.exports,"isSolanaSwapQuote",(function(){return o})),e(t.exports,"isEvmSwapQuote",(function(){return i}));var r=s("iixDX");function o(e){return r.SolanaSwapQuote.safeParse(e).success}function i(e){return r.EvmSwapQuote.safeParse(e).success}})),s.register("9IHYJ",(function(t,n){e(t.exports,"useInitialAssets",(function(){return u}));var r=s("29o0l"),o=s("2UOPE"),i=s("iTQ0V"),a=s("997BK");function u({accountHooks:e}){const{data:t}=e.useSelectedMultiChainAccount(),n=(0,a.useInitialSellFungible)({accountHooks:e}),s=(0,i.useSwapperStore)((e=>e.setBuyFungible)),u=(0,i.useSwapperStore)((e=>e.setSellFungible));(0,r.useEffect)((()=>{u(n),s(o.CHAIN_TO_USDC_FUNGIBLE.get(n.data.chain.id))}),[null==t?void 0:t.identifier])}})),s.register("997BK",(function(t,n){e(t.exports,"useInitialSellFungible",(function(){return i}));var r=s("29o0l"),o=s("2UOPE");const i=({accountHooks:e})=>{const t=e.useSelectedNetworks();return(0,r.useMemo)((()=>{var e;return 0===t.length?o.INITIAL_SELL_FUNGIBLE:null!==(e=o.CHAIN_TO_NATIVE_FUNGIBLE.get(t[0]))&&void 0!==e?e:o.INITIAL_SELL_FUNGIBLE}),[t])}})),s.register("fI7vj",(function(t,n){e(t.exports,"useSubscribeGasEstimation",(function(){return a}));var r=s("29o0l"),o=s("iTQ0V"),i=s("kBlcI");function a({accountHooks:e,fungibleHooks:t,transactionHooks:n,priorityFeeService:s}){const a=(0,o.useSwapperStore)((e=>e.setGasEstimation)),u=(0,o.useSwapperStore)((e=>e.setIsFetchingGasEstimation)),c=(0,o.useSwapperStore)((e=>e.setMaxGasEstimation)),l=(0,o.useSwapperStore)((e=>e.quoteFetchIntervalToggle)),{gasEstimation:d,isFetching:p}=(0,i.useSwapGasEstimation)({accountHooks:e,fungibleHooks:t,transactionHooks:n,priorityFeeService:s}),{gasEstimation:f}=(0,i.useSwapGasEstimation)({accountHooks:e,fungibleHooks:t,transactionHooks:n,priorityFeeService:s,includeGasBuffer:!0});(0,r.useEffect)((()=>{l?(u(p),a(d),c(f)):u(!1)}),[l,a,c,u,d,f,p])}})),s.register("kBlcI",(function(n,r){e(n.exports,"useSwapGasEstimation",(function(){return y}));var o=s("iOvk1"),i=s("7gANb"),a=s("kAKNF"),u=s("29o0l"),c=s("3TL6Y"),l=s("a6NKv"),d=s("iTQ0V"),p=s("iHaNO"),f=s("i8bL0"),g=s("997BK"),h=s("2Upmy");const y=({accountHooks:e,transactionHooks:n,priorityFeeService:r,includeGasBuffer:s=!1})=>{var y,m;const{currentQuote:v,multichainQuoteResponse:S}=(0,h.useQuote)(),w=(0,g.useInitialSellFungible)({accountHooks:e}),A=null!==(y=(0,d.useSwapperStore)((e=>e.sellFungible)))&&void 0!==y?y:w,{data:T}=e.useSelectedMultiChainAccount(),b=(0,u.useMemo)((()=>{var e;return null!==(e=null==T?void 0:T.addresses)&&void 0!==e?e:[]}),[null==T?void 0:T.addresses]),E=(0,u.useMemo)((()=>{var e,t;return null!==(t=null===(e=b.find((e=>e.chainId===(null==A?void 0:A.data.chain.id))))||void 0===e?void 0:e.address)&&void 0!==t?t:""}),[b,A]),k=null!==(m=null==A?void 0:A.data.chain.id)&&void 0!==m?m:o.ChainID.SolanaMainnet,{data:x}=n.useEthereumGasEstimation({chainId:(0,o.isEVMChainID)(k)?k:o.ChainID.EthereumMainnet,preset:i.EvmGasPreset.standard,gasLimit:new(t(a))(1),refetchInterval:2e4}),{data:P,isFetching:I}=(0,l.useSwapTransactions)({accountHooks:e,priorityFeeService:r,callerAddress:E,sellFungible:A,quote:v});let C=null;"evm"===(null==P?void 0:P.type)&&(0,o.isEVMChainID)(k)&&(C={chainId:k,origin:"https://phantom.app",userAccount:E,transactions:P.transactions}),"solana"===(null==P?void 0:P.type)&&(0,o.isSolanaChainID)(k)&&(C={chainId:k,origin:"https://phantom.app",userAccount:E,transactions:P.transactions});const O=(0,c.useScanTransaction)({label:"useSwapGasEstimation",params:C}),F=O.data,{data:R,isFetching:N}=(0,f.useEstimateSolanaNetworkFee)({swapTransactions:P,chainId:(0,o.isSolanaChainID)(k)?k:o.ChainID.SolanaMainnet}),D=(0,u.useMemo)((()=>{var e;if((0,p.isEvmSwapQuote)(v)&&x){const{maxFeePerGas:n,maxPriorityFeePerGas:r}=x;let i=v.gas;if((null==F?void 0:F.chainType)===o.ChainType.EVM){const e=F.evaluation.gas;if(e){const t=e.reduce(((e,t)=>e+parseInt(t,10)),0);t>0&&(i=t)}}return{maxFeePerGas:n,maxPriorityFeePerGas:r,chainId:k,gasLimit:new(t(a))(i).multipliedBy(s?null!==(e=null==S?void 0:S.gasBuffer)&&void 0!==e?e:1.3:1).integerValue(t(a).ROUND_CEIL)}}if((0,p.isSolanaSwapQuote)(v)&&void 0!==R)return{chainId:k,value:R}}),[k,v,x,R,F,S,s]),L=N||I||O.isFetching;return(0,u.useMemo)((()=>({gasEstimation:D,isFetching:L,isError:void 0===x})),[D,L,x])}})),s.register("i8bL0",(function(t,n){e(t.exports,"useEstimateSolanaNetworkFee",(function(){return d}),(function(e){return d=e}));var r=s("hMVEP"),o=s("csW2r"),i=s("7gANb"),a=s("5ekp2"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const c="swap-priority-fee",l=(e,t)=>u(void 0,void 0,void 0,(function*(){const n=(0,r.transactionStringToTransaction)(e,"bs58");return{networkFeeEstimation:yield(0,i.estimateFeeFromMessage)(t,n.message)}}));function d({swapTransactions:e,chainId:t}){const n=[c,e],r=!!e&&e.transactions.length>0&&"solana"===e.type&&!!t;return(0,a.useQuery)({queryKey:n,queryFn:()=>u(this,void 0,void 0,(function*(){if(!e)throw new Error("No swap transactions");if("solana"!==e.type)throw new Error("Trying estimate network fee for non-solana txs");if(!t)throw new Error("Trying to execute swap with no chain id.");try{const n=e.transactions.map((e=>l(e,t))),r=yield Promise.all(n);return r.map((e=>e.networkFeeEstimation.value)).reduce(((e,t)=>e+t))}catch(e){return o.telemetry.captureError(e,o.FeatureTag.Swapper),0}})),enabled:r})}})),s.register("2Upmy",(function(t,n){e(t.exports,"useQuote",(function(){return i}));var r=s("29o0l"),o=s("iTQ0V");function i(){var e,t;const n=(0,o.useSwapperStore)((e=>e.multichainQuoteResponse)),i=(0,o.useSwapperStore)((e=>e.hasNoRoutes)),s=(0,o.useSwapperStore)((e=>e.selectedProviderIndex)),a=(0,r.useMemo)((()=>n?n.quotes:[]),[n]),u=a.length>0?a[s]:void 0;return{bestBuyAmount:null!==(t=null===(e=a[0])||void 0===e?void 0:e.buyAmount)&&void 0!==t?t:"",currentQuote:u,hasNoRoutes:i,multichainQuoteResponse:n,quotes:a,selectedProviderIndex:s}}})),s.register("2so4T",(function(n,r){e(n.exports,"useSubscribeSwapQuoteToQueries",(function(){return f}));var o=s("kAKNF"),i=s("29o0l"),a=s("Nt4tV"),u=s("2UOPE"),c=s("fz9J3"),l=s("iTQ0V"),d=s("997BK"),p=s("5KI92");function f({accountHooks:e,getApiEnvironment:n}){var r,s;const f=(0,l.useSwapperStore)((e=>e.sellAmount)),g=null!==(r=(0,l.useSwapperStore)((e=>e.buyFungible)))&&void 0!==r?r:u.INITIAL_BUY_FUNGIBLE,h=(0,p.useSwapAssetCaip19)(g),y=(0,d.useInitialSellFungible)({accountHooks:e}),m=null!==(s=(0,l.useSwapperStore)((e=>e.sellFungible)))&&void 0!==s?s:y,v=(0,p.useSwapAssetCaip19)(m),S=(0,l.useSwapperStore)((e=>e.quoteFetchIntervalToggle)),w=(0,l.useSwapperStore)((e=>e.resetQuote)),A=(0,l.useSwapperStore)((e=>e.setHasNoRoutes)),T=(0,l.useSwapperStore)((e=>e.setIsFetchingQuote)),b=(0,l.useSwapperStore)((e=>e.setMultichainQuoteResponse)),E=(0,l.useSwapperStore)((e=>e.setSelectedProviderIndex)),k=(0,i.useMemo)((()=>new(t(o))(f).isGreaterThan(0)&&m?(0,a.uiAmountToAmount)(f,m.data.decimals).toString():(w(),"")),[w,f,m]),{data:x}=e.useSelectedChainAddress(m.data.chain.id),P=(0,i.useMemo)((()=>x?{chainId:x.chainId,address:x.address,resourceType:"address"}:{}),[x]),{data:I,isError:C,isFetching:O}=(0,c.useSwapQuotes)(v,h,P,k,1,n),F=(0,i.useCallback)((e=>{E(0),T(!1),A(!1),b(e)}),[A,T,b,E]),R=(0,i.useCallback)((()=>{w(),T(!1),A(!0)}),[w,A,T]);(0,i.useEffect)((()=>{S&&(O?T(!0):I?F(I):C&&R())}),[C,I,O,F,R,T,S])}})),s.register("5KI92",(function(t,n){e(t.exports,"useSwapAssetCaip19",(function(){return a}));var r=s("iOvk1"),o=s("5slFC"),i=s("29o0l");const a=e=>(0,i.useMemo)((()=>{var t;const{type:n}=e;switch(n){case o.FungibleTokenType.SPL:case o.FungibleTokenType.ERC20:return{chainId:e.data.chain.id,address:null!==(t=e.data.tokenAddress)&&void 0!==t?t:"",resourceType:"address"};case o.FungibleTokenType.SolanaNative:return{chainId:r.ChainID.SolanaMainnet,slip44:"501",resourceType:"nativeToken"};case o.FungibleTokenType.EthereumNative:return{chainId:r.ChainID.EthereumMainnet,slip44:"60",resourceType:"nativeToken"};case o.FungibleTokenType.PolygonNative:return{chainId:r.ChainID.PolygonMainnet,slip44:"966",resourceType:"nativeToken"};default:throw new Error(`unhandled: ${n}`)}}),[e])})),s.register("6aawr",(function(t,n){e(t.exports,"useSwapBuyAssetList",(function(){return g}));var r=s("1cPb8"),o=s("5slFC"),i=s("29o0l"),a=s("9CoSy"),u=s("2UOPE"),c=s("j3ma1"),l=s("iTQ0V"),d=s("aBD8n"),p=s("997BK"),f=s("5KI92");function g({includeBridgePairs:e,fungibleHooks:t,accountHooks:n,getApiEnvironment:s}){var g,h;const y=(0,p.useInitialSellFungible)({accountHooks:n}),m=null!==(g=(0,l.useSwapperStore)((e=>e.sellFungible)))&&void 0!==g?g:y,{fungibles:v,isLoadingTokens:S,isRefetchingTokens:w,isErrorTokens:A}=t.useFungibles(),T=(0,f.useSwapAssetCaip19)(m),{data:b}=n.useSelectedChainAddress(m.data.chain.id),E=null!==(h=null==b?void 0:b.address)&&void 0!==h?h:"",{data:k=[],isLoading:x,isError:P}=(0,c.useSwapPairs)({sellToken:T,includeBridgePairs:e,getApiEnvironment:s}),I=(0,i.useMemo)((()=>new Map(v.map((e=>[e.data.key,e])))),[v]),C=(0,i.useMemo)((()=>{if(!m||0===k.length)return[];return k.reduce(((e,t)=>{let n;const i=t.address;if(t.address===a.WRAPPED_SOLANA.address&&u.SHOULD_UNWRAP_WRAPPED_SOL)n=o.FungibleTokenType.SolanaNative;else if(t.resourceType===r.Caip19ResourceType.nativeToken)n=(0,o.chainIdToNativeTokenFungibleKey)(t.chainId);else{if(!i)throw new Error("Invalid swap token");n=i}let s;const c=I.get(null!=n?n:"");return s=c&&c.data.balance?c:(0,d.swapTokenToFungible)(t,E),s&&e.push(s),e}),[]).sort(o.compareFungibleBalance)}),[I,k,m,E]);return(0,i.useMemo)((()=>({assets:C,isFetching:S||x||w,isError:A||P})),[C,S,x,w,A,P])}})),s.register("aBD8n",(function(t,n){e(t.exports,"swapTokenToFungible",(function(){return l}));var r=s("1cPb8"),o=s("iOvk1"),i=s("5slFC");const a={id:o.ChainID.SolanaMainnet,imageUrl:"https://static.phantom.app/assets/solana.png",name:"Solana",symbol:"SOL"},u={id:o.ChainID.EthereumMainnet,imageUrl:"https://static.phantom.app/assets/ethereum.png",name:"Ethereum",symbol:"ETH"},c={id:o.ChainID.PolygonMainnet,imageUrl:"https://static.phantom.app/assets/polygon.png",name:"Polygon",symbol:"MATIC"},l=(e,t)=>{var n,s;const l={amount:"0",balance:0,coingeckoId:null!==(s=null===(n=e.extensions)||void 0===n?void 0:n.coingeckoId)&&void 0!==s?s:null,decimals:e.decimals,key:e.address,logoUri:e.logoURI,mintAddress:e.address,name:e.name,splTokenAccountPubkey:"",symbol:e.symbol,tokenAddress:e.address,walletAddress:t};if(e.chainId===o.ChainID.EthereumMainnet){if(e.resourceType===r.Caip19ResourceType.nativeToken)return{type:i.FungibleTokenType.EthereumNative,data:Object.assign(Object.assign({},l),{chain:u})};if(e.resourceType===r.Caip19ResourceType.address)return{type:i.FungibleTokenType.ERC20,data:Object.assign(Object.assign({},l),{chain:u,contractAddress:e.address})}}else if(e.chainId===o.ChainID.PolygonMainnet){if(e.resourceType===r.Caip19ResourceType.nativeToken)return{type:i.FungibleTokenType.PolygonNative,data:Object.assign(Object.assign({},l),{chain:c})};if(e.resourceType===r.Caip19ResourceType.address)return{type:i.FungibleTokenType.ERC20,data:Object.assign(Object.assign({},l),{chain:c,contractAddress:e.address})}}else if(e.chainId===o.ChainID.SolanaMainnet){if(e.resourceType===r.Caip19ResourceType.nativeToken)return{type:i.FungibleTokenType.SolanaNative,data:Object.assign(Object.assign({},l),{chain:a})};if(e.resourceType===r.Caip19ResourceType.address)return{type:i.FungibleTokenType.SPL,data:Object.assign(Object.assign({},l),{chain:a,mintAddress:e.address})}}return null}})),s.register("9gwVO",(function(t,n){e(t.exports,"useSwapCardProps",(function(){return c}));var r=s("4xLuU"),o=s("2hSLz"),i=s("fQWxX"),a=s("lfgtT"),u=s("2Upmy");function c({transactionHooks:e,priceHooks:t,accountHooks:n,analytics:s}){var c;const{bestBuyAmount:l,currentQuote:d,hasNoRoutes:p,multichainQuoteResponse:f,quotes:g}=(0,u.useQuote)();return{exchangeRate:(0,o.useExchangeRate)(l,f,d),hasNoRoutes:p,priceImpact:(0,r.usePriceImpact)(null==d?void 0:d.priceImpact),provider:(0,a.useProvider)(null!==(c=null==d?void 0:d.sources)&&void 0!==c?c:[]),fees:(0,i.useFees)({transactionHooks:e,priceHooks:t,accountHooks:n,analytics:s}),nrOfQuotes:g.length}}})),s.register("2hSLz",(function(n,r){e(n.exports,"useExchangeRate",(function(){return c}));var o=s("kAKNF"),i=s("29o0l"),a=s("Nt4tV"),u=s("iTQ0V");function c(e,n,r){const[s,c]=(0,i.useState)(!1),l=(0,i.useCallback)((()=>c(!s)),[s]),d=(0,u.useSwapperStore)((e=>e.sellFungible)),p=(0,u.useSwapperStore)((e=>e.buyFungible));return(0,i.useMemo)((()=>{let i=!1,u="";if(n&&r){const n=null==p?void 0:p.data,c=null==d?void 0:d.data;if(n&&c){const{buyAmount:l,sellAmount:d}=r,p=(0,a.amountToUiAmount)(l,n.decimals)/(0,a.amountToUiAmount)(d,c.decimals),f=`1 ${c.symbol} â‰ˆ ${(0,a.formatTokenAmount)(p)} ${n.symbol}`,g=`1 ${n.symbol} â‰ˆ ${(0,a.formatTokenAmount)(1/p)} ${c.symbol}`;i=new(t(o))(r.buyAmount).isEqualTo(e),u=s?g:f}}return{isBestRate:i,rate:u,flip:l}}),[e,r,s,n,d,p,l])}})),s.register("fQWxX",(function(n,r){e(n.exports,"useFees",(function(){return h}));var o=s("iOvk1"),i=s("5slFC"),a=s("56oyT"),u=s("kAKNF"),c=s("29o0l"),l=s("iTQ0V"),d=s("aUSVN"),p=s("iHaNO"),f=s("997BK"),g=s("2Upmy");const h=({transactionHooks:e,priceHooks:n,accountHooks:r,analytics:s})=>{var h,y;const m=(0,a.useIsUsingPricesBackend)(s),{currentQuote:v}=(0,g.useQuote)(),S=(0,f.useInitialSellFungible)({accountHooks:r}),w=null!==(h=(0,l.useSwapperStore)((e=>e.sellFungible)))&&void 0!==h?h:S,A=(0,l.useSwapperStore)((e=>e.gasEstimation)),T=(0,l.useSwapperStore)((e=>e.isFetchingGasEstimation)),b=(0,l.useSwapperStore)((e=>e.maxGasEstimation)),E=null!==(y=null==w?void 0:w.data.chain.id)&&void 0!==y?y:o.ChainID.SolanaMainnet,k=n.usePrices({isUsingBackendService:m,queries:[{type:"id",data:[i.SOLANA_TOKEN_VALUES.coingeckoId,i.ETHER_TOKEN_VALUES.coingeckoId,i.MATIC_TOKEN_VALUES.coingeckoId]}]}),x=(0,c.useMemo)((()=>k.reduce(((e,t)=>Object.assign(Object.assign({},e),t.data)),{})),[k]),{data:P,isFetching:I}=e.useGasEstimationPrice(E,A),{data:C}=e.useGasEstimationPrice(E,b),O=T||I,F=(0,c.useMemo)((()=>{var e,n,r;const o=(null!==(e=null==v?void 0:v.fees)&&void 0!==e?e:[]).find((e=>"phantom"===e.type));return{amount:new(t(u))(null!==(n=null==o?void 0:o.amount)&&void 0!==n?n:0),uiAmount:"",pct:null!==(r=null==o?void 0:o.percentage)&&void 0!==r?r:0}}),[v]),R=(0,c.useMemo)((()=>{var e,n,r;const o=(null!==(e=null==v?void 0:v.fees)&&void 0!==e?e:[]).find((e=>"Token account deposits"===e.name));return{amount:new(t(u))(null!==(n=null==o?void 0:o.amount)&&void 0!==n?n:0),uiAmount:(null==o?void 0:o.amount)?(0,d.formatFee)(E,new(t(u))(o.amount),x):"",pct:null!==(r=null==o?void 0:o.percentage)&&void 0!==r?r:0}}),[v,E,x]),N=(0,c.useMemo)((()=>{var e,n,r,o;return Object.assign(Object.assign({amount:null!==(e=v&&(null==P?void 0:P.gasEstimationAmount))&&void 0!==e?e:new(t(u))(0),uiAmount:null!==(n=v&&(null==P?void 0:P.gasEstimationPriceUSD))&&void 0!==n?n:""},(0,p.isEvmSwapQuote)(v)?{maxAmount:null!==(r=v&&(null==C?void 0:C.gasEstimationAmount))&&void 0!==r?r:new(t(u))(0),maxUiAmount:null!==(o=v&&(null==C?void 0:C.gasEstimationPriceUSD))&&void 0!==o?o:""}:{}),{pct:0})}),[v,P,C]),D=(0,c.useMemo)((()=>{var e;const t=R.amount.plus(N.amount),n=(0,p.isEvmSwapQuote)(v)?R.amount.plus(null!==(e=N.maxAmount)&&void 0!==e?e:0):void 0;return Object.assign({amount:t,uiAmount:(0,d.formatFee)(E,t,x),pct:0},(0,p.isEvmSwapQuote)(v)&&n?{maxAmount:n,maxUiAmount:(0,d.formatFee)(E,n,x)}:{})}),[R,N,E,x,v]);return(0,c.useMemo)((()=>({phantomFee:F,networkFee:N,tokenAccountFee:R,totalFees:D,isFetchingFees:O})),[F,N,R,D,O])}})),s.register("aUSVN",(function(n,r){e(n.exports,"formatFee",(function(){return u}));var o=s("5slFC"),i=s("kAKNF"),a=s("Nt4tV");function u(e,n,r){if(n.lte(0))return"";const{coingeckoId:s,decimals:u,symbol:c}=o.NATIVE_TOKEN_MAP[e];if(!s||!u||!c)return"";const l=n.div(new(t(i))(10).pow(u)),d=r[s];if(!(null==d?void 0:d.usd))return`${(0,a.formatTokenAmount)(l.toString())} ${c}`;const p=(0,a.formatDollarAmountExtended)(l.times(d.usd).toNumber());return"$NaN"!==p?p:""}})),s.register("lfgtT",(function(t,n){e(t.exports,"useProvider",(function(){return i}));var r=s("29o0l"),o=s("aglkA");function i(e){return(0,r.useMemo)((()=>(0,o.parseSwapSources)(e)),[e])}})),s.register("aglkA",(function(t,n){function r(e){const t=e.reduce(((e,t)=>e.add(t.name)),new Set);return Array.from(t).join(" + ")}e(t.exports,"parseSwapSources",(function(){return r}))})),s.register("8vAsr",(function(t,n){e(t.exports,"useSwapConfirmationProps",(function(){return T}),(function(e){return T=e}));var r=s("iOvk1"),o=s("43063"),i=s("5uSEV"),a=s("29o0l"),u=s("Nt4tV"),c=s("3pIvT"),l=s("l7Y64"),d=s("a6NKv"),p=s("iTQ0V");s("f2tU6");var f=s("huZwj"),g=s("4MdgS"),h=s("kRcwf"),y=s("fQWxX"),m=s("997BK"),v=s("lfgtT"),S=s("2Upmy"),w=s("jVgYF"),A=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};function T({accountSigner:e,storage:t,fungibleHooks:n,priceHooks:s,settingsHooks:T,transactionHooks:b,accountHooks:E,analytics:k,isLedger:x,onError:P,priorityFeeService:I,isSwapSimulationDisabled:C}){var O,F,R,N,D,L,M,B;const{t:U}=(0,o.useTranslation)(),_=(0,m.useInitialSellFungible)({accountHooks:E}),{currentQuote:j,multichainQuoteResponse:q}=(0,S.useQuote)(),V=(0,p.useSwapperStore)((e=>e.buyFungible)),H=null!==(O=(0,p.useSwapperStore)((e=>e.sellFungible)))&&void 0!==O?O:_,K=(0,p.useSwapperStore)((e=>e.buyUsdValue)),Q=(0,p.useSwapperStore)((e=>e.sellUsdValue)),G=(0,p.useSwapperStore)((e=>e.setSellFungible)),W=(0,p.useSwapperStore)((e=>e.resetSwapper)),z=(0,p.useSwapperStore)((e=>e.maxGasEstimation)),{connection:$}=E.useSelectedSolanaConnection(),J=(0,v.useProvider)(null!==(F=null==j?void 0:j.sources)&&void 0!==F?F:[]),Y=(0,y.useFees)({transactionHooks:b,priceHooks:s,accountHooks:E,analytics:k}),X=(0,h.useAnalyticsPayload)({buyToken:V,sellToken:H,buyAmount:null!==(R=null==j?void 0:j.buyAmount.toString())&&void 0!==R?R:"",sellAmount:null!==(N=null==j?void 0:j.sellAmount.toString())&&void 0!==N?N:"",phantomFeeUiAmount:Y.phantomFee.uiAmount,priceImpact:Number(null!==(D=null==j?void 0:j.priceImpact.toString())&&void 0!==D?D:""),provider:J,buyAssetUsdValue:K,sellAssetUsdValue:Q}),Z=null!==(L=null==H?void 0:H.data.chain.id)&&void 0!==L?L:r.ChainID.SolanaMainnet,{data:ee}=E.useSelectedMultiChainAccount(),te=(0,a.useMemo)((()=>{var e;return null!==(e=null==ee?void 0:ee.addresses)&&void 0!==e?e:[]}),[ee]),ne=(0,a.useMemo)((()=>{var e,t;return null!==(t=null===(e=te.find((e=>e.chainId===(null==H?void 0:H.data.chain.id))))||void 0===e?void 0:e.address)&&void 0!==t?t:""}),[te,H]),{data:re,isSuccess:oe}=(0,d.useSwapTransactions)({accountHooks:E,callerAddress:ne,priorityFeeService:I,quote:j,sellFungible:H}),ie=(0,w.useSwapScanTransaction)({accountHooks:E,swapTransactions:re}),se=(0,a.useMemo)((()=>C?{isValid:!0,isLoading:!1}:ie),[C,ie]),ae=(null==re?void 0:re.transactions.length)||0,[ue,ce]=(0,a.useState)(),le=(0,a.useMemo)((()=>{var e;return null!==(e=null==ue?void 0:ue.id)&&void 0!==e?e:""}),[ue]),{data:de}=T.usePreferredExplorers(),pe=(0,a.useMemo)((()=>{if(!le)return;const e=null==de?void 0:de.explorers[Z];return(0,i.generateExplorerUrl)({chainId:Z,endpoint:"transaction",explorerType:e,txSignature:le})}),[le,Z,de]),[fe,ge]=(0,a.useState)(!1),[he,ye]=(0,a.useState)("loading"),me="success"===he,ve="failure"===he,Se=!!ue,[we,Ae]=(0,a.useState)(void 0),{notEnoughSol:Te,txErrorMessage:be}=(0,c.useSwapError)(we),{mutateAsync:Ee}=(0,l.useMultichainSwapFungibles)({accountSigner:e,storage:t,accountIdentifier:null!==(M=null==ee?void 0:ee.identifier)&&void 0!==M?M:"",chainId:Z}),ke=(0,a.useCallback)((()=>A(this,void 0,void 0,(function*(){k.capture("swapperSwapSuccess",X),W(),(0,g.updateSellFungibleAmount)({sellAmount:null==j?void 0:j.sellAmount.toString(),sellFungible:H,setSellFungible:G}),n.invalidateTokens(te)}))),[te,k,X,j,n,W,H,G]),{isSuccess:xe,isError:Pe}=b.useWaitForTransactionConfirmation(ke,ue);(0,a.useEffect)((()=>{xe?ye("success"):Pe&&ye("failure")}),[xe,Pe]);const Ie=null!==(B=null==V?void 0:V.data.symbol)&&void 0!==B?B:void 0,Ce=(0,a.useMemo)((()=>{var e,t,n,r;const o=null==H?void 0:H.data.symbol,i=(0,u.amountToUiAmount)(null!==(e=null==j?void 0:j.sellAmount)&&void 0!==e?e:0,null!==(t=null==H?void 0:H.data.decimals)&&void 0!==t?t:0),s=(0,u.amountToUiAmount)(null!==(n=null==j?void 0:j.buyAmount)&&void 0!==n?n:0,null!==(r=null==V?void 0:V.data.decimals)&&void 0!==r?r:0);return{topLeft:{label:`${U("transactionsPendingSwapping")} on ${J}`},topRight:{label:`${s} ${Ie}`,color:"#21E56F"},bottomLeft:{label:`${o} ${String.fromCharCode(8594)} ${Ie}`},bottomRight:{label:`${i} ${o}`}}}),[U,H,Ie,V,j,J]),Oe=(0,a.useMemo)((()=>{const e=null==H?void 0:H.data.symbol;return{topLeft:{label:`${U("transactionsPendingApproving")} ${e}`}}}),[U,H]),Fe=(0,a.useCallback)((()=>A(this,void 0,void 0,(function*(){if(ge(!0),ye("loading"),ce(void 0),Ae(void 0),!j)throw new Error("Trying to execute swap with no current quote");if(!q)throw new Error("Trying to execute swap with no multichain quote response");if(!z)throw new Error("No gas estimation available");if(!re)throw new Error("No swap transactions available");try{if(!se.isValid)throw new Error("Scan results are not valid");const e=yield Ee({type:(0,r.getChainType)(Z),callerAddress:ne,swapTransactions:re,pendingSwapActivityRows:Ce,pendingApprovalActivityRows:Oe,gasEstimation:z,connection:$});ce(e)}catch(e){console.error(e);const t=(0,f.parseSwapError)(e);ye("failure"),Ae(t),P&&P(t),k.capture("swapperSwapFailure",X)}}))),[j,$,Z,q,k,z,se,Ce,Oe,ne,re,Ee,X,P]),Re=(0,a.useMemo)((()=>fe||!se.isLoading&&oe),[fe,se,oe]);return{buyAssetSymbol:Ie,isSuccess:me,isFailure:ve,isLedger:x,isClosable:Se,notEnoughSol:Te,txError:we,txErrorMessage:be,txLink:null!=pe?pe:"",executeSwap:Fe,resetSwapper:W,numberOfTransactions:ae,isReadyToExecute:Re,chainType:(0,r.getChainType)(Z)}}})),s.register("4MdgS",(function(t,n){function r({sellAmount:e,sellFungible:t,setSellFungible:n}){if(t&&e){const r=Object.assign({},t);r.data.amount=String(Number(t.data.amount)-Number(e)),n(r)}}e(t.exports,"updateSellFungibleAmount",(function(){return r}))})),s.register("kRcwf",(function(t,n){e(t.exports,"useAnalyticsPayload",(function(){return u}));var r=s("iOvk1"),o=s("29o0l"),i=s("24hfq"),a=s("Nt4tV");function u({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:n,sellToken:i,buyAmount:s,sellAmount:u,phantomFeeUiAmount:d,priceImpact:p,provider:f}){return(0,o.useMemo)((()=>{var o,g,h,y;if(t&&i){const m=c(s,t.data.decimals,e),v=c(u,i.data.decimals,n),S=l(m,v);return{data:{chainId:null!==(o=i.data.chain.id)&&void 0!==o?o:t.data.chain.id,chainType:null!==(g=(0,r.getChainType)(i.data.chain.id))&&void 0!==g?g:(0,r.getChainType)(t.data.chain.id),marketName:`${i.data.symbol}/${t.data.symbol}`,tradeDirection:"sell",swapSource:f,priceImpact:p,fromAssetSymbol:null!==(h=i.data.symbol)&&void 0!==h?h:"",fromAssetAddress:i.data.tokenAddress,fromAssetAmount:(0,a.amountToUiAmount)(u,i.data.decimals),fromAssetUsdPrice:n,fromAssetUsdVolume:v,toAssetSymbol:null!==(y=t.data.symbol)&&void 0!==y?y:"",toAssetAddress:t.data.tokenAddress,toAssetAmount:(0,a.amountToUiAmount)(s,t.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:m,totalUsdVolume:S,feeUsd:d}}}return{}}),[e,n,s,t,d,p,f,u,i])}const c=(e,t,n)=>{if(n){const r=(0,a.amountToUiAmount)(e,t);return new(0,i.BigNumber)(r).times(new(0,i.BigNumber)(n)).toNumber()}},l=(e,t)=>t&&e?t>e?t:e:null!=t?t:e})),s.register("jVgYF",(function(t,n){e(t.exports,"useSwapScanTransaction",(function(){return d}));var r=s("iOvk1"),o=s("29o0l"),i=s("3TL6Y"),a=s("iTQ0V"),u=s("5LE7h"),c=s("997BK"),l=s("2Upmy");const d=({accountHooks:e,swapTransactions:t})=>{var n,s,d;const p=(0,c.useInitialSellFungible)({accountHooks:e}),f=null!==(n=(0,a.useSwapperStore)((e=>e.sellFungible)))&&void 0!==n?n:p,g=null!==(s=null==f?void 0:f.data.chain.id)&&void 0!==s?s:r.ChainID.SolanaMainnet,{data:h}=e.useSelectedChainAddress(g),y=null!==(d=null==h?void 0:h.address)&&void 0!==d?d:"",{currentQuote:m,multichainQuoteResponse:v}=(0,l.useQuote)();let S=null;"evm"===(null==t?void 0:t.type)&&(0,r.isEVMChainID)(g)&&(S={chainId:g,origin:"https://phantom.app",userAccount:y,transactions:t.transactions}),"solana"===(null==t?void 0:t.type)&&(0,r.isSolanaChainID)(g)&&(S={chainId:g,origin:"https://phantom.app",userAccount:y,transactions:t.transactions});const w=(0,i.useScanTransaction)({label:"useSwapScanTransaction",params:S});return(0,o.useMemo)((()=>{var e,t;return{isValid:(0,u.validateScanResult)({simulationResults:null===(t=null===(e=w.data)||void 0===e?void 0:e.evaluation)||void 0===t?void 0:t.simulationResults,scanResultError:w.isError,quote:m,sellToken:null==v?void 0:v.sellToken,buyToken:null==v?void 0:v.buyToken,simulationTolerance:null==v?void 0:v.simulationTolerance}),isLoading:w.isLoading}}),[w,m,v])}})),s.register("5LE7h",(function(n,r){e(n.exports,"validateScanResult",(function(){return d}));var o=s("1cPb8"),i=s("csW2r"),a=s("kAKNF"),u=s("1freM");const c="swap-validation",l=e=>t=>t.rawInfo.data.contract.address===(e=>{var t;if(e.resourceType===o.Caip19ResourceType.nativeToken){if(["60","966"].includes(e.slip44))return"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"}else if(e.resourceType===o.Caip19ResourceType.address)return null!==(t=e.address)&&void 0!==t?t:"";return""})(e),d=({simulationResults:e,scanResultError:n,quote:r,sellToken:o,buyToken:s,simulationTolerance:d=.01})=>{var p,f;if(n)return!0;if(!(r&&e&&o&&s&&d))return i.telemetry.addBreadcrumb(c,`Missing necessary args: ${JSON.stringify({quote:!!r,simulationResults:!!e,sellToken:o,buyToken:s,simulationTolerance:d})}`,i.Severity.Info),!1;if(["SIMULATION_FAILED"].includes(null!==(f=null===(p=e.error)||void 0===p?void 0:p.kind)&&void 0!==f?f:""))return!0;if(e.error)return i.telemetry.addBreadcrumb(c,`Simulation has error: ${JSON.stringify({sellToken:o,buyToken:s,error:e.error})}`,i.Severity.Info),!1;let g,h;if("isRecentBlockhashExpired"in e)return!0;{const n=e.expectedStateChanges.filter((e=>[u.StateChangeKind.Erc20Transfer,u.StateChangeKind.NativeAssetTransfer].includes(e.rawInfo.kind)));g=n.filter(l(s)).reduce(((e,n)=>{const{before:r,after:o}=n.rawInfo.data.amount,i=new(t(a))(r),s=new(t(a))(o);return e.plus(s.minus(i))}),new(t(a))(0)),h=n.filter(l(o)).reduce(((e,n)=>{const{before:r,after:o}=n.rawInfo.data.amount,i=new(t(a))(r),s=new(t(a))(o);return e.plus(i.minus(s))}),new(t(a))(0))}const y=new(t(a))(r.buyAmount),m=new(t(a))(r.sellAmount),v=g.minus(y).dividedBy(y).absoluteValue(),S=h.minus(m).dividedBy(m).absoluteValue(),w=v.lt(d)&&S.lt(d);return w||i.telemetry.addBreadcrumb(c,`Diff is larger than simulationTolerance: ${JSON.stringify({sellToken:o,buyToken:s,buyDiff:v.toString(),sellDiff:S.toString(),simulationTolerance:d})}`,i.Severity.Info),w}})),s.register("ipDsT",(function(n,r){e(n.exports,"useSwapProvidersProps",(function(){return h}));var o=s("1cPb8"),i=s("5slFC"),a=s("43063"),u=s("kAKNF"),c=s("29o0l"),l=s("Nt4tV"),d=s("iTQ0V"),p=s("aglkA"),f=s("2Upmy"),g=s("6aawr");function h({includeBridgePairs:e,accountHooks:n,fungibleHooks:r,getApiEnvironment:s}){const{t:h}=(0,a.useTranslation)(),{bestBuyAmount:y,multichainQuoteResponse:m,quotes:v,selectedProviderIndex:S}=(0,f.useQuote)(),w=(0,d.useSwapperStore)((e=>e.setSelectedProviderIndex)),{assets:A}=(0,g.useSwapBuyAssetList)({includeBridgePairs:e,fungibleHooks:r,accountHooks:n,getApiEnvironment:s});return{rows:(0,c.useMemo)((()=>{if(!m||!A)return[];const{buyToken:e}=m;let n="";e.resourceType===o.Caip19ResourceType.nativeToken?n=(0,i.chainIdToNativeTokenFungibleKey)(e.chainId):e.address&&(n=e.address);const r=A.find((e=>e.data.key===n));return r?v.map((e=>{const{buyAmount:n,sources:o}=e,i=new(t(u))(n),s=new(t(u))(y).minus(i),a=(0,l.amountToFormattedAmount)(s,r.data.decimals);return{label:(0,p.parseSwapSources)(o),value:s.isZero()?h("swapFeesBestPrice"):`- ${a} ${r.data.symbol}`}})):[]}),[y,m,v,h,A]),selectedProviderIndex:S,setSelectedProviderIndex:w}}})),s.register("5WhLj",(function(t,n){e(t.exports,"useSwapReviewButtonProps",(function(){return f}));var r=s("iOvk1"),o=s("5slFC"),i=s("29o0l"),a=s("Nt4tV"),u=s("iTQ0V"),c=s("hCIG6"),l=s("fQWxX"),d=s("997BK"),p=s("2Upmy");function f({accountHooks:e,fungibleHooks:t,transactionHooks:n,priceHooks:s,analytics:f}){var g,h;const{currentQuote:y}=(0,p.useQuote)(),m=(0,u.useSwapperStore)((e=>e.hasNoRoutes)),v=(0,d.useInitialSellFungible)({accountHooks:e}),S=null!==(g=(0,u.useSwapperStore)((e=>e.sellFungible)))&&void 0!==g?g:v,w=(0,u.useSwapperStore)((e=>e.sellAmount)),A=null!==(h=null==S?void 0:S.data.chain.id)&&void 0!==h?h:r.ChainID.SolanaMainnet,T=(0,u.useSwapperStore)((e=>e.gasEstimation)),b=(0,u.useSwapperStore)((e=>e.maxGasEstimation)),{fungible:E}=t.useFungible({key:(0,o.chainIdToNativeTokenFungibleKey)(A)}),{totalFees:k}=(0,l.useFees)({transactionHooks:n,priceHooks:s,accountHooks:e,analytics:f}),x=(0,c.getMaxSellAmount)(S,k.amount),P=(0,i.useMemo)((()=>{var e,t,n;return(0,a.uiAmountToAmount)(null!==(e=null==E?void 0:E.data.balance)&&void 0!==e?e:0,null!==(t=null==E?void 0:E.data.decimals)&&void 0!==t?t:0).lt(null!==(n=k.maxAmount)&&void 0!==n?n:k.amount)}),[null==E?void 0:E.data,k]),I=Number(w)<=x;return{canSwap:!!y&&I&&!m&&!(!T||!b),hasEnoughAssets:I,hasNoRoutes:m,hasNoFundsForFees:P}}})),s.register("hCIG6",(function(n,r){e(n.exports,"getMaxSellAmount",(function(){return l}));var o=s("iOvk1"),i=s("5slFC"),a=s("kAKNF"),u=s("Nt4tV");const c={[o.Chain.Bitcoin]:new(t(a))(0*Math.pow(10,8)),[o.Chain.Solana]:new(t(a))(2.5*Math.pow(10,6)),[o.Chain.Ethereum]:new(t(a))(2.5*Math.pow(10,16)),[o.Chain.Polygon]:new(t(a))(6*Math.pow(10,16))};function l(e,n){const{decimals:r,amount:s,chain:l}=e.data,d=new(t(a))(s),p=(0,i.isNative)(e.type)?c[(0,o.getChain)(l.id)]:n,f=e&&(0,i.isNative)(e.type)&&d.gt(p)?d.minus(p).toNumber():d.toNumber();return(0,u.amountToUiAmount)(f,r)}})),s.register("5Soz0",(function(t,n){e(t.exports,"useSwapReviewProps",(function(){return p}));var r=s("5slFC"),o=s("56oyT"),i=s("29o0l"),a=s("Nt4tV"),u=s("iTQ0V");s("d0HjU");var c=s("lDJ5X"),l=s("997BK"),d=s("2Upmy");function p({priceHooks:e,accountHooks:t,analytics:n,getApiEnvironment:s}){var p;const f=(0,o.useIsUsingPricesBackend)(n),g=(0,u.useSwapperStore)((e=>e.buyFungible)),h=(0,l.useInitialSellFungible)({accountHooks:t}),y=null!==(p=(0,u.useSwapperStore)((e=>e.sellFungible)))&&void 0!==p?p:h,m=(0,u.useSwapperStore)((e=>e.sellAmount)),v=(0,u.useSwapperStore)((e=>e.setBuyUsdValue)),S=(0,u.useSwapperStore)((e=>e.setSellUsdValue)),w=(0,i.useMemo)((()=>{const e=[];return g&&y&&(e.push(g),e.push(y)),Object.assign({getApiEnvironment:s,isUsingBackendService:f},(0,r.tokensToTokenPriceQueries)(e))}),[g,s,y,f]),A=e.usePrices(w).reduce(((e,t)=>Object.assign(Object.assign({},e),t.data)),{}),{currentQuote:T,multichainQuoteResponse:b}=(0,d.useQuote)();return(0,i.useMemo)((()=>{var e,t;let n="",r="",o="",i="";if(!(b&&T&&g&&y))return{sellAmountText:o,sellAmountUsdText:i,buyAmountText:n,buyAmountUsdText:r};const s=null==g?void 0:g.data,u=null==y?void 0:y.data;if(!s||!u||!s)return{sellAmountText:o,sellAmountUsdText:i,buyAmountText:n,buyAmountUsdText:r};const{buyAmount:l}=T,d=(0,a.amountToUiAmount)(l,s.decimals),p=Number(m),f=String(d).split(".")[0].length,h=m.split(".")[0].length,w=null===(e=s.symbol)||void 0===e?void 0:e.length,E=null===(t=u.symbol)||void 0===t?void 0:t.length,k=f&&w?f+w:0,x=h&&E?h+E:0;o=`${(0,a.formatTokenAmountForReviewScreen)(p,x)} ${u.symbol}`,n=`${(0,a.formatTokenAmountForReviewScreen)(d,k)} ${s.symbol}`;const P=(0,c.extractUsdRate)(g,A),I=(0,c.extractUsdRate)(y,A);if(null==P?void 0:P.usd){const e=d*P.usd;r=`$${(0,a.formatTokenAmount)(e)}`,v(P.usd)}if(null==I?void 0:I.usd){const e=p*I.usd;i=`$${(0,a.formatTokenAmount)(e)}`,S(I.usd)}return{sellAmountText:o,sellAmountUsdText:i,buyAmountText:n,buyAmountUsdText:r}}),[b,g,y,T,m,v,S,A])}})),s.register("6CB7N",(function(t,n){e(t.exports,"useSwapSellAssetList",(function(){return c}));var r=s("iOvk1"),o=s("29o0l"),i=s("iTQ0V"),a=s("2REEw"),u=s("30Tum");function c({fungibleHooks:e}){const{fungibles:t,isLoadingTokens:n,isErrorTokens:s}=e.useFungibles(),c=t.filter((e=>(0,r.isSolanaChainID)(e.data.chain.id)||(0,r.isEVMChainID)(e.data.chain.id))),l=(0,i.useSwapperStore)((e=>e.sellFungible)),d=(0,o.useMemo)((()=>{if(l){const e=c.findIndex((e=>(0,a.areFungiblesEqual)(e,l))),t=c[e];t&&t.data.amount!==l.data.amount&&(c[e]=l)}return c.filter((e=>(0,u.canSellAsset)(e)))}),[c,l]);return(0,o.useMemo)((()=>({assets:d,isFetching:n,isError:s})),[d,n,s])}})),s.register("2REEw",(function(t,n){function r(e,t){return e.data.key===t.data.key}e(t.exports,"areFungiblesEqual",(function(){return r}))})),s.register("02Lw2",(function(t,n){e(t.exports,"useSwapSellAssetProps",(function(){return y}));var r=s("29o0l"),o=s("9CoSy"),i=s("m2d5Y"),a=s("Nt4tV"),u=s("2UOPE"),c=s("j3ma1"),l=s("iTQ0V"),d=s("hCIG6"),p=s("fQWxX"),f=s("997BK"),g=s("5KI92");const h=500;function y({transactionHooks:e,priceHooks:t,accountHooks:n,fungibleHooks:s,analytics:y,getApiEnvironment:m,queryClient:v,isBalanceHidden:S}){var w;const A=(0,f.useInitialSellFungible)({accountHooks:n}),T=null!==(w=(0,l.useSwapperStore)((e=>e.sellFungible)))&&void 0!==w?w:A,b=(0,l.useSwapperStore)((e=>e.sellAmount)),E=(0,l.useSwapperStore)((e=>e.uiSellAmount)),k=(0,l.useSwapperStore)((e=>e.setSellAmount)),x=(0,l.useSwapperStore)((e=>e.setSellFungible)),P=(0,l.useSwapperStore)((e=>e.setUiSellAmount)),I=(0,g.useSwapAssetCaip19)(T),C=null==T?void 0:T.data.key,{fungible:O}=s.useFungible({key:C}),[F,R]=(0,i.useDebouncedChangeHandler)(b,k,h),{totalFees:N}=(0,p.useFees)({transactionHooks:e,priceHooks:t,accountHooks:n,analytics:y}),D=null==T?void 0:T.data.amount,L=T?T.data.decimals:0,M=(0,r.useMemo)((()=>(0,d.getMaxSellAmount)(T,N.amount)),[T,N]),B=Number(null!=b?b:0)>M,U=T&&T.data.symbol?T.data.symbol:"",_=b.split(".")[0].length,j=U.length,q=_&&j?_+j:0,V=S?` ${u.BALANCE_HIDDEN_TEXT}`:` ${(0,a.formatTokenAmountForReviewScreen)((0,a.amountToUiAmount)(D,L),q)} ${T?T.data.symbol:""}`,H=(0,r.useCallback)((e=>{const t=(0,a.formatTokenAmountInputs)(e.substring(0,o.MOBILE_SWAP_INPUT_MAX_LENGTH)),n=(0,a.formatTokenAmountToMaxDecimals)(t,L);P(n),R(n)}),[L,R,P]),K=(0,r.useCallback)((()=>{H(M.toString())}),[M,H]);return(0,r.useEffect)((()=>{O&&O.data.amount!==D&&x(O)}),[O,D,x]),(0,r.useEffect)((()=>{b&&(0,c.prefetchSwapPairs)({sellToken:I,getApiEnvironment:m,queryClient:v})}),[I,m,v,b]),{assetButtonTitle:U,decimals:L,formattedMaxSellAmount:V,sellFungible:T,notEnoughAssets:B,uiSellAmount:E,setMaxSellAmount:K,updateSellAmount:H}}})),s.register("fPjP5",(function(t,n){e(t.exports,"useSwapBuyAssetProps",(function(){return d}));var r=s("29o0l"),o=s("Nt4tV"),i=s("2UOPE"),a=s("iTQ0V"),u=s("2Upmy"),c=s("dkOnS"),l=s("cfA1B");function d(e){var t,n;const s=(0,a.useSwapperStore)((e=>e.sellFungible)),d=null!==(t=(0,a.useSwapperStore)((e=>e.buyFungible)))&&void 0!==t?t:i.INITIAL_BUY_FUNGIBLE,p=(0,a.useSwapperStore)((e=>e.isFetchingQuote)),f=(0,a.useSwapperStore)((e=>e.setSellAmount)),g=(0,a.useSwapperStore)((e=>e.setUiSellAmount)),h=(0,l.useSwapSetSellAsset)(e),y=(0,c.useSwapSetBuyAsset)(e),{currentQuote:m,multichainQuoteResponse:v}=(0,u.useQuote)(),S=String(m&&v&&d?(0,o.amountToFormattedAmount)(m.buyAmount,d.data.decimals):""),w=null!==(n=null==d?void 0:d.data.decimals)&&void 0!==n?n:0,A=d&&d.data.symbol?d.data.symbol:"",T=(0,r.useCallback)((()=>{f(S),g(S),d&&h(d),s&&y(s)}),[f,S,g,d,s,h,y]);return{assetButtonTitle:A,buyAmount:S,decimals:w,buyFungible:d,isFetchingQuote:p,onSwitchTokens:T}}})),s.register("dkOnS",(function(t,n){e(t.exports,"useSwapSetBuyAsset",(function(){return a}));var r=s("29o0l"),o=s("iTQ0V"),i=s("j5sRo");function a(e){const t=(0,o.useSwapperStore)((e=>e.setBuyFungible));return(0,r.useCallback)((n=>{const r=(0,i.getAnalyticsAsset)(n);e.capture("swapperUpdateToAsset",{asset:r}),t(n)}),[e,t])}})),s.register("j5sRo",(function(t,n){e(t.exports,"getAnalyticsAsset",(function(){return i}));var r=s("iOvk1"),o=s("5slFC");function i(e){return{chain:r.Chain.Solana,type:"fungible",address:e.type===o.FungibleTokenType.SPL?e.data.mintAddress:void 0,symbol:e.data.symbol}}})),s.register("cfA1B",(function(t,n){e(t.exports,"useSwapSetSellAsset",(function(){return l}));var r=s("5slFC"),o=s("29o0l"),i=s("2UOPE"),a=s("iTQ0V"),u=s("2REEw"),c=s("j5sRo");function l(e){const t=(0,a.useSwapperStore)((e=>e.buyFungible)),n=(0,a.useSwapperStore)((e=>e.sellFungible)),s=(0,a.useSwapperStore)((e=>e.setBuyFungible)),l=(0,a.useSwapperStore)((e=>e.setSellFungible)),d=(0,a.useSwapperStore)((e=>e.resetQuote)),p=null==n?void 0:n.data.amount;return(0,o.useCallback)((o=>{const a=(0,c.getAnalyticsAsset)(o);e.capture("swapperUpdateFromAsset",{asset:a}),l(o),t&&n&&(0,u.areFungiblesEqual)(o,t)&&s(n),o&&(null==t?void 0:t.data.chain.id)!==o.data.chain.id&&(d(),o.data.key!==(0,r.chainIdToNativeTokenFungibleKey)(o.data.chain.id)?s(i.CHAIN_TO_NATIVE_FUNGIBLE.get(o.data.chain.id)):s(i.CHAIN_TO_USDC_FUNGIBLE.get(o.data.chain.id))),o&&o.data.amount!==p&&l(o)}),[e,t,n,s,l,p,d])}})),s.register("gb4iB",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return a}));var r=s("43063"),o=s("29o0l"),i=s("Nt4tV");function a(e){const{t:t}=(0,r.useTranslation)();return(0,o.useMemo)((()=>{const{networkFee:n,phantomFee:r,tokenAccountFee:o}=e;return{networkFee:{label:t("swapQuoteNetwork"),value:n.uiAmount,maxValue:n.maxUiAmount},tokenAccountFee:{label:t("swapQuoteOneTimeTokenAccount"),value:o.uiAmount},phantomFeePercent:{label:r.pct?t("swapQuoteFeeDisclaimer",{feePercentage:(0,i.formatPercentage)(r.pct)}):"",value:r.pct?`${r.pct}`:""}}}),[e,t])}})),s.register("93ApY",(function(n,r){e(n.exports,"lockExtension",(function(){return h}),(function(e){return h=e})),e(n.exports,"unlockExtension",(function(){return y}),(function(e){return y=e})),e(n.exports,"isExtensionUnlocked",(function(){return m}),(function(e){return m=e})),e(n.exports,"setLockTimer",(function(){return v}),(function(e){return v=e})),e(n.exports,"setPassword",(function(){return S}),(function(e){return S=e})),e(n.exports,"verifyPassword",(function(){return w}),(function(e){return w=e})),e(n.exports,"updatePassword",(function(){return A}),(function(e){return A=e})),e(n.exports,"importSeedAccount",(function(){return b}),(function(e){return b=e})),e(n.exports,"exportPrivateKey",(function(){return P}),(function(e){return P=e})),e(n.exports,"exportSeed",(function(){return I}),(function(e){return I=e})),e(n.exports,"hasOnboarded",(function(){return R}),(function(e){return R=e})),e(n.exports,"resetHasOnboarded",(function(){return N}),(function(e){return N=e})),e(n.exports,"getVaultProxy",(function(){return D}),(function(e){return D=e})),e(n.exports,"hasMnemonic",(function(){return L}),(function(e){return L=e})),e(n.exports,"getMnemonic",(function(){return M}),(function(e){return M=e})),e(n.exports,"setMnemonic",(function(){return B}),(function(e){return B=e})),e(n.exports,"getSeed",(function(){return U}),(function(e){return U=e}));var o=s("4xbAj"),i=s("iOvk1"),a=s("85iHy"),u=s("8PHta"),c=s("jqrFR"),l=s("hulLf"),d=s("fSBRP"),p=s("41yT6"),f=s("8tcqI").Buffer,g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const h=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.LockExtension),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);return t.result})),y=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.UnlockExtension,e),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);if("string"!=typeof n.result)throw new Error("Invalid response");const r=JSON.parse(n.result);return r.needsRefresh&&(yield p.queryClient.invalidateQueries({refetchType:"all"})),r.isUnlocked})),m=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.IsExtensionUnlocked),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);return t.result})),v=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.SetLockTimer,e),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);return n.result})),S=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.SetPassword,e),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);return n.result})),w=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.VerifyPassword,e),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);return n.result})),A=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.UpdatePassword,e),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);return n.result})),T=(e,t,n)=>g(void 0,void 0,void 0,(function*(){const r=t.fold((e=>f.from(e.buffer).toString("base64"))),o=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.ImportPrivateKeyAccount,[e,r,n]),i=yield l.browser.runtime.sendMessage(o);if("error"in i)throw new Error(i.error.message);if("string"==typeof i.result)return JSON.parse(i.result);throw new Error("Invalid response")})),b=(e,n,r)=>g(void 0,void 0,void 0,(function*(){const o=e.getEntropy(),i=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.ImportSeedAccount,[t(a).encode(o),n,r]);o.fill(0);const s=yield l.browser.runtime.sendMessage(i);if("error"in s)throw new Error(s.error.message);if("string"==typeof s.result)return JSON.parse(s.result);throw new Error("Invalid response")})),E=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.AddAccountForSeed,[e]),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return JSON.parse(n.result);throw new Error("Invalid response")})),k=(e,t)=>g(void 0,void 0,void 0,(function*(){const n=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.AddLedgerAccounts,[e,t]),r=yield l.browser.runtime.sendMessage(n);if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return JSON.parse(r.result);throw new Error("Invalid response")})),x=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.ImportReadOnlyAccount,e),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return JSON.parse(n.result);throw new Error("Invalid response")})),P=(e,t)=>g(void 0,void 0,void 0,(function*(){const n=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.ExportPrivateKey,[e,t]),r=yield l.browser.runtime.sendMessage(n);if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return u.ObfuscatedBytes.from(f.from(r.result,"hex"));throw new Error("Invalid response")})),I=e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.ExportSeed,[e]),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return u.ObfuscatedBytes.from(f.from(n.result,"hex"));throw new Error("Invalid response")})),C=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.GetAllAccounts),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result)return JSON.parse(t.result);throw new Error("Invalid response")})),O=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.GetAllSeeds),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result)return JSON.parse(t.result);throw new Error("Invalid response")})),F=(e,n)=>g(void 0,void 0,void 0,(function*(){const r=o.VaultSignerParams.parse(n);r.chainType===i.ChainType.Solana&&"transaction"===r.signingType&&"string"!=typeof r.message&&(r.message=t(a).encode(r.message));const s=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.Sign,{accountIdentifier:e,params:r}),u=yield l.browser.runtime.sendMessage(s);if("error"in u)throw new Error(u.error.message);if("string"==typeof u.result)return JSON.parse(u.result);throw new Error("Invalid response")})),R=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.HasOnboarded),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);return t.result})),N=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.ResetHasOnboarded),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);return t.result})),D=()=>({addAccountForSeed:E,addReadonlyAccount:x,importPrivateKeyAccount:T,connectLedgerAccounts:k,fetchAllAccounts:C,fetchAllSeedMetas:O,connectSolanaSeedVaultAccounts:()=>{throw new Error("Solana Seed Vault is not supported on browser extension.")},deriveAddresses:()=>g(void 0,void 0,void 0,(function*(){if(!(yield g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.DeriveAddresses),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);return t.result}))))throw new Error("Error while deriving addresses for enabled chains")})),removeAccount:e=>g(void 0,void 0,void 0,(function*(){const t=yield(e=>g(void 0,void 0,void 0,(function*(){const t=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.RemoveAccount,e),n=yield l.browser.runtime.sendMessage(t);if("error"in n)throw new Error(n.error.message);return n.result})))(e);if(!t)throw new Error("Error while removing account")})),reorderAccount:(e,t)=>g(void 0,void 0,void 0,(function*(){const n=yield((e,t)=>g(void 0,void 0,void 0,(function*(){const n=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.ReorderAccount,{identifier:e,toIndex:t}),r=yield l.browser.runtime.sendMessage(n);if("error"in r)throw new Error(r.error.message);return r.result})))(e,t);if(!n)throw new Error("Error while reordering account")})),sign:F}),L=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.HasMnemonic),t=yield l.browser.runtime.sendMessage(e);if("error"in t)throw new Error(t.error.message);return t.result})),M=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.GetMnemonic),n=yield l.browser.runtime.sendMessage(e);if("error"in n)throw new Error(n.error.message);if(!n.result)return null;const[r,o]=n.result;switch(r){case 0:{const e=new Uint8Array(t(a).decode(o).buffer),n=(yield(0,d.getBip39)()).fromEntropy(e);return e.fill(0),{type:"bip39",value:n}}case 1:return{type:"deprecated",value:new Uint8Array(t(a).decode(o).buffer)}}})),B=(e,n)=>g(void 0,void 0,void 0,(function*(){switch(n.type){case"bip39":{const r=n.value.getEntropy(),o=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.SetMnemonic,[e,[0,t(a).encode(r)]]);r.fill(0);const i=yield l.browser.runtime.sendMessage(o);if("error"in i)throw new Error(i.error.message);return i.result}case"deprecated":{const r=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.SetMnemonic,[e,[1,t(a).encode(n.value)]]),o=yield l.browser.runtime.sendMessage(r);if("error"in o)throw new Error(o.error.message);return o.result}}})),U=()=>g(void 0,void 0,void 0,(function*(){const e=(0,c.createJsonRpcRequest)(c.WalletToBackgroundRequestMethods.GetSeed),n=yield l.browser.runtime.sendMessage(e);if("error"in n)throw new Error(n.error.message);return"string"==typeof n.result?t(a).decode(n.result):null}))})),s.register("jqrFR",(function(t,n){var r,o,i,s,a,u;e(t.exports,"ProviderToWalletRequestMethods",(function(){return r})),e(t.exports,"WalletToBackgroundRequestMethods",(function(){return i})),e(t.exports,"RpcErrorCode",(function(){return a})),e(t.exports,"errorValues",(function(){return c})),e(t.exports,"createSignAllTransactionsSuccessResponse",(function(){return l})),e(t.exports,"createSignSuccessResponse",(function(){return d})),e(t.exports,"createSignTransactionSuccessResponse",(function(){return p})),e(t.exports,"createJsonRpcErrorResponse",(function(){return f})),e(t.exports,"createJsonRpcError",(function(){return g})),e(t.exports,"createJsonRpcResponse",(function(){return h})),e(t.exports,"createJsonRpcRequest",(function(){return y})),e(t.exports,"createAckResponse",(function(){return m})),e(t.exports,"createCopiedResponse",(function(){return v})),e(t.exports,"objectToUint8Array",(function(){return S})),(o=r||(r={})).Connect="connect",o.Disconnect="disconnect",o.SignTransaction="signTransaction",o.SignAllTransactions="signAllTransactions",o.SignAndSendTransaction="signAndSendTransaction",o.SignMessage="signMessage",(s=i||(i={})).LockExtension="lockExtension",s.UnlockExtension="unlockExtension",s.IsExtensionUnlocked="IsExtensionUnlocked",s.SetLockTimer="setLockTimer",s.SetPassword="setPassword",s.VerifyPassword="verifyPassword",s.UpdatePassword="updatePassword",s.ImportPrivateKeyAccount="importPrivateKeyAccount",s.ImportReadOnlyAccount="importReadOnlyAccount",s.ImportSeedAccount="importSeedAccount",s.AddAccountForSeed="addAccountForSeed",s.AddLedgerAccounts="addLedgerAccounts",s.DeriveAddresses="deriveAddresses",s.ExportPrivateKey="exportPrivateKey",s.ExportSeed="exportSeed",s.SetAccountIcon="setAccountIcon",s.RemoveAccount="removeAccount",s.ReorderAccount="reorderAccount",s.GetAllAccounts="getAllAccounts",s.GetAllSeeds="getAllSeeds",s.Sign="sign",s.HasOnboarded="hasOnboarded",s.ResetHasOnboarded="resetHasOnboarded",s.ProviderInjectionOptions="providerInjectionOptions",s.HasMnemonic="hasMnemonic",s.GetMnemonic="getMnemonic",s.SetMnemonic="setMnemonic",s.GetSeed="getSeed",(u=a||(a={}))[u.UserRejectedRequest=4001]="UserRejectedRequest",u[u.Unauthorized=4100]="Unauthorized",u[u.Disconnected=4900]="Disconnected",u[u.InternalError=-32603]="InternalError",u[u.InvalidInput=-32e3]="InvalidInput",u[u.MethodNotFound=-32601]="MethodNotFound",u[u.TransactionRejected=-32003]="TransactionRejected",u[u.ResourceUnavailable=-32002]="ResourceUnavailable";const c={[a.UserRejectedRequest]:{message:"User rejected the request."},[a.InternalError]:{message:"Something went wrong."},[a.MethodNotFound]:{message:"Method does not exist."},[a.InvalidInput]:{message:"Missing or invalid parameters."},[a.Unauthorized]:{message:"The requested method and/or account has not been authorized by the user."},[a.Disconnected]:{message:"Error connecting to the blockchain."},[a.TransactionRejected]:{message:"Transaction creation failed."},[a.ResourceUnavailable]:{message:"Requested resource not available."}},l=(e,t)=>{const{publicKey:n,payloads:r}=t;return{jsonrpc:"2.0",id:e,result:{publicKey:n,signatures:r.map((e=>e.signature)),payloads:r}}},d=(e,t,n)=>({jsonrpc:"2.0",id:e,result:{publicKey:n,signature:t}}),p=(e,t)=>{const{publicKey:n,payload:r}=t,{signature:o}=r;return{jsonrpc:"2.0",id:e,result:{publicKey:n,signature:o,payload:r}}},f=(e,t,n)=>({jsonrpc:"2.0",id:e,error:g(t,n)}),g=(e,t)=>({code:e,message:null!=t?t:c[e].message}),h=(e,t)=>({jsonrpc:"2.0",id:e,result:t}),y=(e,t,n=Date.now())=>({jsonrpc:"2.0",id:n,method:e,params:t}),m=e=>{e.result={}},v=(e,t)=>{const{result:n,error:r}=t;n&&(e.result=n),r&&(e.error=r)},S=e=>{const t=Object.keys(e).sort((e=>Number(e))).map((t=>e[t]));return new Uint8Array(t)}})),s.register("fSBRP",(function(t,n){e(t.exports,"getBip39",(function(){return i}),(function(e){return i=e})),s("dyTLY");var r=s("28ipF");s("aNyyc");var o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const i=(()=>{let e=null;return()=>o(void 0,void 0,void 0,(function*(){e||(e=yield r.Bip39Factory.webCrypto("english"));return e}))})()})),s.register("dyTLY",(function(e,t){var r=s("1GBLm"),o=s("28ipF");n(e.exports,r),n(e.exports,o)})),s.register("1GBLm",(function(t,n){e(t.exports,"ERR_UNKNOWN",(function(){return o}),(function(e){return o=e})),e(t.exports,"ERR_INVALID_CHECKSUM",(function(){return a}),(function(e){return a=e})),e(t.exports,"assertEntropyLengthIsValid",(function(){return p}),(function(e){return p=e})),e(t.exports,"assertWordlistIsValid",(function(){return g}),(function(e){return g=e})),e(t.exports,"generateEntropy",(function(){return h}),(function(e){return h=e})),e(t.exports,"deriveBits",(function(){return y}),(function(e){return y=e})),e(t.exports,"mapBitsToIndexes",(function(){return m}),(function(e){return m=e})),e(t.exports,"indexesToEntropy",(function(){return v}),(function(e){return v=e})),e(t.exports,"entropyToIndexes",(function(){return S}),(function(e){return S=e})),e(t.exports,"mnemonicToIndexes",(function(){return w}),(function(e){return w=e})),e(t.exports,"entropyToMnemonic",(function(){return A}),(function(e){return A=e})),e(t.exports,"entropyToSeed",(function(){return b}),(function(e){return b=e}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const o=new Error("Unknown error"),i=new Error("Invalid entropy length"),s=new Error("Invalid mn*monic sentence length"),a=new Error("Invalid checksum"),u=new RangeError("Invalid mn*monic word"),c=new RangeError("Invalid wordlist"),l=new RangeError("Invalid wordlist index"),d=(e,t)=>{if(!e)throw t};function p(e){d(e>=128,i),d(e<=256,i),d(e%32==0,i)}function f(e){d(e>=12,s),d(e<=24,s),d(e%3==0,s)}function g(e){d(2048===e.length,c),d(e.every((e=>"string"==typeof e)),c)}function h(e,t){return f(e),t(4*e/3)}function y(e,t){return r(this,void 0,void 0,(function*(){const n=8*e.length;p(n);const r=n/32,o=yield t(e),[i]=o,s=8-r,a=i>>>s<<s>>>0,u=new Uint8Array(e.length+1);return u.set(e,0),u[u.length-1]=a,u}))}function m(e){const t=8*(e.length-1);p(t);const n=(t+t/32)/11,r=new ArrayBuffer(4*n),o=new DataView(r);let i=0,a=0,u=0;for(const t of e)if(u+=8,a|=t<<32-u,a>>>=0,u>=11){const e=a>>>21;d(e>=0&&e<=2047,l),o.setUint32(4*i,e,!0),i++,a<<=11,a>>>=0,u-=11}return d(i===n,s),new Uint32Array(r)}function v(e){f(e.length);const t=function(e){f(e.length);const t=11*e.length,n=new ArrayBuffer(Math.ceil(t/8)),r=new DataView(n),o=new DataView(e.buffer),i=e.length;let s=0,a=0,u=0,c=8;for(let e=0;e<i;e++){const t=o.getUint32(4*e,!0);d(t<2048,l);let n=11;for(;n>0;){const e=n>=c?c:n;s|=t>>32-(32-n)-e&(1<<e)-1,a+=e,s<<=c-e,s>>>=0,n-=e,c-=e,c<=0&&(c=8),a%8==0&&(r.setUint8(u,s),u++,s=0)}}return i%8!=0&&r.setUint8(u,s),new Uint8Array(n)}(e),n=t.slice(0,t.length-1);return t.fill(0),n}function S(e,t){return r(this,void 0,void 0,(function*(){p(8*e.length);const n=yield y(e,t),r=m(n);return n.fill(0),r}))}function w(e,t){g(t);const n=new Set(t),r=new Uint32Array(24);let o=0,i="";for(let s=0;s<e.length;s++){const a=e[s],c=32===a,l=s===e.length-1;if(l&&(i+=String.fromCharCode(a)),c||l){d(n.has(i),u);let e=0;for(const n of t){if(i===n)break;e++}r[o++]=e,i=""}else i+=String.fromCharCode(a)}f(o);const s=r.slice(0,o);return r.fill(0),s}function A(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield S(e,n),o=new Uint8Array(r.reduce(((e,n)=>e+t[n].length+1),-1));let i=0;for(const e of r){i>0&&(o[i++]=32);const n=t[e];for(const e of n)o[i++]=e.charCodeAt(0)}return r.fill(0),o}))}const T=Uint8Array.of(109,110,101,109,111,110,105,99);function b(e,t,n,o,i){return r(this,void 0,void 0,(function*(){const r=yield A(e,n,o),s=new Uint8Array(T.length+t.length);s.set(T,0),s.set(t,T.length);const a=yield i(r,s,2048,64,"sha512");return s.fill(0),r.fill(0),a}))}})),s.register("28ipF",(function(t,n){e(t.exports,"Bip39Factory",(function(){return f}),(function(e){return f=e}));var r=s("1GBLm"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},a=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function u(e){return o(this,void 0,void 0,(function*(){if("english"===e)return(yield s("i7B2V")).default}))}function c(e){return t=>new e(t)}function l(e,t){return n=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null,a=null,u=null;try{i=(0,r.indexesToEntropy)(n),s=yield(0,r.deriveBits)(i,t),a=(0,r.mapBitsToIndexes)(s);const o=n[n.length-1];if(o!==a[a.length-1])throw r.ERR_INVALID_CHECKSUM;u=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),null==s||s.fill(0),null==a||a.fill(0),o)throw o;return u}}))}function d(e,t){return n=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null;try{i=(0,r.mnemonicToIndexes)(n,t),s=yield e.fromIndexes(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}))}function p(e,t){return n=>{let o=null,i=null,s=null;try{i=(0,r.generateEntropy)(n,t),s=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=r.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}}class f{static webCrypto(e){var t,n;return o(this,void 0,void 0,(function*(){const s="string"==typeof e?yield u(e):e;(0,r.assertWordlistIsValid)(s);const f=e=>o(this,void 0,void 0,(function*(){return new Uint8Array(yield crypto.subtle.digest("SHA-256",e))})),g=(e,t,n,r,i)=>o(this,void 0,void 0,(function*(){const o="SHA-"+i.substring(3),s=yield crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]),a=yield crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:o},s,8*r);return new Uint8Array(a)}));return n=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,t,"f"),e,s,f,g),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,t,"f"),f),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,t,"f"),s,f),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),i(this,t,e.slice(),"f")}},t=new WeakMap,n.fromEntropy=c(n),n.fromIndexes=l(n,f),n.fromMnemonic=d(n,s),n.fromSentenceLength=p(n,(e=>crypto.getRandomValues(new Uint8Array(e)))),n.wordlist=s,n}))}static nodeCrypto(e){var t,n;return o(this,void 0,void 0,(function*(){const f="string"==typeof e?yield u(e):e;(0,r.assertWordlistIsValid)(f);const{randomBytes:g,createHash:h,pbkdf2:y}=yield s("fob1U"),m=e=>o(this,void 0,void 0,(function*(){return new Uint8Array(h("sha256").update(e).digest().buffer)})),v=(...e)=>new Promise(((t,n)=>{y(...e,((e,r)=>{if(e)return n(e);t(new Uint8Array(r.buffer))}))}));return n=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,t,"f"),e,f,m,v),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,t,"f"),m),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,t,"f"),f,m),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),i(this,t,e.slice(),"f")}},t=new WeakMap,n.fromEntropy=c(n),n.fromIndexes=l(n,m),n.fromMnemonic=d(n,f),n.fromSentenceLength=p(n,(e=>new Uint8Array(g(e).buffer))),n.wordlist=f,n}))}static customCrypto(e,t){var n,s;return o(this,void 0,void 0,(function*(){const o="string"==typeof e?yield u(e):e;(0,r.assertWordlistIsValid)(o);const{random:f,sha256:g,pbkdf2:h}=t;return s=class{constructor(e){n.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,r.entropyToSeed)(a(this,n,"f"),e,o,g,h),this.getEntropy=()=>a(this,n,"f").slice(),this.getIndexes=()=>(0,r.entropyToIndexes)(a(this,n,"f"),g),this.getMnemonic=()=>(0,r.entropyToMnemonic)(a(this,n,"f"),o,g),this.getSentenceLength=()=>{const e=8*a(this,n,"f").length;return(e+e/32)/11},(0,r.assertEntropyLengthIsValid)(8*e.length),i(this,n,e.slice(),"f")}},n=new WeakMap,s.fromEntropy=c(s),s.fromIndexes=l(s,g),s.fromMnemonic=d(s,o),s.fromSentenceLength=p(s,f),s.wordlist=o,s}))}}})),s.register("i7B2V",(function(e,t){e.exports=s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("8ZV50")).then((()=>s("jI6Lx")))})),s.register("fob1U",(function(e,t){e.exports=s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("bSKtD")).then((()=>s("ieXYQ")))})),s.register("dbmto",(function(t,n){e(t.exports,"getLedgerWebHIDDependencies",(function(){return u}),(function(e){return u=e}));var r=s("2jR04"),o=s("c8OXT"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};const a=()=>i(void 0,void 0,void 0,(function*(){const{default:e}=yield s("38DbE");return e})),u=()=>({defaultTransportTimeout:500,isSupported:()=>i(void 0,void 0,void 0,(function*(){if(o.BROWSER_ENV.browser.name===r.BROWSER_MAP.firefox||o.BROWSER_ENV.browser.name===r.BROWSER_MAP.safari)return!1;return(yield a()).isSupported()})),getNumDevices:()=>i(void 0,void 0,void 0,(function*(){const e=yield a();return(yield e.list()).length})),getFirstOpenedTransport:()=>i(void 0,void 0,void 0,(function*(){const e=yield a(),t=(yield e.list()).find((e=>e.opened));return t?new e(t):void 0})),create:()=>i(void 0,void 0,void 0,(function*(){return(yield a()).create()})),openConnected:()=>i(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.openConnected()})),request:()=>i(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.request()})),on:(e,t)=>{"hid"in window.navigator&&window.navigator.hid.addEventListener(e,(()=>{t()}))}})})),s.register("38DbE",(function(e,t){e.exports=Promise.all([s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("4nmlj")),s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("7vHWN")),s("j1yuj")(s("2FqAO").getBundleURL("8OC5d")+s("eOkdY").resolve("99t1D"))]).then((()=>s("bnr7p")))})),s.register("cGJ3C",(function(n,r){e(n.exports,"ChainLogo",(function(){return c}));var o=s("iOvk1"),i=s("RVqnc"),a=s("29o0l"),u=s("j81qC");const c=t(a).memo((({chainId:e,height:n,width:r,stroke:s,strokeWidth:c,spacing:l="medium"})=>{if(!e)return null;const d={height:n,width:r,stroke:s,strokeWidth:c};return(0,o.isBitcoinChainID)(e)?"medium"===l?t(a).createElement(u.IconChainBitcoin,Object.assign({},d)):t(a).createElement(u.IconChainBitcoinLarge,Object.assign({},d)):(0,o.isSolanaChainID)(e)?"medium"===l?t(a).createElement(u.IconChainSolana,Object.assign({},d)):t(a).createElement(u.IconChainSolanaLarge,Object.assign({},d)):(0,o.isEthereumChainID)(e)?"medium"===l?t(a).createElement(u.IconChainEthereum,Object.assign({},d)):t(a).createElement(u.IconChainEthereumLarge,Object.assign({},d)):(0,o.isPolygonChainID)(e)?"medium"===l?t(a).createElement(u.IconChainPolygon,Object.assign({},d)):t(a).createElement(u.IconChainPolygonLarge,Object.assign({},d)):(0,i.assertNever)(e)}))})),s.register("lLNMU",(function(n,r){e(n.exports,"CheckboxGroup",(function(){return p}),(function(e){return p=e})),e(n.exports,"Checkbox",(function(){return f}),(function(e){return f=e}));var o=s("iI3jK"),i=s("29o0l"),a=s("gkfw3"),u=s("j81qC"),c=s("634r8"),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const d=22;const p=(0,a.default)(c.Row)`
  margin: ${e=>{var t;return null!==(t=e.margin)&&void 0!==t?t:0}};
  > * {
    margin-right: 10px;
  }

  label {
    color: #ab9ff2;
    cursor: pointer;

    &:hover {
      color: #e2dffe;
    }
  }
`,f=e=>{const{checked:n,onChange:r,color:s,checkColor:a}=e,c=l(e,["checked","onChange","color","checkColor"]),p=function(e,t="#AB9FF2"){return(0,i.useMemo)((()=>({background:"#282828",border:`1px solid ${e?t:"#4d4d4d"}`,borderRadius:"6px",height:`${d}px`,minHeight:`${d}px`,width:`${d}px`,minWidth:`${d}px`,cursor:"pointer",userSelect:"none",position:"relative",outlineColor:"transparent",outlineStyle:"none",boxShadow:"none"})),[e,t])}(n,s),f=function(e,t="#AB9FF2"){return(0,i.useMemo)((()=>({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%",height:"100%",userSelect:"none",pointerEvents:"none",borderRadius:"4px",opacity:""+(e?1:0),zIndex:1,background:e?t:"transparent"})),[e,t])}(n,s);return t(i).createElement(o.CustomCheckboxContainer,{checked:n,onChange:r,style:p},t(i).createElement(o.CustomCheckboxInput,Object.assign({},c)),t(i).createElement("span",{"aria-hidden":!0,style:f},t(i).createElement(u.IconCheckmark,{width:"0.9em",fill:a||"#222"})))}})),s.register("iI3jK",(function(t,n){e(t.exports,"CustomCheckboxContainer",(function(){return N})),e(t.exports,"CustomCheckboxInput",(function(){return D}));var r=s("29o0l"),o=s("7CBpB"),i=s("aYhYb"),a=s("18uvf"),u=s("cXfhD"),c=s("5mEzL"),l=s("2eJU6"),d=s("brdH9"),p=s("guOPS");function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var h,y,m,v,S,w=!1;function A(e){return!(!e||e.isControlled||e.disabled)}function T(e){return function(t,n){return t&&t.isControlled&&n.state===e}}(m=y||(y={})).Checked="checked",m.Mixed="mixed",m.Unchecked="unchecked",(S=v||(v={})).GetDerivedData="GET_DERIVED_DATA",S.Mount="MOUNT",S.Set="SET",S.Toggle="TOGGLE",S.Unmount="UNMOUNT";var b=(0,d.assign)((function(e,t){return f({},e,{refs:t.refs})})),E=((h={})[v.Mount]={actions:b},h[v.GetDerivedData]={actions:[b,(0,d.assign)((function(e,t){return f({},e,t.data)}))]},h[v.Set]=[{target:y.Checked,cond:T(y.Checked)},{target:y.Unchecked,cond:T(y.Unchecked)},{target:y.Mixed,cond:T(y.Mixed)}],h),k=function(e,t){var n,r,o,i;return{id:"mixed-checkbox",initial:e,context:{disabled:t.disabled,isControlled:t.isControlled,refs:{input:null}},states:(i={},i[y.Unchecked]={entry:b,on:f((n={},n[v.Toggle]={target:y.Checked,cond:A},n),E)},i[y.Checked]={entry:b,on:f((r={},r[v.Toggle]={target:y.Unchecked,cond:A},r),E)},i[y.Mixed]={entry:b,on:f((o={},o[v.Toggle]={target:y.Checked,cond:A},o),E)},i)}};function x(e,t,n){void 0===n&&(n="useMixedCheckbox");var o,i=t||{},s=i.checked,a=i.defaultChecked,u=i.disabled,d=i.onChange,f=i.onClick,g=null!=s,h=(0,p.useCreateMachine)(k(P(g?s:a),{disabled:!!u,isControlled:g})),m=(0,p.useMachine)(h,{input:e},w),S=m[0],A=m[1],T={"aria-checked":I(S.value),checked:(o=S.value,o===y.Checked),disabled:!!u,onChange:(0,c.composeEventHandlers)(d,(function(){g||A(v.Toggle)})),onClick:(0,c.composeEventHandlers)(f,(function(){E()})),type:"checkbox"},b={checked:I(S.value)};function E(){e.current&&(e.current.indeterminate=S.value===y.Mixed)}return(0,r.useEffect)((function(){g&&A({type:v.Set,state:P(s)})}),[g,s,A]),(0,l.useIsomorphicLayoutEffect)(E),(0,r.useEffect)((function(){A({type:v.GetDerivedData,data:{disabled:u,isControlled:g}})}),[u,g,A]),[T,b]}function P(e){return!0===e?y.Checked:"mixed"===e?y.Mixed:y.Unchecked}function I(e){return e===y.Checked||e===y.Mixed&&"mixed"}function C(e,t,n){var o=null!=e,i=(0,r.useRef)(o).current;(0,r.useEffect)((function(){}),[n,t,o,i])}var O=["as","checked","children","defaultChecked","disabled","onClick","onChange","__componentName"],F=["as","onBlur","onFocus"],R=(0,o.createNamedContext)("CustomCheckboxContext",{});var N=(0,r.forwardRef)((function(e,t){var n=e.as,o=void 0===n?"span":n,s=e.checked,u=e.children,l=e.defaultChecked,d=e.disabled,p=e.onClick,h=e.onChange,y=e.__componentName,m=void 0===y?"CustomCheckboxContainer":y,v=g(e,O),S=(0,r.useRef)(null),w=x(S,{defaultChecked:l,checked:s,disabled:d,onChange:h},m),A=w[0],T=w[1],b=(0,r.useState)(!1),E=b[0],k=b[1];var I={defaultChecked:l,disabled:d,focused:E,inputProps:A,inputRef:S,setFocused:k};return C(s,"checked",m),(0,a.useCheckStyles)("checkbox"),(0,r.createElement)(R.Provider,{value:I},(0,r.createElement)(o,f({},v,{ref:t,"data-reach-custom-checkbox-container":"","data-focused":E?"":void 0,"data-state":P(T.checked),onClick:(0,c.composeEventHandlers)(p,(function(){window.requestAnimationFrame((function(){S.current&&S.current.focus()}))}))}),(0,i.isFunction)(u)?u({checked:A["aria-checked"],inputRef:S,focused:E}):u))})),D=(0,r.forwardRef)((function(e,t){var n=e.as,o=void 0===n?"input":n,i=e.onBlur,s=e.onFocus,a=g(e,F),l=(0,r.useContext)(R),d=l.focused,p=l.inputProps,h=l.inputRef,y=l.setFocused,m=(0,u.useComposedRefs)(t,h),v=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){v.current=!1}}),[]),(0,r.createElement)(o,f({},a,p,{ref:m,type:"checkbox","data-reach-custom-checkbox-input":"","data-focused":d?"":void 0,onBlur:(0,c.composeEventHandlers)(i,(function(){window.requestAnimationFrame((function(){v.current&&y(!1)}))})),onFocus:(0,c.composeEventHandlers)(s,(function(){window.requestAnimationFrame((function(){v.current&&y(!0)}))}))}))}))})),s("dNDmI")}();
//# sourceMappingURL=ConnectHardwareMultichainFlow.e9ea5cf5.js.map
define=__define;})(window.define);